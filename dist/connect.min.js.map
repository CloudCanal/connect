{"version":3,"file":"connect.min.js","sources":["../src/events.ts","../src/state.ts","../node_modules/pocketbase/dist/pocketbase.es.mjs","../src/db.ts","../src/index.ts"],"sourcesContent":["// Types\r\nexport type EventCallback<T = unknown> = (payload: T) => void;\r\nexport type DOMEventCallback = (event: Event) => void;\r\n\r\ninterface ListenerEntry {\r\n  type: 'custom' | 'dom';\r\n  event: string;\r\n  callback: EventCallback | DOMEventCallback;\r\n  selector?: string | Document;\r\n  originalCallback?: EventCallback | DOMEventCallback; // For once() wrappers\r\n}\r\n\r\n// Central listener registry\r\nconst listeners: ListenerEntry[] = [];\r\nconst customHandlers = new Map<string, Set<EventCallback>>();\r\n\r\n// Track realtime subscriptions (collection -> listener count)\r\nconst realtimeCollections = new Map<string, number>();\r\n\r\n// DOM event delegation handler (attached to document)\r\nconst domDelegationHandlers = new Map<string, (e: Event) => void>();\r\n\r\n// Reference to db module (set via setDbModule to avoid circular imports)\r\nlet dbModule: {\r\n  enableRealtime: (collection: string) => Promise<void>;\r\n  disableRealtime: (collection: string) => Promise<void>;\r\n} | null = null;\r\n\r\n/**\r\n * Set the db module reference (called from db.ts to avoid circular imports)\r\n */\r\nexport function setDbModule(db: typeof dbModule): void {\r\n  dbModule = db;\r\n}\r\n\r\n/**\r\n * Parse a db event name to extract collection and action\r\n * Returns null if not a db event\r\n */\r\nfunction parseDbEvent(eventName: string): { collection: string; action: string } | null {\r\n  const match = eventName.match(/^db:([^:]+):(create|update|delete)$/);\r\n  if (match) {\r\n    return { collection: match[1], action: match[2] };\r\n  }\r\n  return null;\r\n}\r\n\r\n/**\r\n * Setup DOM event delegation for an event type\r\n */\r\nfunction ensureDomDelegation(eventType: string): void {\r\n  if (domDelegationHandlers.has(eventType)) return;\r\n\r\n  const handler = (e: Event) => {\r\n    // Find all listeners for this event type\r\n    for (const entry of listeners) {\r\n      if (entry.type !== 'dom' || entry.event !== eventType) continue;\r\n\r\n      // Check if target matches selector\r\n      if (entry.selector === document) {\r\n        (entry.callback as DOMEventCallback)(e);\r\n      } else if (typeof entry.selector === 'string') {\r\n        const target = e.target as Element;\r\n        if (target?.matches?.(entry.selector) || target?.closest?.(entry.selector)) {\r\n          (entry.callback as DOMEventCallback)(e);\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  document.addEventListener(eventType, handler, true);\r\n  domDelegationHandlers.set(eventType, handler);\r\n}\r\n\r\n/**\r\n * Remove DOM delegation if no more listeners for an event type\r\n */\r\nfunction cleanupDomDelegation(eventType: string): void {\r\n  const hasListeners = listeners.some(l => l.type === 'dom' && l.event === eventType);\r\n  if (!hasListeners) {\r\n    const handler = domDelegationHandlers.get(eventType);\r\n    if (handler) {\r\n      document.removeEventListener(eventType, handler, true);\r\n      domDelegationHandlers.delete(eventType);\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Handle realtime subscription when db:* listener added\r\n */\r\nasync function handleRealtimeAdd(collection: string): Promise<void> {\r\n  const count = (realtimeCollections.get(collection) || 0) + 1;\r\n  realtimeCollections.set(collection, count);\r\n\r\n  // First listener for this collection - enable realtime\r\n  if (count === 1 && dbModule) {\r\n    await dbModule.enableRealtime(collection);\r\n  }\r\n}\r\n\r\n/**\r\n * Handle realtime unsubscription when db:* listener removed\r\n */\r\nasync function handleRealtimeRemove(collection: string): Promise<void> {\r\n  const count = (realtimeCollections.get(collection) || 1) - 1;\r\n\r\n  if (count <= 0) {\r\n    realtimeCollections.delete(collection);\r\n    // Last listener removed - disable realtime\r\n    if (dbModule) {\r\n      await dbModule.disableRealtime(collection);\r\n    }\r\n  } else {\r\n    realtimeCollections.set(collection, count);\r\n  }\r\n}\r\n\r\nexport const events = {\r\n  /**\r\n   * Subscribe to an event\r\n   * @param event - Event name (custom) or DOM event type\r\n   * @param selectorOrCallback - CSS selector for DOM events, or callback for custom events\r\n   * @param callback - Callback for DOM events\r\n   */\r\n  on(\r\n    event: string,\r\n    selectorOrCallback: string | Document | EventCallback,\r\n    callback?: DOMEventCallback\r\n  ): void {\r\n    // DOM event: on('click', '#btn', callback) or on('keydown', document, callback)\r\n    if (callback !== undefined) {\r\n      const selector = selectorOrCallback as string | Document;\r\n      const entry: ListenerEntry = { type: 'dom', event, callback, selector };\r\n      listeners.push(entry);\r\n      ensureDomDelegation(event);\r\n      return;\r\n    }\r\n\r\n    // Custom event: on('auth:login', callback)\r\n    const cb = selectorOrCallback as EventCallback;\r\n    const entry: ListenerEntry = { type: 'custom', event, callback: cb };\r\n    listeners.push(entry);\r\n\r\n    if (!customHandlers.has(event)) {\r\n      customHandlers.set(event, new Set());\r\n    }\r\n    customHandlers.get(event)!.add(cb);\r\n\r\n    // Check for db:* events to enable realtime\r\n    const dbEvent = parseDbEvent(event);\r\n    if (dbEvent) {\r\n      handleRealtimeAdd(dbEvent.collection);\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Unsubscribe from an event\r\n   */\r\n  off(\r\n    event: string,\r\n    selectorOrCallback: string | Document | EventCallback,\r\n    callback?: DOMEventCallback\r\n  ): void {\r\n    // DOM event\r\n    if (callback !== undefined) {\r\n      const selector = selectorOrCallback as string | Document;\r\n      const index = listeners.findIndex(\r\n        l => l.type === 'dom' && l.event === event && l.selector === selector &&\r\n        (l.callback === callback || l.originalCallback === callback)\r\n      );\r\n      if (index !== -1) {\r\n        listeners.splice(index, 1);\r\n        cleanupDomDelegation(event);\r\n      }\r\n      return;\r\n    }\r\n\r\n    // Custom event\r\n    const cb = selectorOrCallback as EventCallback;\r\n    const index = listeners.findIndex(\r\n      l => l.type === 'custom' && l.event === event &&\r\n      (l.callback === cb || l.originalCallback === cb)\r\n    );\r\n    if (index !== -1) {\r\n      const entry = listeners[index];\r\n      listeners.splice(index, 1);\r\n      customHandlers.get(event)?.delete(entry.callback as EventCallback);\r\n      if (entry.originalCallback) {\r\n        customHandlers.get(event)?.delete(entry.originalCallback as EventCallback);\r\n      }\r\n\r\n      // Check for db:* events to disable realtime\r\n      const dbEvent = parseDbEvent(event);\r\n      if (dbEvent) {\r\n        handleRealtimeRemove(dbEvent.collection);\r\n      }\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Subscribe to an event once (auto-unsubscribes after first call)\r\n   */\r\n  once(\r\n    event: string,\r\n    selectorOrCallback: string | Document | EventCallback,\r\n    callback?: DOMEventCallback\r\n  ): void {\r\n    if (callback !== undefined) {\r\n      // DOM event\r\n      const selector = selectorOrCallback as string | Document;\r\n      const wrapper: DOMEventCallback = (e) => {\r\n        this.off(event, selector, wrapper);\r\n        callback(e);\r\n      };\r\n      const entry: ListenerEntry = {\r\n        type: 'dom',\r\n        event,\r\n        callback: wrapper,\r\n        selector,\r\n        originalCallback: callback\r\n      };\r\n      listeners.push(entry);\r\n      ensureDomDelegation(event);\r\n    } else {\r\n      // Custom event\r\n      const cb = selectorOrCallback as EventCallback;\r\n      const wrapper: EventCallback = (payload) => {\r\n        this.off(event, wrapper);\r\n        cb(payload);\r\n      };\r\n      const entry: ListenerEntry = {\r\n        type: 'custom',\r\n        event,\r\n        callback: wrapper,\r\n        originalCallback: cb\r\n      };\r\n      listeners.push(entry);\r\n\r\n      if (!customHandlers.has(event)) {\r\n        customHandlers.set(event, new Set());\r\n      }\r\n      customHandlers.get(event)!.add(wrapper);\r\n\r\n      const dbEvent = parseDbEvent(event);\r\n      if (dbEvent) {\r\n        handleRealtimeAdd(dbEvent.collection);\r\n      }\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Emit a custom event\r\n   */\r\n  emit<T = unknown>(event: string, payload?: T): void {\r\n    const handlers = customHandlers.get(event);\r\n    if (!handlers) return;\r\n\r\n    handlers.forEach(handler => {\r\n      try {\r\n        handler(payload);\r\n      } catch (e) {\r\n        console.error(`Error in event handler for \"${event}\":`, e);\r\n      }\r\n    });\r\n  },\r\n\r\n  /**\r\n   * Clear all handlers for an event, or all events if no name provided\r\n   */\r\n  clear(event?: string): void {\r\n    if (event) {\r\n      // Clear specific event\r\n      const toRemove = listeners.filter(l => l.event === event);\r\n      toRemove.forEach(entry => {\r\n        const index = listeners.indexOf(entry);\r\n        if (index !== -1) listeners.splice(index, 1);\r\n      });\r\n      customHandlers.delete(event);\r\n\r\n      if (toRemove.some(l => l.type === 'dom')) {\r\n        cleanupDomDelegation(event);\r\n      }\r\n\r\n      const dbEvent = parseDbEvent(event);\r\n      if (dbEvent && realtimeCollections.has(dbEvent.collection)) {\r\n        realtimeCollections.delete(dbEvent.collection);\r\n        dbModule?.disableRealtime(dbEvent.collection);\r\n      }\r\n    } else {\r\n      // Clear all\r\n      listeners.length = 0;\r\n      customHandlers.clear();\r\n\r\n      // Cleanup all DOM delegations\r\n      domDelegationHandlers.forEach((handler, eventType) => {\r\n        document.removeEventListener(eventType, handler, true);\r\n      });\r\n      domDelegationHandlers.clear();\r\n\r\n      // Disable all realtime\r\n      realtimeCollections.forEach((_, collection) => {\r\n        dbModule?.disableRealtime(collection);\r\n      });\r\n      realtimeCollections.clear();\r\n    }\r\n  },\r\n\r\n  /**\r\n   * List all active listeners (for debugging)\r\n   */\r\n  list(): { type: string; event: string; selector?: string }[] {\r\n    return listeners.map(l => ({\r\n      type: l.type,\r\n      event: l.event,\r\n      selector: l.selector === document ? 'document' : l.selector as string | undefined\r\n    }));\r\n  }\r\n};\r\n","import { events } from './events';\r\n\r\n// Types\r\nexport interface StateOptions {\r\n  persist?: 'session' | 'local';\r\n  ttl?: number; // Time to live in milliseconds\r\n}\r\n\r\ninterface StoredValue {\r\n  value: unknown;\r\n  expiry?: number;\r\n}\r\n\r\n// Constants\r\nconst STORAGE_PREFIX = 'cc:';\r\n\r\n// In-memory store for non-persisted values\r\nconst memoryStore = new Map<string, StoredValue>();\r\n\r\n/**\r\n * Get the appropriate storage backend\r\n */\r\nfunction getStorage(persist?: 'session' | 'local'): Storage | null {\r\n  if (typeof window === 'undefined') return null;\r\n\r\n  switch (persist) {\r\n    case 'session':\r\n      return sessionStorage;\r\n    case 'local':\r\n      return localStorage;\r\n    default:\r\n      return null;\r\n  }\r\n}\r\n\r\n/**\r\n * Check if a stored value has expired\r\n */\r\nfunction isExpired(stored: StoredValue): boolean {\r\n  return stored.expiry !== undefined && Date.now() > stored.expiry;\r\n}\r\n\r\n/**\r\n * Get a value from storage\r\n */\r\nfunction getFromStorage(key: string, storage: Storage): StoredValue | null {\r\n  try {\r\n    const raw = storage.getItem(`${STORAGE_PREFIX}${key}`);\r\n    if (!raw) return null;\r\n    return JSON.parse(raw) as StoredValue;\r\n  } catch {\r\n    return null;\r\n  }\r\n}\r\n\r\n/**\r\n * Save a value to storage\r\n */\r\nfunction saveToStorage(key: string, stored: StoredValue, storage: Storage): void {\r\n  try {\r\n    storage.setItem(`${STORAGE_PREFIX}${key}`, JSON.stringify(stored));\r\n  } catch (e) {\r\n    console.error(`Failed to save to storage: ${key}`, e);\r\n  }\r\n}\r\n\r\n/**\r\n * Remove a value from storage\r\n */\r\nfunction removeFromStorage(key: string, storage: Storage): void {\r\n  storage.removeItem(`${STORAGE_PREFIX}${key}`);\r\n}\r\n\r\nexport const state = {\r\n  /**\r\n   * Get a value from state\r\n   * Checks memory first, then session storage, then local storage\r\n   */\r\n  get<T = unknown>(key: string): T | undefined {\r\n    // Check memory first\r\n    const mem = memoryStore.get(key);\r\n    if (mem) {\r\n      if (isExpired(mem)) {\r\n        this.delete(key);\r\n        return undefined;\r\n      }\r\n      return mem.value as T;\r\n    }\r\n\r\n    // Check persistent stores\r\n    for (const persist of ['session', 'local'] as const) {\r\n      const storage = getStorage(persist);\r\n      if (!storage) continue;\r\n\r\n      const stored = getFromStorage(key, storage);\r\n      if (stored) {\r\n        if (isExpired(stored)) {\r\n          removeFromStorage(key, storage);\r\n          continue;\r\n        }\r\n        return stored.value as T;\r\n      }\r\n    }\r\n\r\n    return undefined;\r\n  },\r\n\r\n  /**\r\n   * Set a value in state\r\n   * Emits 'state:{key}' event with { value, oldValue }\r\n   */\r\n  set(key: string, value: unknown, options: StateOptions = {}): void {\r\n    const { persist, ttl } = options;\r\n    const oldValue = this.get(key);\r\n\r\n    const stored: StoredValue = {\r\n      value,\r\n      expiry: ttl ? Date.now() + ttl : undefined\r\n    };\r\n\r\n    const storage = getStorage(persist);\r\n    if (storage) {\r\n      saveToStorage(key, stored, storage);\r\n      // Also remove from memory if it was there\r\n      memoryStore.delete(key);\r\n    } else {\r\n      memoryStore.set(key, stored);\r\n    }\r\n\r\n    // Emit state change event\r\n    events.emit(`state:${key}`, { value, oldValue });\r\n  },\r\n\r\n  /**\r\n   * Check if a key exists in state\r\n   */\r\n  has(key: string): boolean {\r\n    return this.get(key) !== undefined;\r\n  },\r\n\r\n  /**\r\n   * Delete a key from state\r\n   * Emits 'state:{key}' event with { value: undefined, oldValue }\r\n   */\r\n  delete(key: string): void {\r\n    const oldValue = this.get(key);\r\n    if (oldValue === undefined) return;\r\n\r\n    // Remove from memory\r\n    memoryStore.delete(key);\r\n\r\n    // Remove from all persistent stores\r\n    for (const persist of ['session', 'local'] as const) {\r\n      const storage = getStorage(persist);\r\n      if (storage) {\r\n        removeFromStorage(key, storage);\r\n      }\r\n    }\r\n\r\n    // Emit state change event\r\n    events.emit(`state:${key}`, { value: undefined, oldValue });\r\n  },\r\n\r\n  /**\r\n   * Clear all state\r\n   * Does NOT emit events for each key\r\n   */\r\n  clear(): void {\r\n    // Clear memory\r\n    memoryStore.clear();\r\n\r\n    // Clear persistent storage with our prefix\r\n    for (const persist of ['session', 'local'] as const) {\r\n      const storage = getStorage(persist);\r\n      if (!storage) continue;\r\n\r\n      const keysToRemove: string[] = [];\r\n      for (let i = 0; i < storage.length; i++) {\r\n        const key = storage.key(i);\r\n        if (key?.startsWith(STORAGE_PREFIX)) {\r\n          keysToRemove.push(key);\r\n        }\r\n      }\r\n      keysToRemove.forEach(k => storage.removeItem(k));\r\n    }\r\n  }\r\n};\r\n","class ClientResponseError extends Error{constructor(e){super(\"ClientResponseError\"),this.url=\"\",this.status=0,this.response={},this.isAbort=!1,this.originalError=null,Object.setPrototypeOf(this,ClientResponseError.prototype),null!==e&&\"object\"==typeof e&&(this.url=\"string\"==typeof e.url?e.url:\"\",this.status=\"number\"==typeof e.status?e.status:0,this.isAbort=!!e.isAbort,this.originalError=e.originalError,null!==e.response&&\"object\"==typeof e.response?this.response=e.response:null!==e.data&&\"object\"==typeof e.data?this.response=e.data:this.response={}),this.originalError||e instanceof ClientResponseError||(this.originalError=e),\"undefined\"!=typeof DOMException&&e instanceof DOMException&&(\"AbortError\"==e.name||20==e.code)&&(this.isAbort=!0),this.name=\"ClientResponseError \"+this.status,this.message=this.response?.message,this.message||(this.isAbort?this.message=\"The request was autocancelled. You can find more info in https://github.com/pocketbase/js-sdk#auto-cancellation.\":this.originalError?.cause?.message?.includes(\"ECONNREFUSED ::1\")?this.message=\"Failed to connect to the PocketBase server. Try changing the SDK URL from localhost to 127.0.0.1 (https://github.com/pocketbase/js-sdk/issues/21).\":this.message=\"Something went wrong.\"),this.cause=this.originalError}get data(){return this.response}toJSON(){return{...this}}}const e=/^[\\u0009\\u0020-\\u007e\\u0080-\\u00ff]+$/;function cookieParse(e,t){const s={};if(\"string\"!=typeof e)return s;const i=Object.assign({},t||{}).decode||defaultDecode;let n=0;for(;n<e.length;){const t=e.indexOf(\"=\",n);if(-1===t)break;let r=e.indexOf(\";\",n);if(-1===r)r=e.length;else if(r<t){n=e.lastIndexOf(\";\",t-1)+1;continue}const o=e.slice(n,t).trim();if(void 0===s[o]){let n=e.slice(t+1,r).trim();34===n.charCodeAt(0)&&(n=n.slice(1,-1));try{s[o]=i(n)}catch(e){s[o]=n}}n=r+1}return s}function cookieSerialize(t,s,i){const n=Object.assign({},i||{}),r=n.encode||defaultEncode;if(!e.test(t))throw new TypeError(\"argument name is invalid\");const o=r(s);if(o&&!e.test(o))throw new TypeError(\"argument val is invalid\");let a=t+\"=\"+o;if(null!=n.maxAge){const e=n.maxAge-0;if(isNaN(e)||!isFinite(e))throw new TypeError(\"option maxAge is invalid\");a+=\"; Max-Age=\"+Math.floor(e)}if(n.domain){if(!e.test(n.domain))throw new TypeError(\"option domain is invalid\");a+=\"; Domain=\"+n.domain}if(n.path){if(!e.test(n.path))throw new TypeError(\"option path is invalid\");a+=\"; Path=\"+n.path}if(n.expires){if(!function isDate(e){return\"[object Date]\"===Object.prototype.toString.call(e)||e instanceof Date}(n.expires)||isNaN(n.expires.valueOf()))throw new TypeError(\"option expires is invalid\");a+=\"; Expires=\"+n.expires.toUTCString()}if(n.httpOnly&&(a+=\"; HttpOnly\"),n.secure&&(a+=\"; Secure\"),n.priority){switch(\"string\"==typeof n.priority?n.priority.toLowerCase():n.priority){case\"low\":a+=\"; Priority=Low\";break;case\"medium\":a+=\"; Priority=Medium\";break;case\"high\":a+=\"; Priority=High\";break;default:throw new TypeError(\"option priority is invalid\")}}if(n.sameSite){switch(\"string\"==typeof n.sameSite?n.sameSite.toLowerCase():n.sameSite){case!0:a+=\"; SameSite=Strict\";break;case\"lax\":a+=\"; SameSite=Lax\";break;case\"strict\":a+=\"; SameSite=Strict\";break;case\"none\":a+=\"; SameSite=None\";break;default:throw new TypeError(\"option sameSite is invalid\")}}return a}function defaultDecode(e){return-1!==e.indexOf(\"%\")?decodeURIComponent(e):e}function defaultEncode(e){return encodeURIComponent(e)}const t=\"undefined\"!=typeof navigator&&\"ReactNative\"===navigator.product||\"undefined\"!=typeof global&&global.HermesInternal;let s;function getTokenPayload(e){if(e)try{const t=decodeURIComponent(s(e.split(\".\")[1]).split(\"\").map((function(e){return\"%\"+(\"00\"+e.charCodeAt(0).toString(16)).slice(-2)})).join(\"\"));return JSON.parse(t)||{}}catch(e){}return{}}function isTokenExpired(e,t=0){let s=getTokenPayload(e);return!(Object.keys(s).length>0&&(!s.exp||s.exp-t>Date.now()/1e3))}s=\"function\"!=typeof atob||t?e=>{let t=String(e).replace(/=+$/,\"\");if(t.length%4==1)throw new Error(\"'atob' failed: The string to be decoded is not correctly encoded.\");for(var s,i,n=0,r=0,o=\"\";i=t.charAt(r++);~i&&(s=n%4?64*s+i:i,n++%4)?o+=String.fromCharCode(255&s>>(-2*n&6)):0)i=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\".indexOf(i);return o}:atob;const i=\"pb_auth\";class BaseAuthStore{constructor(){this.baseToken=\"\",this.baseModel=null,this._onChangeCallbacks=[]}get token(){return this.baseToken}get record(){return this.baseModel}get model(){return this.baseModel}get isValid(){return!isTokenExpired(this.token)}get isSuperuser(){let e=getTokenPayload(this.token);return\"auth\"==e.type&&(\"_superusers\"==this.record?.collectionName||!this.record?.collectionName&&\"pbc_3142635823\"==e.collectionId)}get isAdmin(){return console.warn(\"Please replace pb.authStore.isAdmin with pb.authStore.isSuperuser OR simply check the value of pb.authStore.record?.collectionName\"),this.isSuperuser}get isAuthRecord(){return console.warn(\"Please replace pb.authStore.isAuthRecord with !pb.authStore.isSuperuser OR simply check the value of pb.authStore.record?.collectionName\"),\"auth\"==getTokenPayload(this.token).type&&!this.isSuperuser}save(e,t){this.baseToken=e||\"\",this.baseModel=t||null,this.triggerChange()}clear(){this.baseToken=\"\",this.baseModel=null,this.triggerChange()}loadFromCookie(e,t=i){const s=cookieParse(e||\"\")[t]||\"\";let n={};try{n=JSON.parse(s),(null===typeof n||\"object\"!=typeof n||Array.isArray(n))&&(n={})}catch(e){}this.save(n.token||\"\",n.record||n.model||null)}exportToCookie(e,t=i){const s={secure:!0,sameSite:!0,httpOnly:!0,path:\"/\"},n=getTokenPayload(this.token);s.expires=n?.exp?new Date(1e3*n.exp):new Date(\"1970-01-01\"),e=Object.assign({},s,e);const r={token:this.token,record:this.record?JSON.parse(JSON.stringify(this.record)):null};let o=cookieSerialize(t,JSON.stringify(r),e);const a=\"undefined\"!=typeof Blob?new Blob([o]).size:o.length;if(r.record&&a>4096){r.record={id:r.record?.id,email:r.record?.email};const s=[\"collectionId\",\"collectionName\",\"verified\"];for(const e in this.record)s.includes(e)&&(r.record[e]=this.record[e]);o=cookieSerialize(t,JSON.stringify(r),e)}return o}onChange(e,t=!1){return this._onChangeCallbacks.push(e),t&&e(this.token,this.record),()=>{for(let t=this._onChangeCallbacks.length-1;t>=0;t--)if(this._onChangeCallbacks[t]==e)return delete this._onChangeCallbacks[t],void this._onChangeCallbacks.splice(t,1)}}triggerChange(){for(const e of this._onChangeCallbacks)e&&e(this.token,this.record)}}class LocalAuthStore extends BaseAuthStore{constructor(e=\"pocketbase_auth\"){super(),this.storageFallback={},this.storageKey=e,this._bindStorageEvent()}get token(){return(this._storageGet(this.storageKey)||{}).token||\"\"}get record(){const e=this._storageGet(this.storageKey)||{};return e.record||e.model||null}get model(){return this.record}save(e,t){this._storageSet(this.storageKey,{token:e,record:t}),super.save(e,t)}clear(){this._storageRemove(this.storageKey),super.clear()}_storageGet(e){if(\"undefined\"!=typeof window&&window?.localStorage){const t=window.localStorage.getItem(e)||\"\";try{return JSON.parse(t)}catch(e){return t}}return this.storageFallback[e]}_storageSet(e,t){if(\"undefined\"!=typeof window&&window?.localStorage){let s=t;\"string\"!=typeof t&&(s=JSON.stringify(t)),window.localStorage.setItem(e,s)}else this.storageFallback[e]=t}_storageRemove(e){\"undefined\"!=typeof window&&window?.localStorage&&window.localStorage?.removeItem(e),delete this.storageFallback[e]}_bindStorageEvent(){\"undefined\"!=typeof window&&window?.localStorage&&window.addEventListener&&window.addEventListener(\"storage\",(e=>{if(e.key!=this.storageKey)return;const t=this._storageGet(this.storageKey)||{};super.save(t.token||\"\",t.record||t.model||null)}))}}class BaseService{constructor(e){this.client=e}}class SettingsService extends BaseService{async getAll(e){return e=Object.assign({method:\"GET\"},e),this.client.send(\"/api/settings\",e)}async update(e,t){return t=Object.assign({method:\"PATCH\",body:e},t),this.client.send(\"/api/settings\",t)}async testS3(e=\"storage\",t){return t=Object.assign({method:\"POST\",body:{filesystem:e}},t),this.client.send(\"/api/settings/test/s3\",t).then((()=>!0))}async testEmail(e,t,s,i){return i=Object.assign({method:\"POST\",body:{email:t,template:s,collection:e}},i),this.client.send(\"/api/settings/test/email\",i).then((()=>!0))}async generateAppleClientSecret(e,t,s,i,n,r){return r=Object.assign({method:\"POST\",body:{clientId:e,teamId:t,keyId:s,privateKey:i,duration:n}},r),this.client.send(\"/api/settings/apple/generate-client-secret\",r)}}const n=[\"requestKey\",\"$cancelKey\",\"$autoCancel\",\"fetch\",\"headers\",\"body\",\"query\",\"params\",\"cache\",\"credentials\",\"headers\",\"integrity\",\"keepalive\",\"method\",\"mode\",\"redirect\",\"referrer\",\"referrerPolicy\",\"signal\",\"window\"];function normalizeUnknownQueryParams(e){if(e){e.query=e.query||{};for(let t in e)n.includes(t)||(e.query[t]=e[t],delete e[t])}}function serializeQueryParams(e){const t=[];for(const s in e){const i=encodeURIComponent(s),n=Array.isArray(e[s])?e[s]:[e[s]];for(let e of n)e=prepareQueryParamValue(e),null!==e&&t.push(i+\"=\"+e)}return t.join(\"&\")}function prepareQueryParamValue(e){return null==e?null:e instanceof Date?encodeURIComponent(e.toISOString().replace(\"T\",\" \")):\"object\"==typeof e?encodeURIComponent(JSON.stringify(e)):encodeURIComponent(e)}class RealtimeService extends BaseService{constructor(){super(...arguments),this.clientId=\"\",this.eventSource=null,this.subscriptions={},this.lastSentSubscriptions=[],this.maxConnectTimeout=15e3,this.reconnectAttempts=0,this.maxReconnectAttempts=1/0,this.predefinedReconnectIntervals=[200,300,500,1e3,1200,1500,2e3],this.pendingConnects=[]}get isConnected(){return!!this.eventSource&&!!this.clientId&&!this.pendingConnects.length}async subscribe(e,t,s){if(!e)throw new Error(\"topic must be set.\");let i=e;if(s){normalizeUnknownQueryParams(s=Object.assign({},s));const e=\"options=\"+encodeURIComponent(JSON.stringify({query:s.query,headers:s.headers}));i+=(i.includes(\"?\")?\"&\":\"?\")+e}const listener=function(e){const s=e;let i;try{i=JSON.parse(s?.data)}catch{}t(i||{})};return this.subscriptions[i]||(this.subscriptions[i]=[]),this.subscriptions[i].push(listener),this.isConnected?1===this.subscriptions[i].length?await this.submitSubscriptions():this.eventSource?.addEventListener(i,listener):await this.connect(),async()=>this.unsubscribeByTopicAndListener(e,listener)}async unsubscribe(e){let t=!1;if(e){const s=this.getSubscriptionsByTopic(e);for(let e in s)if(this.hasSubscriptionListeners(e)){for(let t of this.subscriptions[e])this.eventSource?.removeEventListener(e,t);delete this.subscriptions[e],t||(t=!0)}}else this.subscriptions={};this.hasSubscriptionListeners()?t&&await this.submitSubscriptions():this.disconnect()}async unsubscribeByPrefix(e){let t=!1;for(let s in this.subscriptions)if((s+\"?\").startsWith(e)){t=!0;for(let e of this.subscriptions[s])this.eventSource?.removeEventListener(s,e);delete this.subscriptions[s]}t&&(this.hasSubscriptionListeners()?await this.submitSubscriptions():this.disconnect())}async unsubscribeByTopicAndListener(e,t){let s=!1;const i=this.getSubscriptionsByTopic(e);for(let e in i){if(!Array.isArray(this.subscriptions[e])||!this.subscriptions[e].length)continue;let i=!1;for(let s=this.subscriptions[e].length-1;s>=0;s--)this.subscriptions[e][s]===t&&(i=!0,delete this.subscriptions[e][s],this.subscriptions[e].splice(s,1),this.eventSource?.removeEventListener(e,t));i&&(this.subscriptions[e].length||delete this.subscriptions[e],s||this.hasSubscriptionListeners(e)||(s=!0))}this.hasSubscriptionListeners()?s&&await this.submitSubscriptions():this.disconnect()}hasSubscriptionListeners(e){if(this.subscriptions=this.subscriptions||{},e)return!!this.subscriptions[e]?.length;for(let e in this.subscriptions)if(this.subscriptions[e]?.length)return!0;return!1}async submitSubscriptions(){if(this.clientId)return this.addAllSubscriptionListeners(),this.lastSentSubscriptions=this.getNonEmptySubscriptionKeys(),this.client.send(\"/api/realtime\",{method:\"POST\",body:{clientId:this.clientId,subscriptions:this.lastSentSubscriptions},requestKey:this.getSubscriptionsCancelKey()}).catch((e=>{if(!e?.isAbort)throw e}))}getSubscriptionsCancelKey(){return\"realtime_\"+this.clientId}getSubscriptionsByTopic(e){const t={};e=e.includes(\"?\")?e:e+\"?\";for(let s in this.subscriptions)(s+\"?\").startsWith(e)&&(t[s]=this.subscriptions[s]);return t}getNonEmptySubscriptionKeys(){const e=[];for(let t in this.subscriptions)this.subscriptions[t].length&&e.push(t);return e}addAllSubscriptionListeners(){if(this.eventSource){this.removeAllSubscriptionListeners();for(let e in this.subscriptions)for(let t of this.subscriptions[e])this.eventSource.addEventListener(e,t)}}removeAllSubscriptionListeners(){if(this.eventSource)for(let e in this.subscriptions)for(let t of this.subscriptions[e])this.eventSource.removeEventListener(e,t)}async connect(){if(!(this.reconnectAttempts>0))return new Promise(((e,t)=>{this.pendingConnects.push({resolve:e,reject:t}),this.pendingConnects.length>1||this.initConnect()}))}initConnect(){this.disconnect(!0),clearTimeout(this.connectTimeoutId),this.connectTimeoutId=setTimeout((()=>{this.connectErrorHandler(new Error(\"EventSource connect took too long.\"))}),this.maxConnectTimeout),this.eventSource=new EventSource(this.client.buildURL(\"/api/realtime\")),this.eventSource.onerror=e=>{this.connectErrorHandler(new Error(\"Failed to establish realtime connection.\"))},this.eventSource.addEventListener(\"PB_CONNECT\",(e=>{const t=e;this.clientId=t?.lastEventId,this.submitSubscriptions().then((async()=>{let e=3;for(;this.hasUnsentSubscriptions()&&e>0;)e--,await this.submitSubscriptions()})).then((()=>{for(let e of this.pendingConnects)e.resolve();this.pendingConnects=[],this.reconnectAttempts=0,clearTimeout(this.reconnectTimeoutId),clearTimeout(this.connectTimeoutId);const t=this.getSubscriptionsByTopic(\"PB_CONNECT\");for(let s in t)for(let i of t[s])i(e)})).catch((e=>{this.clientId=\"\",this.connectErrorHandler(e)}))}))}hasUnsentSubscriptions(){const e=this.getNonEmptySubscriptionKeys();if(e.length!=this.lastSentSubscriptions.length)return!0;for(const t of e)if(!this.lastSentSubscriptions.includes(t))return!0;return!1}connectErrorHandler(e){if(clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),!this.clientId&&!this.reconnectAttempts||this.reconnectAttempts>this.maxReconnectAttempts){for(let t of this.pendingConnects)t.reject(new ClientResponseError(e));return this.pendingConnects=[],void this.disconnect()}this.disconnect(!0);const t=this.predefinedReconnectIntervals[this.reconnectAttempts]||this.predefinedReconnectIntervals[this.predefinedReconnectIntervals.length-1];this.reconnectAttempts++,this.reconnectTimeoutId=setTimeout((()=>{this.initConnect()}),t)}disconnect(e=!1){if(this.clientId&&this.onDisconnect&&this.onDisconnect(Object.keys(this.subscriptions)),clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),this.removeAllSubscriptionListeners(),this.client.cancelRequest(this.getSubscriptionsCancelKey()),this.eventSource?.close(),this.eventSource=null,this.clientId=\"\",!e){this.reconnectAttempts=0;for(let e of this.pendingConnects)e.resolve();this.pendingConnects=[]}}}class CrudService extends BaseService{decode(e){return e}async getFullList(e,t){if(\"number\"==typeof e)return this._getFullList(e,t);let s=500;return(t=Object.assign({},e,t)).batch&&(s=t.batch,delete t.batch),this._getFullList(s,t)}async getList(e=1,t=30,s){return(s=Object.assign({method:\"GET\"},s)).query=Object.assign({page:e,perPage:t},s.query),this.client.send(this.baseCrudPath,s).then((e=>(e.items=e.items?.map((e=>this.decode(e)))||[],e)))}async getFirstListItem(e,t){return(t=Object.assign({requestKey:\"one_by_filter_\"+this.baseCrudPath+\"_\"+e},t)).query=Object.assign({filter:e,skipTotal:1},t.query),this.getList(1,1,t).then((e=>{if(!e?.items?.length)throw new ClientResponseError({status:404,response:{code:404,message:\"The requested resource wasn't found.\",data:{}}});return e.items[0]}))}async getOne(e,t){if(!e)throw new ClientResponseError({url:this.client.buildURL(this.baseCrudPath+\"/\"),status:404,response:{code:404,message:\"Missing required record id.\",data:{}}});return t=Object.assign({method:\"GET\"},t),this.client.send(this.baseCrudPath+\"/\"+encodeURIComponent(e),t).then((e=>this.decode(e)))}async create(e,t){return t=Object.assign({method:\"POST\",body:e},t),this.client.send(this.baseCrudPath,t).then((e=>this.decode(e)))}async update(e,t,s){return s=Object.assign({method:\"PATCH\",body:t},s),this.client.send(this.baseCrudPath+\"/\"+encodeURIComponent(e),s).then((e=>this.decode(e)))}async delete(e,t){return t=Object.assign({method:\"DELETE\"},t),this.client.send(this.baseCrudPath+\"/\"+encodeURIComponent(e),t).then((()=>!0))}_getFullList(e=500,t){(t=t||{}).query=Object.assign({skipTotal:1},t.query);let s=[],request=async i=>this.getList(i,e||500,t).then((e=>{const t=e.items;return s=s.concat(t),t.length==e.perPage?request(i+1):s}));return request(1)}}function normalizeLegacyOptionsArgs(e,t,s,i){const n=void 0!==i;return n||void 0!==s?n?(console.warn(e),t.body=Object.assign({},t.body,s),t.query=Object.assign({},t.query,i),t):Object.assign(t,s):t}function resetAutoRefresh(e){e._resetAutoRefresh?.()}class RecordService extends CrudService{constructor(e,t){super(e),this.collectionIdOrName=t}get baseCrudPath(){return this.baseCollectionPath+\"/records\"}get baseCollectionPath(){return\"/api/collections/\"+encodeURIComponent(this.collectionIdOrName)}get isSuperusers(){return\"_superusers\"==this.collectionIdOrName||\"_pbc_2773867675\"==this.collectionIdOrName}async subscribe(e,t,s){if(!e)throw new Error(\"Missing topic.\");if(!t)throw new Error(\"Missing subscription callback.\");return this.client.realtime.subscribe(this.collectionIdOrName+\"/\"+e,t,s)}async unsubscribe(e){return e?this.client.realtime.unsubscribe(this.collectionIdOrName+\"/\"+e):this.client.realtime.unsubscribeByPrefix(this.collectionIdOrName)}async getFullList(e,t){if(\"number\"==typeof e)return super.getFullList(e,t);const s=Object.assign({},e,t);return super.getFullList(s)}async getList(e=1,t=30,s){return super.getList(e,t,s)}async getFirstListItem(e,t){return super.getFirstListItem(e,t)}async getOne(e,t){return super.getOne(e,t)}async create(e,t){return super.create(e,t)}async update(e,t,s){return super.update(e,t,s).then((e=>{if(this.client.authStore.record?.id===e?.id&&(this.client.authStore.record?.collectionId===this.collectionIdOrName||this.client.authStore.record?.collectionName===this.collectionIdOrName)){let t=Object.assign({},this.client.authStore.record.expand),s=Object.assign({},this.client.authStore.record,e);t&&(s.expand=Object.assign(t,e.expand)),this.client.authStore.save(this.client.authStore.token,s)}return e}))}async delete(e,t){return super.delete(e,t).then((t=>(!t||this.client.authStore.record?.id!==e||this.client.authStore.record?.collectionId!==this.collectionIdOrName&&this.client.authStore.record?.collectionName!==this.collectionIdOrName||this.client.authStore.clear(),t)))}authResponse(e){const t=this.decode(e?.record||{});return this.client.authStore.save(e?.token,t),Object.assign({},e,{token:e?.token||\"\",record:t})}async listAuthMethods(e){return e=Object.assign({method:\"GET\",fields:\"mfa,otp,password,oauth2\"},e),this.client.send(this.baseCollectionPath+\"/auth-methods\",e)}async authWithPassword(e,t,s){let i;s=Object.assign({method:\"POST\",body:{identity:e,password:t}},s),this.isSuperusers&&(i=s.autoRefreshThreshold,delete s.autoRefreshThreshold,s.autoRefresh||resetAutoRefresh(this.client));let n=await this.client.send(this.baseCollectionPath+\"/auth-with-password\",s);return n=this.authResponse(n),i&&this.isSuperusers&&function registerAutoRefresh(e,t,s,i){resetAutoRefresh(e);const n=e.beforeSend,r=e.authStore.record,o=e.authStore.onChange(((t,s)=>{(!t||s?.id!=r?.id||(s?.collectionId||r?.collectionId)&&s?.collectionId!=r?.collectionId)&&resetAutoRefresh(e)}));e._resetAutoRefresh=function(){o(),e.beforeSend=n,delete e._resetAutoRefresh},e.beforeSend=async(r,o)=>{const a=e.authStore.token;if(o.query?.autoRefresh)return n?n(r,o):{url:r,sendOptions:o};let c=e.authStore.isValid;if(c&&isTokenExpired(e.authStore.token,t))try{await s()}catch(e){c=!1}c||await i();const l=o.headers||{};for(let t in l)if(\"authorization\"==t.toLowerCase()&&a==l[t]&&e.authStore.token){l[t]=e.authStore.token;break}return o.headers=l,n?n(r,o):{url:r,sendOptions:o}}}(this.client,i,(()=>this.authRefresh({autoRefresh:!0})),(()=>this.authWithPassword(e,t,Object.assign({autoRefresh:!0},s)))),n}async authWithOAuth2Code(e,t,s,i,n,r,o){let a={method:\"POST\",body:{provider:e,code:t,codeVerifier:s,redirectURL:i,createData:n}};return a=normalizeLegacyOptionsArgs(\"This form of authWithOAuth2Code(provider, code, codeVerifier, redirectURL, createData?, body?, query?) is deprecated. Consider replacing it with authWithOAuth2Code(provider, code, codeVerifier, redirectURL, createData?, options?).\",a,r,o),this.client.send(this.baseCollectionPath+\"/auth-with-oauth2\",a).then((e=>this.authResponse(e)))}authWithOAuth2(...e){if(e.length>1||\"string\"==typeof e?.[0])return console.warn(\"PocketBase: This form of authWithOAuth2() is deprecated and may get removed in the future. Please replace with authWithOAuth2Code() OR use the authWithOAuth2() realtime form as shown in https://pocketbase.io/docs/authentication/#oauth2-integration.\"),this.authWithOAuth2Code(e?.[0]||\"\",e?.[1]||\"\",e?.[2]||\"\",e?.[3]||\"\",e?.[4]||{},e?.[5]||{},e?.[6]||{});const t=e?.[0]||{};let s=null;t.urlCallback||(s=openBrowserPopup(void 0));const i=new RealtimeService(this.client);function cleanup(){s?.close(),i.unsubscribe()}const n={},r=t.requestKey;return r&&(n.requestKey=r),this.listAuthMethods(n).then((e=>{const n=e.oauth2.providers.find((e=>e.name===t.provider));if(!n)throw new ClientResponseError(new Error(`Missing or invalid provider \"${t.provider}\".`));const o=this.client.buildURL(\"/api/oauth2-redirect\"),a=r?this.client.cancelControllers?.[r]:void 0;return a&&(a.signal.onabort=()=>{cleanup()}),new Promise((async(e,r)=>{try{await i.subscribe(\"@oauth2\",(async s=>{const c=i.clientId;try{if(!s.state||c!==s.state)throw new Error(\"State parameters don't match.\");if(s.error||!s.code)throw new Error(\"OAuth2 redirect error or missing code: \"+s.error);const i=Object.assign({},t);delete i.provider,delete i.scopes,delete i.createData,delete i.urlCallback,a?.signal?.onabort&&(a.signal.onabort=null);const r=await this.authWithOAuth2Code(n.name,s.code,n.codeVerifier,o,t.createData,i);e(r)}catch(e){r(new ClientResponseError(e))}cleanup()}));const c={state:i.clientId};t.scopes?.length&&(c.scope=t.scopes.join(\" \"));const l=this._replaceQueryParams(n.authURL+o,c);let h=t.urlCallback||function(e){s?s.location.href=e:s=openBrowserPopup(e)};await h(l)}catch(e){cleanup(),r(new ClientResponseError(e))}}))})).catch((e=>{throw cleanup(),e}))}async authRefresh(e,t){let s={method:\"POST\"};return s=normalizeLegacyOptionsArgs(\"This form of authRefresh(body?, query?) is deprecated. Consider replacing it with authRefresh(options?).\",s,e,t),this.client.send(this.baseCollectionPath+\"/auth-refresh\",s).then((e=>this.authResponse(e)))}async requestPasswordReset(e,t,s){let i={method:\"POST\",body:{email:e}};return i=normalizeLegacyOptionsArgs(\"This form of requestPasswordReset(email, body?, query?) is deprecated. Consider replacing it with requestPasswordReset(email, options?).\",i,t,s),this.client.send(this.baseCollectionPath+\"/request-password-reset\",i).then((()=>!0))}async confirmPasswordReset(e,t,s,i,n){let r={method:\"POST\",body:{token:e,password:t,passwordConfirm:s}};return r=normalizeLegacyOptionsArgs(\"This form of confirmPasswordReset(token, password, passwordConfirm, body?, query?) is deprecated. Consider replacing it with confirmPasswordReset(token, password, passwordConfirm, options?).\",r,i,n),this.client.send(this.baseCollectionPath+\"/confirm-password-reset\",r).then((()=>!0))}async requestVerification(e,t,s){let i={method:\"POST\",body:{email:e}};return i=normalizeLegacyOptionsArgs(\"This form of requestVerification(email, body?, query?) is deprecated. Consider replacing it with requestVerification(email, options?).\",i,t,s),this.client.send(this.baseCollectionPath+\"/request-verification\",i).then((()=>!0))}async confirmVerification(e,t,s){let i={method:\"POST\",body:{token:e}};return i=normalizeLegacyOptionsArgs(\"This form of confirmVerification(token, body?, query?) is deprecated. Consider replacing it with confirmVerification(token, options?).\",i,t,s),this.client.send(this.baseCollectionPath+\"/confirm-verification\",i).then((()=>{const t=getTokenPayload(e),s=this.client.authStore.record;return s&&!s.verified&&s.id===t.id&&s.collectionId===t.collectionId&&(s.verified=!0,this.client.authStore.save(this.client.authStore.token,s)),!0}))}async requestEmailChange(e,t,s){let i={method:\"POST\",body:{newEmail:e}};return i=normalizeLegacyOptionsArgs(\"This form of requestEmailChange(newEmail, body?, query?) is deprecated. Consider replacing it with requestEmailChange(newEmail, options?).\",i,t,s),this.client.send(this.baseCollectionPath+\"/request-email-change\",i).then((()=>!0))}async confirmEmailChange(e,t,s,i){let n={method:\"POST\",body:{token:e,password:t}};return n=normalizeLegacyOptionsArgs(\"This form of confirmEmailChange(token, password, body?, query?) is deprecated. Consider replacing it with confirmEmailChange(token, password, options?).\",n,s,i),this.client.send(this.baseCollectionPath+\"/confirm-email-change\",n).then((()=>{const t=getTokenPayload(e),s=this.client.authStore.record;return s&&s.id===t.id&&s.collectionId===t.collectionId&&this.client.authStore.clear(),!0}))}async listExternalAuths(e,t){return this.client.collection(\"_externalAuths\").getFullList(Object.assign({},t,{filter:this.client.filter(\"recordRef = {:id}\",{id:e})}))}async unlinkExternalAuth(e,t,s){const i=await this.client.collection(\"_externalAuths\").getFirstListItem(this.client.filter(\"recordRef = {:recordId} && provider = {:provider}\",{recordId:e,provider:t}));return this.client.collection(\"_externalAuths\").delete(i.id,s).then((()=>!0))}async requestOTP(e,t){return t=Object.assign({method:\"POST\",body:{email:e}},t),this.client.send(this.baseCollectionPath+\"/request-otp\",t)}async authWithOTP(e,t,s){return s=Object.assign({method:\"POST\",body:{otpId:e,password:t}},s),this.client.send(this.baseCollectionPath+\"/auth-with-otp\",s).then((e=>this.authResponse(e)))}async impersonate(e,t,s){(s=Object.assign({method:\"POST\",body:{duration:t}},s)).headers=s.headers||{},s.headers.Authorization||(s.headers.Authorization=this.client.authStore.token);const i=new Client(this.client.baseURL,new BaseAuthStore,this.client.lang),n=await i.send(this.baseCollectionPath+\"/impersonate/\"+encodeURIComponent(e),s);return i.authStore.save(n?.token,this.decode(n?.record||{})),i}_replaceQueryParams(e,t={}){let s=e,i=\"\";e.indexOf(\"?\")>=0&&(s=e.substring(0,e.indexOf(\"?\")),i=e.substring(e.indexOf(\"?\")+1));const n={},r=i.split(\"&\");for(const e of r){if(\"\"==e)continue;const t=e.split(\"=\");n[decodeURIComponent(t[0].replace(/\\+/g,\" \"))]=decodeURIComponent((t[1]||\"\").replace(/\\+/g,\" \"))}for(let e in t)t.hasOwnProperty(e)&&(null==t[e]?delete n[e]:n[e]=t[e]);i=\"\";for(let e in n)n.hasOwnProperty(e)&&(\"\"!=i&&(i+=\"&\"),i+=encodeURIComponent(e.replace(/%20/g,\"+\"))+\"=\"+encodeURIComponent(n[e].replace(/%20/g,\"+\")));return\"\"!=i?s+\"?\"+i:s}}function openBrowserPopup(e){if(\"undefined\"==typeof window||!window?.open)throw new ClientResponseError(new Error(\"Not in a browser context - please pass a custom urlCallback function.\"));let t=1024,s=768,i=window.innerWidth,n=window.innerHeight;t=t>i?i:t,s=s>n?n:s;let r=i/2-t/2,o=n/2-s/2;return window.open(e,\"popup_window\",\"width=\"+t+\",height=\"+s+\",top=\"+o+\",left=\"+r+\",resizable,menubar=no\")}class CollectionService extends CrudService{get baseCrudPath(){return\"/api/collections\"}async import(e,t=!1,s){return s=Object.assign({method:\"PUT\",body:{collections:e,deleteMissing:t}},s),this.client.send(this.baseCrudPath+\"/import\",s).then((()=>!0))}async getScaffolds(e){return e=Object.assign({method:\"GET\"},e),this.client.send(this.baseCrudPath+\"/meta/scaffolds\",e)}async truncate(e,t){return t=Object.assign({method:\"DELETE\"},t),this.client.send(this.baseCrudPath+\"/\"+encodeURIComponent(e)+\"/truncate\",t).then((()=>!0))}}class LogService extends BaseService{async getList(e=1,t=30,s){return(s=Object.assign({method:\"GET\"},s)).query=Object.assign({page:e,perPage:t},s.query),this.client.send(\"/api/logs\",s)}async getOne(e,t){if(!e)throw new ClientResponseError({url:this.client.buildURL(\"/api/logs/\"),status:404,response:{code:404,message:\"Missing required log id.\",data:{}}});return t=Object.assign({method:\"GET\"},t),this.client.send(\"/api/logs/\"+encodeURIComponent(e),t)}async getStats(e){return e=Object.assign({method:\"GET\"},e),this.client.send(\"/api/logs/stats\",e)}}class HealthService extends BaseService{async check(e){return e=Object.assign({method:\"GET\"},e),this.client.send(\"/api/health\",e)}}class FileService extends BaseService{getUrl(e,t,s={}){return console.warn(\"Please replace pb.files.getUrl() with pb.files.getURL()\"),this.getURL(e,t,s)}getURL(e,t,s={}){if(!t||!e?.id||!e?.collectionId&&!e?.collectionName)return\"\";const i=[];i.push(\"api\"),i.push(\"files\"),i.push(encodeURIComponent(e.collectionId||e.collectionName)),i.push(encodeURIComponent(e.id)),i.push(encodeURIComponent(t));let n=this.client.buildURL(i.join(\"/\"));if(Object.keys(s).length){!1===s.download&&delete s.download;const e=new URLSearchParams(s);n+=(n.includes(\"?\")?\"&\":\"?\")+e}return n}async getToken(e){return e=Object.assign({method:\"POST\"},e),this.client.send(\"/api/files/token\",e).then((e=>e?.token||\"\"))}}class BackupService extends BaseService{async getFullList(e){return e=Object.assign({method:\"GET\"},e),this.client.send(\"/api/backups\",e)}async create(e,t){return t=Object.assign({method:\"POST\",body:{name:e}},t),this.client.send(\"/api/backups\",t).then((()=>!0))}async upload(e,t){return t=Object.assign({method:\"POST\",body:e},t),this.client.send(\"/api/backups/upload\",t).then((()=>!0))}async delete(e,t){return t=Object.assign({method:\"DELETE\"},t),this.client.send(`/api/backups/${encodeURIComponent(e)}`,t).then((()=>!0))}async restore(e,t){return t=Object.assign({method:\"POST\"},t),this.client.send(`/api/backups/${encodeURIComponent(e)}/restore`,t).then((()=>!0))}getDownloadUrl(e,t){return console.warn(\"Please replace pb.backups.getDownloadUrl() with pb.backups.getDownloadURL()\"),this.getDownloadURL(e,t)}getDownloadURL(e,t){return this.client.buildURL(`/api/backups/${encodeURIComponent(t)}?token=${encodeURIComponent(e)}`)}}class CronService extends BaseService{async getFullList(e){return e=Object.assign({method:\"GET\"},e),this.client.send(\"/api/crons\",e)}async run(e,t){return t=Object.assign({method:\"POST\"},t),this.client.send(`/api/crons/${encodeURIComponent(e)}`,t).then((()=>!0))}}function isFile(e){return\"undefined\"!=typeof Blob&&e instanceof Blob||\"undefined\"!=typeof File&&e instanceof File||null!==e&&\"object\"==typeof e&&e.uri&&(\"undefined\"!=typeof navigator&&\"ReactNative\"===navigator.product||\"undefined\"!=typeof global&&global.HermesInternal)}function isFormData(e){return e&&(\"FormData\"===e.constructor?.name||\"undefined\"!=typeof FormData&&e instanceof FormData)}function hasFileField(e){for(const t in e){const s=Array.isArray(e[t])?e[t]:[e[t]];for(const e of s)if(isFile(e))return!0}return!1}const r=/^[\\-\\.\\d]+$/;function inferFormDataValue(e){if(\"string\"!=typeof e)return e;if(\"true\"==e)return!0;if(\"false\"==e)return!1;if((\"-\"===e[0]||e[0]>=\"0\"&&e[0]<=\"9\")&&r.test(e)){let t=+e;if(\"\"+t===e)return t}return e}class BatchService extends BaseService{constructor(){super(...arguments),this.requests=[],this.subs={}}collection(e){return this.subs[e]||(this.subs[e]=new SubBatchService(this.requests,e)),this.subs[e]}async send(e){const t=new FormData,s=[];for(let e=0;e<this.requests.length;e++){const i=this.requests[e];if(s.push({method:i.method,url:i.url,headers:i.headers,body:i.json}),i.files)for(let s in i.files){const n=i.files[s]||[];for(let i of n)t.append(\"requests.\"+e+\".\"+s,i)}}return t.append(\"@jsonPayload\",JSON.stringify({requests:s})),e=Object.assign({method:\"POST\",body:t},e),this.client.send(\"/api/batch\",e)}}class SubBatchService{constructor(e,t){this.requests=[],this.requests=e,this.collectionIdOrName=t}upsert(e,t){t=Object.assign({body:e||{}},t);const s={method:\"PUT\",url:\"/api/collections/\"+encodeURIComponent(this.collectionIdOrName)+\"/records\"};this.prepareRequest(s,t),this.requests.push(s)}create(e,t){t=Object.assign({body:e||{}},t);const s={method:\"POST\",url:\"/api/collections/\"+encodeURIComponent(this.collectionIdOrName)+\"/records\"};this.prepareRequest(s,t),this.requests.push(s)}update(e,t,s){s=Object.assign({body:t||{}},s);const i={method:\"PATCH\",url:\"/api/collections/\"+encodeURIComponent(this.collectionIdOrName)+\"/records/\"+encodeURIComponent(e)};this.prepareRequest(i,s),this.requests.push(i)}delete(e,t){t=Object.assign({},t);const s={method:\"DELETE\",url:\"/api/collections/\"+encodeURIComponent(this.collectionIdOrName)+\"/records/\"+encodeURIComponent(e)};this.prepareRequest(s,t),this.requests.push(s)}prepareRequest(e,t){if(normalizeUnknownQueryParams(t),e.headers=t.headers,e.json={},e.files={},void 0!==t.query){const s=serializeQueryParams(t.query);s&&(e.url+=(e.url.includes(\"?\")?\"&\":\"?\")+s)}let s=t.body;isFormData(s)&&(s=function convertFormDataToObject(e){let t={};return e.forEach(((e,s)=>{if(\"@jsonPayload\"===s&&\"string\"==typeof e)try{let s=JSON.parse(e);Object.assign(t,s)}catch(e){console.warn(\"@jsonPayload error:\",e)}else void 0!==t[s]?(Array.isArray(t[s])||(t[s]=[t[s]]),t[s].push(inferFormDataValue(e))):t[s]=inferFormDataValue(e)})),t}(s));for(const t in s){const i=s[t];if(isFile(i))e.files[t]=e.files[t]||[],e.files[t].push(i);else if(Array.isArray(i)){const s=[],n=[];for(const e of i)isFile(e)?s.push(e):n.push(e);if(s.length>0&&s.length==i.length){e.files[t]=e.files[t]||[];for(let i of s)e.files[t].push(i)}else if(e.json[t]=n,s.length>0){let i=t;t.startsWith(\"+\")||t.endsWith(\"+\")||(i+=\"+\"),e.files[i]=e.files[i]||[];for(let t of s)e.files[i].push(t)}}else e.json[t]=i}}}class Client{get baseUrl(){return this.baseURL}set baseUrl(e){this.baseURL=e}constructor(e=\"/\",t,s=\"en-US\"){this.cancelControllers={},this.recordServices={},this.enableAutoCancellation=!0,this.baseURL=e,this.lang=s,t?this.authStore=t:\"undefined\"!=typeof window&&window.Deno?this.authStore=new BaseAuthStore:this.authStore=new LocalAuthStore,this.collections=new CollectionService(this),this.files=new FileService(this),this.logs=new LogService(this),this.settings=new SettingsService(this),this.realtime=new RealtimeService(this),this.health=new HealthService(this),this.backups=new BackupService(this),this.crons=new CronService(this)}get admins(){return this.collection(\"_superusers\")}createBatch(){return new BatchService(this)}collection(e){return this.recordServices[e]||(this.recordServices[e]=new RecordService(this,e)),this.recordServices[e]}autoCancellation(e){return this.enableAutoCancellation=!!e,this}cancelRequest(e){return this.cancelControllers[e]&&(this.cancelControllers[e].abort(),delete this.cancelControllers[e]),this}cancelAllRequests(){for(let e in this.cancelControllers)this.cancelControllers[e].abort();return this.cancelControllers={},this}filter(e,t){if(!t)return e;for(let s in t){let i=t[s];switch(typeof i){case\"boolean\":case\"number\":i=\"\"+i;break;case\"string\":i=\"'\"+i.replace(/'/g,\"\\\\'\")+\"'\";break;default:i=null===i?\"null\":i instanceof Date?\"'\"+i.toISOString().replace(\"T\",\" \")+\"'\":\"'\"+JSON.stringify(i).replace(/'/g,\"\\\\'\")+\"'\"}e=e.replaceAll(\"{:\"+s+\"}\",i)}return e}getFileUrl(e,t,s={}){return console.warn(\"Please replace pb.getFileUrl() with pb.files.getURL()\"),this.files.getURL(e,t,s)}buildUrl(e){return console.warn(\"Please replace pb.buildUrl() with pb.buildURL()\"),this.buildURL(e)}buildURL(e){let t=this.baseURL;return\"undefined\"==typeof window||!window.location||t.startsWith(\"https://\")||t.startsWith(\"http://\")||(t=window.location.origin?.endsWith(\"/\")?window.location.origin.substring(0,window.location.origin.length-1):window.location.origin||\"\",this.baseURL.startsWith(\"/\")||(t+=window.location.pathname||\"/\",t+=t.endsWith(\"/\")?\"\":\"/\"),t+=this.baseURL),e&&(t+=t.endsWith(\"/\")?\"\":\"/\",t+=e.startsWith(\"/\")?e.substring(1):e),t}async send(e,t){t=this.initSendOptions(e,t);let s=this.buildURL(e);if(this.beforeSend){const e=Object.assign({},await this.beforeSend(s,t));void 0!==e.url||void 0!==e.options?(s=e.url||s,t=e.options||t):Object.keys(e).length&&(t=e,console?.warn&&console.warn(\"Deprecated format of beforeSend return: please use `return { url, options }`, instead of `return options`.\"))}if(void 0!==t.query){const e=serializeQueryParams(t.query);e&&(s+=(s.includes(\"?\")?\"&\":\"?\")+e),delete t.query}\"application/json\"==this.getHeader(t.headers,\"Content-Type\")&&t.body&&\"string\"!=typeof t.body&&(t.body=JSON.stringify(t.body));return(t.fetch||fetch)(s,t).then((async e=>{let s={};try{s=await e.json()}catch(e){if(t.signal?.aborted||\"undefined\"!=typeof DOMException&&e instanceof DOMException&&(\"AbortError\"==e.name||20==e.code))throw e}if(this.afterSend&&(s=await this.afterSend(e,s,t)),e.status>=400)throw new ClientResponseError({url:e.url,status:e.status,data:s});return s})).catch((e=>{throw new ClientResponseError(e)}))}initSendOptions(e,t){if((t=Object.assign({method:\"GET\"},t)).body=function convertToFormDataIfNeeded(e){if(\"undefined\"==typeof FormData||void 0===e||\"object\"!=typeof e||null===e||isFormData(e)||!hasFileField(e))return e;const t=new FormData;for(const s in e){const i=e[s];if(void 0!==i)if(\"object\"!=typeof i||hasFileField({data:i})){const e=Array.isArray(i)?i:[i];for(let i of e)t.append(s,i)}else{let e={};e[s]=i,t.append(\"@jsonPayload\",JSON.stringify(e))}}return t}(t.body),normalizeUnknownQueryParams(t),t.query=Object.assign({},t.params,t.query),void 0===t.requestKey&&(!1===t.$autoCancel||!1===t.query.$autoCancel?t.requestKey=null:(t.$cancelKey||t.query.$cancelKey)&&(t.requestKey=t.$cancelKey||t.query.$cancelKey)),delete t.$autoCancel,delete t.query.$autoCancel,delete t.$cancelKey,delete t.query.$cancelKey,null!==this.getHeader(t.headers,\"Content-Type\")||isFormData(t.body)||(t.headers=Object.assign({},t.headers,{\"Content-Type\":\"application/json\"})),null===this.getHeader(t.headers,\"Accept-Language\")&&(t.headers=Object.assign({},t.headers,{\"Accept-Language\":this.lang})),this.authStore.token&&null===this.getHeader(t.headers,\"Authorization\")&&(t.headers=Object.assign({},t.headers,{Authorization:this.authStore.token})),this.enableAutoCancellation&&null!==t.requestKey){const s=t.requestKey||(t.method||\"GET\")+e;delete t.requestKey,this.cancelRequest(s);const i=new AbortController;this.cancelControllers[s]=i,t.signal=i.signal}return t}getHeader(e,t){e=e||{},t=t.toLowerCase();for(let s in e)if(s.toLowerCase()==t)return e[s];return null}}class AsyncAuthStore extends BaseAuthStore{constructor(e){super(),this.queue=[],this.saveFunc=e.save,this.clearFunc=e.clear,this._enqueue((()=>this._loadInitial(e.initial)))}save(e,t){super.save(e,t);let s=\"\";try{s=JSON.stringify({token:e,record:t})}catch(e){console.warn(\"AsyncAuthStore: failed to stringify the new state\")}this._enqueue((()=>this.saveFunc(s)))}clear(){super.clear(),this.clearFunc?this._enqueue((()=>this.clearFunc())):this._enqueue((()=>this.saveFunc(\"\")))}async _loadInitial(e){try{if(e=await e){let t;\"string\"==typeof e?t=JSON.parse(e)||{}:\"object\"==typeof e&&(t=e),this.save(t.token||\"\",t.record||t.model||null)}}catch(e){}}_enqueue(e){this.queue.push(e),1==this.queue.length&&this._dequeue()}_dequeue(){this.queue.length&&this.queue[0]().finally((()=>{this.queue.shift(),this.queue.length&&this._dequeue()}))}}export{AsyncAuthStore,BaseAuthStore,BatchService,ClientResponseError,CollectionService,CrudService,HealthService,LocalAuthStore,LogService,RealtimeService,RecordService,SubBatchService,cookieParse,cookieSerialize,Client as default,getTokenPayload,isTokenExpired,normalizeUnknownQueryParams,serializeQueryParams};\n//# sourceMappingURL=pocketbase.es.mjs.map\n","import PocketBase, { RecordModel, RecordSubscription } from 'pocketbase';\r\nimport { events, setDbModule } from './events';\r\nimport { state } from './state';\r\n\r\n// Types\r\nexport interface DbUser extends RecordModel {\r\n  email: string;\r\n  username?: string;\r\n  name?: string;\r\n  avatar?: string;\r\n}\r\n\r\nexport interface ListOptions {\r\n  page?: number;\r\n  perPage?: number;\r\n  filter?: string;\r\n  sort?: string;\r\n  expand?: string;\r\n  fields?: string;\r\n}\r\n\r\nexport interface ListResult<T> {\r\n  page: number;\r\n  perPage: number;\r\n  totalItems: number;\r\n  totalPages: number;\r\n  items: T[];\r\n}\r\n\r\n// Internal state\r\nlet pb: PocketBase | null = null;\r\nlet dbUrl: string = typeof window !== 'undefined' ? window.location.origin : '';\r\nlet dbAutoCancellation: boolean = false;\r\nconst realtimeUnsubscribers = new Map<string, () => void>();\r\n\r\n/**\r\n * Get or create the PocketBase instance\r\n */\r\nfunction getClient(): PocketBase {\r\n  if (!pb) {\r\n    pb = new PocketBase(dbUrl);\r\n\r\n    // Disable auto-cancellation by default (can be overridden via db.autoCancellation)\r\n    pb.autoCancellation(dbAutoCancellation);\r\n\r\n    // Listen for auth changes\r\n    pb.authStore.onChange(() => {\r\n      saveAuthState();\r\n      events.emit('auth:change', {\r\n        user: pb?.authStore.record as DbUser | null,\r\n        isAuthenticated: pb?.authStore.isValid ?? false\r\n      });\r\n    });\r\n\r\n    // Restore auth from previous session\r\n    restoreAuthState();\r\n  }\r\n  return pb;\r\n}\r\n\r\n/**\r\n * Save auth state to local storage\r\n */\r\nfunction saveAuthState(): void {\r\n  if (!pb) return;\r\n\r\n  if (pb.authStore.isValid) {\r\n    const user = pb.authStore.record as DbUser | null;\r\n    state.set('_auth:token', pb.authStore.token, { persist: 'local' });\r\n    state.set('_auth:user', user, { persist: 'local' });\r\n  } else {\r\n    state.delete('_auth:token');\r\n    state.delete('_auth:user');\r\n  }\r\n}\r\n\r\n/**\r\n * Restore auth state from local storage\r\n */\r\nfunction restoreAuthState(): void {\r\n  if (!pb) return;\r\n\r\n  const token = state.get<string>('_auth:token');\r\n  const user = state.get<DbUser>('_auth:user');\r\n\r\n  if (token && user) {\r\n    pb.authStore.save(token, user);\r\n  }\r\n}\r\n\r\n/**\r\n * Enable realtime for a collection (called by events module)\r\n */\r\nasync function enableRealtime(collection: string): Promise<void> {\r\n  if (realtimeUnsubscribers.has(collection)) return;\r\n\r\n  const client = getClient();\r\n  const unsubscribe = await client.collection(collection).subscribe('*', (e: RecordSubscription<RecordModel>) => {\r\n    events.emit(`db:${collection}:${e.action}`, { record: e.record });\r\n  });\r\n\r\n  realtimeUnsubscribers.set(collection, unsubscribe);\r\n}\r\n\r\n/**\r\n * Disable realtime for a collection (called by events module)\r\n */\r\nasync function disableRealtime(collection: string): Promise<void> {\r\n  const unsubscribe = realtimeUnsubscribers.get(collection);\r\n  if (unsubscribe) {\r\n    unsubscribe();\r\n    realtimeUnsubscribers.delete(collection);\r\n  }\r\n}\r\n\r\n// Register with events module\r\nsetDbModule({ enableRealtime, disableRealtime });\r\n\r\nexport const db = {\r\n  /**\r\n   * Get or set the PocketBase URL\r\n   * Defaults to window.location.origin\r\n   */\r\n  get url(): string {\r\n    return dbUrl;\r\n  },\r\n\r\n  set url(value: string) {\r\n    dbUrl = value;\r\n    // Reset client so it reconnects with new URL\r\n    if (pb) {\r\n      pb = null;\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Get or set auto-cancellation behavior\r\n   * Defaults to false (disabled)\r\n   */\r\n  get autoCancellation(): boolean {\r\n    return dbAutoCancellation;\r\n  },\r\n\r\n  set autoCancellation(value: boolean) {\r\n    dbAutoCancellation = value;\r\n    // Apply to existing client if any\r\n    if (pb) {\r\n      pb.autoCancellation(value);\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Get the underlying PocketBase instance for advanced usage\r\n   */\r\n  client(): PocketBase {\r\n    return getClient();\r\n  },\r\n\r\n  /**\r\n   * Check if user is authenticated\r\n   */\r\n  isAuthenticated(): boolean {\r\n    return getClient().authStore.isValid;\r\n  },\r\n\r\n  /**\r\n   * Get current authenticated user\r\n   */\r\n  getUser<T extends DbUser = DbUser>(): T | null {\r\n    return (getClient().authStore.record as T) ?? null;\r\n  },\r\n\r\n  // ==================== AUTH ====================\r\n\r\n  /**\r\n   * Sign up a new user\r\n   */\r\n  async signup(email: string, password: string, data: Record<string, unknown> = {}): Promise<DbUser> {\r\n    const client = getClient();\r\n    const user = await client.collection('users').create<DbUser>({\r\n      email,\r\n      password,\r\n      passwordConfirm: password,\r\n      ...data\r\n    });\r\n    events.emit('auth:signup', { user });\r\n    return user;\r\n  },\r\n\r\n  /**\r\n   * Log in with email and password\r\n   */\r\n  async login(email: string, password: string): Promise<DbUser> {\r\n    const client = getClient();\r\n    const auth = await client.collection('users').authWithPassword<DbUser>(email, password);\r\n    events.emit('auth:login', { user: auth.record });\r\n    return auth.record;\r\n  },\r\n\r\n  /**\r\n   * Log in with OAuth2 provider\r\n   */\r\n  async loginWithOAuth(provider: string): Promise<DbUser> {\r\n    const client = getClient();\r\n    const auth = await client.collection('users').authWithOAuth2<DbUser>({ provider });\r\n    events.emit('auth:login', { user: auth.record });\r\n    return auth.record;\r\n  },\r\n\r\n  /**\r\n   * Log out the current user\r\n   */\r\n  logout(): void {\r\n    const user = this.getUser();\r\n    const client = getClient();\r\n    client.authStore.clear();\r\n    state.delete('_auth:token');\r\n    state.delete('_auth:user');\r\n    events.emit('auth:logout', { user });\r\n  },\r\n\r\n  /**\r\n   * Refresh the auth token\r\n   */\r\n  async refreshAuth(): Promise<DbUser> {\r\n    const client = getClient();\r\n    const auth = await client.collection('users').authRefresh<DbUser>();\r\n    events.emit('auth:refresh', { user: auth.record });\r\n    return auth.record;\r\n  },\r\n\r\n  /**\r\n   * Request a password reset email\r\n   */\r\n  async resetPassword(email: string): Promise<void> {\r\n    const client = getClient();\r\n    await client.collection('users').requestPasswordReset(email);\r\n    events.emit('auth:reset-request', { email });\r\n  },\r\n\r\n  /**\r\n   * Confirm a password reset\r\n   */\r\n  async confirmResetPassword(token: string, password: string): Promise<void> {\r\n    const client = getClient();\r\n    await client.collection('users').confirmPasswordReset(token, password, password);\r\n    events.emit('auth:reset-confirm', {});\r\n  },\r\n\r\n  /**\r\n   * Request email verification\r\n   */\r\n  async requestVerification(email: string): Promise<void> {\r\n    const client = getClient();\r\n    await client.collection('users').requestVerification(email);\r\n    events.emit('auth:verify-request', { email });\r\n  },\r\n\r\n  /**\r\n   * Confirm email verification\r\n   */\r\n  async confirmVerification(token: string): Promise<void> {\r\n    const client = getClient();\r\n    await client.collection('users').confirmVerification(token);\r\n    events.emit('auth:verify-confirm', {});\r\n  },\r\n\r\n  // ==================== CRUD ====================\r\n\r\n  /**\r\n   * Get a single record by ID\r\n   */\r\n  async get<T extends RecordModel = RecordModel>(\r\n    collection: string,\r\n    id: string,\r\n    options: Omit<ListOptions, 'page' | 'perPage' | 'filter' | 'sort'> = {}\r\n  ): Promise<T> {\r\n    const client = getClient();\r\n    return client.collection(collection).getOne<T>(id, options);\r\n  },\r\n\r\n  /**\r\n   * List records with pagination\r\n   */\r\n  async list<T extends RecordModel = RecordModel>(\r\n    collection: string,\r\n    options: ListOptions = {}\r\n  ): Promise<ListResult<T>> {\r\n    const client = getClient();\r\n    const { page = 1, perPage = 20, ...rest } = options;\r\n    return client.collection(collection).getList<T>(page, perPage, rest);\r\n  },\r\n\r\n  /**\r\n   * Get all records (auto-paginated)\r\n   */\r\n  async getAll<T extends RecordModel = RecordModel>(\r\n    collection: string,\r\n    options: Omit<ListOptions, 'page' | 'perPage'> = {}\r\n  ): Promise<T[]> {\r\n    const client = getClient();\r\n    return client.collection(collection).getFullList<T>(options);\r\n  },\r\n\r\n  /**\r\n   * Get the first record matching a filter\r\n   */\r\n  async getFirst<T extends RecordModel = RecordModel>(\r\n    collection: string,\r\n    filter: string,\r\n    options: Omit<ListOptions, 'page' | 'perPage' | 'filter'> = {}\r\n  ): Promise<T | null> {\r\n    const client = getClient();\r\n    try {\r\n      return await client.collection(collection).getFirstListItem<T>(filter, options);\r\n    } catch {\r\n      return null;\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Create a new record\r\n   * Data can be a plain object or FormData (for file uploads)\r\n   */\r\n  async create<T extends RecordModel = RecordModel>(\r\n    collection: string,\r\n    data: Record<string, unknown> | FormData,\r\n    options: Omit<ListOptions, 'page' | 'perPage' | 'filter' | 'sort'> = {}\r\n  ): Promise<T> {\r\n    const client = getClient();\r\n    const record = await client.collection(collection).create<T>(data, options);\r\n    events.emit(`db:${collection}:create`, { record });\r\n    return record;\r\n  },\r\n\r\n  /**\r\n   * Update an existing record\r\n   * Data can be a plain object or FormData (for file uploads)\r\n   */\r\n  async update<T extends RecordModel = RecordModel>(\r\n    collection: string,\r\n    id: string,\r\n    data: Record<string, unknown> | FormData,\r\n    options: Omit<ListOptions, 'page' | 'perPage' | 'filter' | 'sort'> = {}\r\n  ): Promise<T> {\r\n    const client = getClient();\r\n    const record = await client.collection(collection).update<T>(id, data, options);\r\n    events.emit(`db:${collection}:update`, { record });\r\n    return record;\r\n  },\r\n\r\n  /**\r\n   * Delete a record\r\n   */\r\n  async delete(collection: string, id: string): Promise<void> {\r\n    const client = getClient();\r\n    await client.collection(collection).delete(id);\r\n    events.emit(`db:${collection}:delete`, { id });\r\n  },\r\n\r\n  // ==================== FILES ====================\r\n\r\n  /**\r\n   * Get a file URL from a record\r\n   */\r\n  getFileUrl(\r\n    record: RecordModel,\r\n    filename: string,\r\n    options: { thumb?: string } = {}\r\n  ): string {\r\n    const client = getClient();\r\n    return client.files.getURL(record, filename, options);\r\n  }\r\n};\r\n","import { state, StateOptions } from './state';\r\nimport { events, EventCallback, DOMEventCallback } from './events';\r\nimport { db, DbUser, ListOptions, ListResult } from './db';\r\n\r\nexport interface CC {\r\n  state: typeof state;\r\n  events: typeof events;\r\n  db: typeof db;\r\n}\r\n\r\nexport const cc: CC = {\r\n  state,\r\n  events,\r\n  db\r\n};\r\n\r\n// Auto-attach to window in browser environments\r\nif (typeof window !== 'undefined') {\r\n  (window as unknown as { cc: CC }).cc = cc;\r\n}\r\n\r\n// Named exports for ESM usage\r\nexport { state, events, db };\r\nexport type { StateOptions, EventCallback, DOMEventCallback, DbUser, ListOptions, ListResult };\r\n\r\n// Default export\r\nexport default cc;\r\n"],"names":["listeners","customHandlers","Map","realtimeCollections","domDelegationHandlers","dbModule","parseDbEvent","eventName","match","collection","action","ensureDomDelegation","eventType","has","handler","e","entry","type","event","selector","document","callback","target","matches","closest","addEventListener","set","cleanupDomDelegation","some","l","get","removeEventListener","delete","async","handleRealtimeAdd","count","enableRealtime","events","on","selectorOrCallback","undefined","push","cb","Set","add","dbEvent","off","index","findIndex","originalCallback","splice","disableRealtime","handleRealtimeRemove","once","wrapper","this","payload","emit","handlers","forEach","console","error","clear","toRemove","filter","indexOf","length","_","list","map","STORAGE_PREFIX","memoryStore","getStorage","persist","window","sessionStorage","localStorage","isExpired","stored","expiry","Date","now","getFromStorage","key","storage","raw","getItem","JSON","parse","removeFromStorage","removeItem","state","mem","value","options","ttl","oldValue","setItem","stringify","saveToStorage","keysToRemove","i","startsWith","k","ClientResponseError","Error","constructor","super","url","status","response","isAbort","originalError","Object","setPrototypeOf","prototype","data","DOMException","name","code","message","cause","includes","toJSON","cookieSerialize","t","s","n","assign","r","encode","defaultEncode","test","TypeError","o","a","maxAge","isNaN","isFinite","Math","floor","domain","path","expires","toString","call","valueOf","toUTCString","httpOnly","secure","priority","toLowerCase","sameSite","defaultDecode","decodeURIComponent","encodeURIComponent","navigator","product","global","HermesInternal","getTokenPayload","split","charCodeAt","slice","join","isTokenExpired","keys","exp","atob","String","replace","charAt","fromCharCode","BaseAuthStore","baseToken","baseModel","_onChangeCallbacks","token","record","model","isValid","isSuperuser","collectionName","collectionId","isAdmin","warn","isAuthRecord","save","triggerChange","loadFromCookie","decode","lastIndexOf","trim","cookieParse","Array","isArray","exportToCookie","Blob","size","id","email","onChange","LocalAuthStore","storageFallback","storageKey","_bindStorageEvent","_storageGet","_storageSet","_storageRemove","BaseService","client","SettingsService","getAll","method","send","update","body","testS3","filesystem","then","testEmail","template","generateAppleClientSecret","clientId","teamId","keyId","privateKey","duration","normalizeUnknownQueryParams","query","serializeQueryParams","prepareQueryParamValue","toISOString","RealtimeService","arguments","eventSource","subscriptions","lastSentSubscriptions","maxConnectTimeout","reconnectAttempts","maxReconnectAttempts","predefinedReconnectIntervals","pendingConnects","isConnected","subscribe","headers","listener","submitSubscriptions","connect","unsubscribeByTopicAndListener","unsubscribe","getSubscriptionsByTopic","hasSubscriptionListeners","disconnect","unsubscribeByPrefix","addAllSubscriptionListeners","getNonEmptySubscriptionKeys","requestKey","getSubscriptionsCancelKey","catch","removeAllSubscriptionListeners","Promise","resolve","reject","initConnect","clearTimeout","connectTimeoutId","setTimeout","connectErrorHandler","EventSource","buildURL","onerror","lastEventId","hasUnsentSubscriptions","reconnectTimeoutId","onDisconnect","cancelRequest","close","CrudService","getFullList","_getFullList","batch","getList","page","perPage","baseCrudPath","items","getFirstListItem","skipTotal","getOne","create","request","concat","normalizeLegacyOptionsArgs","resetAutoRefresh","_resetAutoRefresh","RecordService","collectionIdOrName","baseCollectionPath","isSuperusers","realtime","authStore","expand","authResponse","listAuthMethods","fields","authWithPassword","identity","password","autoRefreshThreshold","autoRefresh","beforeSend","sendOptions","c","authRefresh","authWithOAuth2Code","provider","codeVerifier","redirectURL","createData","authWithOAuth2","urlCallback","openBrowserPopup","cleanup","oauth2","providers","find","cancelControllers","signal","onabort","scopes","scope","_replaceQueryParams","authURL","h","location","href","requestPasswordReset","confirmPasswordReset","passwordConfirm","requestVerification","confirmVerification","verified","requestEmailChange","newEmail","confirmEmailChange","listExternalAuths","unlinkExternalAuth","recordId","requestOTP","authWithOTP","otpId","impersonate","Authorization","Client","baseURL","lang","substring","hasOwnProperty","open","innerWidth","innerHeight","CollectionService","import","collections","deleteMissing","getScaffolds","truncate","LogService","getStats","HealthService","check","FileService","getUrl","getURL","download","URLSearchParams","getToken","BackupService","upload","restore","getDownloadUrl","getDownloadURL","CronService","run","isFile","File","uri","isFormData","FormData","hasFileField","inferFormDataValue","BatchService","requests","subs","SubBatchService","json","files","append","upsert","prepareRequest","endsWith","baseUrl","recordServices","enableAutoCancellation","Deno","logs","settings","health","backups","crons","admins","createBatch","autoCancellation","abort","cancelAllRequests","replaceAll","getFileUrl","buildUrl","origin","pathname","initSendOptions","getHeader","fetch","aborted","afterSend","params","$autoCancel","$cancelKey","AbortController","pb","dbUrl","dbAutoCancellation","realtimeUnsubscribers","getClient","PocketBase","user","saveAuthState","isAuthenticated","restoreAuthState","db","setDbModule","getUser","signup","login","auth","loginWithOAuth","logout","refreshAuth","resetPassword","confirmResetPassword","rest","getFirst","filename","cc"],"mappings":"yOAaA,MAAMA,EAA6B,GAC7BC,EAAiB,IAAIC,IAGrBC,EAAsB,IAAID,IAG1BE,EAAwB,IAAIF,IAGlC,IAAIG,EAGO,KAaX,SAASC,EAAaC,GACpB,MAAMC,EAAQD,EAAUC,MAAM,uCAC9B,OAAIA,EACK,CAAEC,WAAYD,EAAM,GAAIE,OAAQF,EAAM,IAExC,IACT,CAKA,SAASG,EAAoBC,GAC3B,GAAIR,EAAsBS,IAAID,GAAY,OAE1C,MAAME,EAAWC,IAEf,IAAK,MAAMC,KAAShB,EAClB,GAAmB,QAAfgB,EAAMC,MAAkBD,EAAME,QAAUN,EAG5C,GAAII,EAAMG,WAAaC,SACpBJ,EAAMK,SAA8BN,QAChC,GAA8B,iBAAnBC,EAAMG,SAAuB,CAC7C,MAAMG,EAASP,EAAEO,QACbA,GAAQC,UAAUP,EAAMG,WAAaG,GAAQE,UAAUR,EAAMG,YAC9DH,EAAMK,SAA8BN,EAEzC,GAIJK,SAASK,iBAAiBb,EAAWE,GAAS,GAC9CV,EAAsBsB,IAAId,EAAWE,EACvC,CAKA,SAASa,EAAqBf,GAE5B,IADqBZ,EAAU4B,KAAKC,GAAgB,QAAXA,EAAEZ,MAAkBY,EAAEX,QAAUN,GACtD,CACjB,MAAME,EAAUV,EAAsB0B,IAAIlB,GACtCE,IACFM,SAASW,oBAAoBnB,EAAWE,GAAS,GACjDV,EAAsB4B,OAAOpB,GAEjC,CACF,CAKAqB,eAAeC,EAAkBzB,GAC/B,MAAM0B,GAAShC,EAAoB2B,IAAIrB,IAAe,GAAK,EAC3DN,EAAoBuB,IAAIjB,EAAY0B,GAGtB,IAAVA,GAAe9B,SACXA,EAAS+B,eAAe3B,EAElC,CAmBO,MAAM4B,EAAS,CAOpB,EAAAC,CACEpB,EACAqB,EACAlB,GAGA,QAAiBmB,IAAbnB,EAAwB,CAC1B,MACML,EAAuB,CAAEC,KAAM,MAAOC,QAAOG,WAAUF,SAD5CoB,GAIjB,OAFAvC,EAAUyC,KAAKzB,QACfL,EAAoBO,EAEtB,CAGA,MAAMwB,EAAKH,EACLvB,EAAuB,CAAEC,KAAM,SAAUC,QAAOG,SAAUqB,GAChE1C,EAAUyC,KAAKzB,GAEVf,EAAeY,IAAIK,IACtBjB,EAAeyB,IAAIR,EAAO,IAAIyB,KAEhC1C,EAAe6B,IAAIZ,GAAQ0B,IAAIF,GAG/B,MAAMG,EAAUvC,EAAaY,GACzB2B,GACFX,EAAkBW,EAAQpC,WAE9B,EAKA,GAAAqC,CACE5B,EACAqB,EACAlB,GAGA,QAAiBmB,IAAbnB,EAAwB,CAC1B,MAAMF,EAAWoB,EACXQ,EAAQ/C,EAAUgD,UACtBnB,GAAgB,QAAXA,EAAEZ,MAAkBY,EAAEX,QAAUA,GAASW,EAAEV,WAAaA,IAC5DU,EAAER,WAAaA,GAAYQ,EAAEoB,mBAAqB5B,IAMrD,aAJc,IAAV0B,IACF/C,EAAUkD,OAAOH,EAAO,GACxBpB,EAAqBT,IAGzB,CAGA,MAAMwB,EAAKH,EACLQ,EAAQ/C,EAAUgD,UACtBnB,GAAgB,WAAXA,EAAEZ,MAAqBY,EAAEX,QAAUA,IACvCW,EAAER,WAAaqB,GAAMb,EAAEoB,mBAAqBP,IAE/C,IAAc,IAAVK,EAAc,CAChB,MAAM/B,EAAQhB,EAAU+C,GACxB/C,EAAUkD,OAAOH,EAAO,GACxB9C,EAAe6B,IAAIZ,IAAQc,OAAOhB,EAAMK,UACpCL,EAAMiC,kBACRhD,EAAe6B,IAAIZ,IAAQc,OAAOhB,EAAMiC,kBAI1C,MAAMJ,EAAUvC,EAAaY,GACzB2B,GA1FVZ,eAAoCxB,GAClC,MAAM0B,GAAShC,EAAoB2B,IAAIrB,IAAe,GAAK,EAEvD0B,GAAS,GACXhC,EAAoB6B,OAAOvB,GAEvBJ,SACIA,EAAS8C,gBAAgB1C,IAGjCN,EAAoBuB,IAAIjB,EAAY0B,EAExC,CA+EQiB,CAAqBP,EAAQpC,WAEjC,CACF,EAKA,IAAA4C,CACEnC,EACAqB,EACAlB,GAEA,QAAiBmB,IAAbnB,EAAwB,CAE1B,MAAMF,EAAWoB,EACXe,EAA6BvC,IACjCwC,KAAKT,IAAI5B,EAAOC,EAAUmC,GAC1BjC,EAASN,IAELC,EAAuB,CAC3BC,KAAM,MACNC,QACAG,SAAUiC,EACVnC,WACA8B,iBAAkB5B,GAEpBrB,EAAUyC,KAAKzB,GACfL,EAAoBO,EACtB,KAAO,CAEL,MAAMwB,EAAKH,EACLe,EAA0BE,IAC9BD,KAAKT,IAAI5B,EAAOoC,GAChBZ,EAAGc,IAECxC,EAAuB,CAC3BC,KAAM,SACNC,QACAG,SAAUiC,EACVL,iBAAkBP,GAEpB1C,EAAUyC,KAAKzB,GAEVf,EAAeY,IAAIK,IACtBjB,EAAeyB,IAAIR,EAAO,IAAIyB,KAEhC1C,EAAe6B,IAAIZ,GAAQ0B,IAAIU,GAE/B,MAAMT,EAAUvC,EAAaY,GACzB2B,GACFX,EAAkBW,EAAQpC,WAE9B,CACF,EAKA,IAAAgD,CAAkBvC,EAAesC,GAC/B,MAAME,EAAWzD,EAAe6B,IAAIZ,GAC/BwC,GAELA,EAASC,QAAQ7C,IACf,IACEA,EAAQ0C,EACV,CAAE,MAAOzC,GACP6C,QAAQC,MAAM,+BAA+B3C,MAAWH,EAC1D,GAEJ,EAKA,KAAA+C,CAAM5C,GACJ,GAAIA,EAAO,CAET,MAAM6C,EAAW/D,EAAUgE,OAAOnC,GAAKA,EAAEX,QAAUA,GACnD6C,EAASJ,QAAQ3C,IACf,MAAM+B,EAAQ/C,EAAUiE,QAAQjD,IAClB,IAAV+B,GAAc/C,EAAUkD,OAAOH,EAAO,KAE5C9C,EAAe+B,OAAOd,GAElB6C,EAASnC,KAAKC,GAAgB,QAAXA,EAAEZ,OACvBU,EAAqBT,GAGvB,MAAM2B,EAAUvC,EAAaY,GACzB2B,GAAW1C,EAAoBU,IAAIgC,EAAQpC,cAC7CN,EAAoB6B,OAAOa,EAAQpC,YACnCJ,GAAU8C,gBAAgBN,EAAQpC,YAEtC,MAEET,EAAUkE,OAAS,EACnBjE,EAAe6D,QAGf1D,EAAsBuD,QAAQ,CAAC7C,EAASF,KACtCQ,SAASW,oBAAoBnB,EAAWE,GAAS,KAEnDV,EAAsB0D,QAGtB3D,EAAoBwD,QAAQ,CAACQ,EAAG1D,KAC9BJ,GAAU8C,gBAAgB1C,KAE5BN,EAAoB2D,OAExB,EAKAM,KAAI,IACKpE,EAAUqE,IAAIxC,IAAC,CACpBZ,KAAMY,EAAEZ,KACRC,MAAOW,EAAEX,MACTC,SAAUU,EAAEV,WAAaC,SAAW,WAAaS,EAAEV,aC7SnDmD,EAAiB,MAGjBC,EAAc,IAAIrE,IAKxB,SAASsE,EAAWC,GAClB,GAAsB,oBAAXC,OAAwB,OAAO,KAE1C,OAAQD,GACN,IAAK,UACH,OAAOE,eACT,IAAK,QACH,OAAOC,aACT,QACE,OAAO,KAEb,CAKA,SAASC,EAAUC,GACjB,YAAyBtC,IAAlBsC,EAAOC,QAAwBC,KAAKC,MAAQH,EAAOC,MAC5D,CAKA,SAASG,EAAeC,EAAaC,GACnC,IACE,MAAMC,EAAMD,EAAQE,QAAQ,GAAGhB,IAAiBa,KAChD,OAAKE,EACEE,KAAKC,MAAMH,GADD,IAEnB,CAAE,MACA,OAAO,IACT,CACF,CAgBA,SAASI,EAAkBN,EAAaC,GACtCA,EAAQM,WAAW,GAAGpB,IAAiBa,IACzC,CAEO,MAAMQ,EAAQ,CAKnB,GAAA7D,CAAiBqD,GAEf,MAAMS,EAAMrB,EAAYzC,IAAIqD,GAC5B,GAAIS,EACF,OAAIf,EAAUe,QACZrC,KAAKvB,OAAOmD,GAGPS,EAAIC,MAIb,IAAK,MAAMpB,IAAW,CAAC,UAAW,SAAmB,CACnD,MAAMW,EAAUZ,EAAWC,GAC3B,IAAKW,EAAS,SAEd,MAAMN,EAASI,EAAeC,EAAKC,GACnC,GAAIN,EAAQ,CACV,GAAID,EAAUC,GAAS,CACrBW,EAAkBN,EAAKC,GACvB,QACF,CACA,OAAON,EAAOe,KAChB,CACF,CAGF,EAMA,GAAAnE,CAAIyD,EAAaU,EAAgBC,EAAwB,CAAA,GACvD,MAAMrB,QAAEA,EAAOsB,IAAEA,GAAQD,EACnBE,EAAWzC,KAAKzB,IAAIqD,GAEpBL,EAAsB,CAC1Be,QACAd,OAAQgB,EAAMf,KAAKC,MAAQc,OAAMvD,GAG7B4C,EAAUZ,EAAWC,GACvBW,IA/DR,SAAuBD,EAAaL,EAAqBM,GACvD,IACEA,EAAQa,QAAQ,GAAG3B,IAAiBa,IAAOI,KAAKW,UAAUpB,GAC5D,CAAE,MAAO/D,GACP6C,QAAQC,MAAM,8BAA8BsB,IAAOpE,EACrD,CACF,CA0DMoF,CAAchB,EAAKL,EAAQM,GAE3Bb,EAAYvC,OAAOmD,IAEnBZ,EAAY7C,IAAIyD,EAAKL,GAIvBzC,EAAOoB,KAAK,SAAS0B,IAAO,CAAEU,QAAOG,YACvC,EAKA,GAAAnF,CAAIsE,GACF,YAAyB3C,IAAlBe,KAAKzB,IAAIqD,EAClB,EAMA,OAAOA,GACL,MAAMa,EAAWzC,KAAKzB,IAAIqD,GAC1B,QAAiB3C,IAAbwD,EAAJ,CAGAzB,EAAYvC,OAAOmD,GAGnB,IAAK,MAAMV,IAAW,CAAC,UAAW,SAAmB,CACnD,MAAMW,EAAUZ,EAAWC,GACvBW,GACFK,EAAkBN,EAAKC,EAE3B,CAGA/C,EAAOoB,KAAK,SAAS0B,IAAO,CAAEU,WAAOrD,EAAWwD,YAdpB,CAe9B,EAMA,KAAAlC,GAEES,EAAYT,QAGZ,IAAK,MAAMW,IAAW,CAAC,UAAW,SAAmB,CACnD,MAAMW,EAAUZ,EAAWC,GAC3B,IAAKW,EAAS,SAEd,MAAMgB,EAAyB,GAC/B,IAAK,IAAIC,EAAI,EAAGA,EAAIjB,EAAQlB,OAAQmC,IAAK,CACvC,MAAMlB,EAAMC,EAAQD,IAAIkB,GACpBlB,GAAKmB,WAAWhC,IAClB8B,EAAa3D,KAAK0C,EAEtB,CACAiB,EAAazC,QAAQ4C,GAAKnB,EAAQM,WAAWa,GAC/C,CACF,GCzLF,MAAMC,UAA4BC,MAAM,WAAAC,CAAY3F,GAAG4F,MAAM,uBAAuBpD,KAAKqD,IAAI,GAAGrD,KAAKsD,OAAO,EAAEtD,KAAKuD,SAAS,CAAA,EAAGvD,KAAKwD,SAAQ,EAAGxD,KAAKyD,cAAc,KAAKC,OAAOC,eAAe3D,KAAKiD,EAAoBW,WAAW,OAAOpG,GAAG,iBAAiBA,IAAIwC,KAAKqD,IAAI,iBAAiB7F,EAAE6F,IAAI7F,EAAE6F,IAAI,GAAGrD,KAAKsD,OAAO,iBAAiB9F,EAAE8F,OAAO9F,EAAE8F,OAAO,EAAEtD,KAAKwD,UAAUhG,EAAEgG,QAAQxD,KAAKyD,cAAcjG,EAAEiG,cAAc,OAAOjG,EAAE+F,UAAU,iBAAiB/F,EAAE+F,SAASvD,KAAKuD,SAAS/F,EAAE+F,SAAS,OAAO/F,EAAEqG,MAAM,iBAAiBrG,EAAEqG,KAAK7D,KAAKuD,SAAS/F,EAAEqG,KAAK7D,KAAKuD,SAAS,CAAA,GAAIvD,KAAKyD,eAAejG,aAAayF,IAAsBjD,KAAKyD,cAAcjG,GAAG,oBAAoBsG,cAActG,aAAasG,eAAe,cAActG,EAAEuG,MAAM,IAAIvG,EAAEwG,QAAQhE,KAAKwD,SAAQ,GAAIxD,KAAK+D,KAAK,uBAAuB/D,KAAKsD,OAAOtD,KAAKiE,QAAQjE,KAAKuD,UAAUU,QAAQjE,KAAKiE,UAAUjE,KAAKwD,QAAQxD,KAAKiE,QAAQ,mHAAmHjE,KAAKyD,eAAeS,OAAOD,SAASE,SAAS,oBAAoBnE,KAAKiE,QAAQ,qJAAqJjE,KAAKiE,QAAQ,yBAAyBjE,KAAKkE,MAAMlE,KAAKyD,aAAa,CAAC,QAAII,GAAO,OAAO7D,KAAKuD,QAAQ,CAAC,MAAAa,GAAS,MAAM,IAAIpE,KAAK,EAAE,MAAMxC,EAAE,wCAAke,SAAS6G,EAAgBC,EAAEC,EAAEzB,GAAG,MAAM0B,EAAEd,OAAOe,OAAO,GAAG3B,GAAG,CAAA,GAAI4B,EAAEF,EAAEG,QAAQC,EAAc,IAAIpH,EAAEqH,KAAKP,GAAG,MAAM,IAAIQ,UAAU,4BAA4B,MAAMC,EAAEL,EAAEH,GAAG,GAAGQ,IAAIvH,EAAEqH,KAAKE,GAAG,MAAM,IAAID,UAAU,2BAA2B,IAAIE,EAAEV,EAAE,IAAIS,EAAE,GAAG,MAAMP,EAAES,OAAO,CAAC,MAAMzH,EAAEgH,EAAES,OAAO,EAAE,GAAGC,MAAM1H,KAAK2H,SAAS3H,GAAG,MAAM,IAAIsH,UAAU,4BAA4BE,GAAG,aAAaI,KAAKC,MAAM7H,EAAE,CAAC,GAAGgH,EAAEc,OAAO,CAAC,IAAI9H,EAAEqH,KAAKL,EAAEc,QAAQ,MAAM,IAAIR,UAAU,4BAA4BE,GAAG,YAAYR,EAAEc,MAAM,CAAC,GAAGd,EAAEe,KAAK,CAAC,IAAI/H,EAAEqH,KAAKL,EAAEe,MAAM,MAAM,IAAIT,UAAU,0BAA0BE,GAAG,UAAUR,EAAEe,IAAI,CAAC,GAAGf,EAAEgB,QAAQ,CAAC,IAAI,SAAgBhI,GAAG,MAAM,kBAAkBkG,OAAOE,UAAU6B,SAASC,KAAKlI,IAAIA,aAAaiE,IAAI,CAA/F,CAAiG+C,EAAEgB,UAAUN,MAAMV,EAAEgB,QAAQG,WAAW,MAAM,IAAIb,UAAU,6BAA6BE,GAAG,aAAaR,EAAEgB,QAAQI,aAAa,CAAC,GAAGpB,EAAEqB,WAAWb,GAAG,cAAcR,EAAEsB,SAASd,GAAG,YAAYR,EAAEuB,SAAU,OAAO,iBAAiBvB,EAAEuB,SAASvB,EAAEuB,SAASC,cAAcxB,EAAEuB,UAAU,IAAI,MAAMf,GAAG,iBAAiB,MAAM,IAAI,SAASA,GAAG,oBAAoB,MAAM,IAAI,OAAOA,GAAG,kBAAkB,MAAM,QAAQ,MAAM,IAAIF,UAAU,8BAA+B,GAAGN,EAAEyB,SAAU,OAAO,iBAAiBzB,EAAEyB,SAASzB,EAAEyB,SAASD,cAAcxB,EAAEyB,UAAU,KAAI,EAAGjB,GAAG,oBAAoB,MAAM,IAAI,MAAMA,GAAG,iBAAiB,MAAM,IAAI,SAASA,GAAG,oBAAoB,MAAM,IAAI,OAAOA,GAAG,kBAAkB,MAAM,QAAQ,MAAM,IAAIF,UAAU,8BAA+B,OAAOE,CAAC,CAAC,SAASkB,EAAc1I,GAAG,OAAM,IAAKA,EAAEkD,QAAQ,KAAKyF,mBAAmB3I,GAAGA,CAAC,CAAC,SAASoH,EAAcpH,GAAG,OAAO4I,mBAAmB5I,EAAE,CAAC,MAAM8G,EAAE,oBAAoB+B,WAAW,gBAAgBA,UAAUC,SAAS,oBAAoBC,QAAQA,OAAOC,eAAe,IAAIjC,EAAE,SAASkC,EAAgBjJ,GAAG,GAAGA,EAAE,IAAI,MAAM8G,EAAE6B,mBAAmB5B,EAAE/G,EAAEkJ,MAAM,KAAK,IAAIA,MAAM,IAAI5F,IAAG,SAAWtD,GAAG,MAAM,KAAK,KAAKA,EAAEmJ,WAAW,GAAGlB,SAAS,KAAKmB,OAAO,EAAG,GAAGC,KAAK,KAAK,OAAO7E,KAAKC,MAAMqC,IAAI,CAAA,CAAE,CAAC,MAAM9G,GAAG,CAAC,MAAM,EAAE,CAAC,SAASsJ,EAAetJ,EAAE8G,EAAE,GAAG,IAAIC,EAAEkC,EAAgBjJ,GAAG,QAAQkG,OAAOqD,KAAKxC,GAAG5D,OAAO,KAAK4D,EAAEyC,KAAKzC,EAAEyC,IAAI1C,EAAE7C,KAAKC,MAAM,KAAK,CAAC6C,EAAE,mBAAmB0C,MAAM3C,EAAE9G,IAAI,IAAI8G,EAAE4C,OAAO1J,GAAG2J,QAAQ,MAAM,IAAI,GAAG7C,EAAE3D,OAAO,GAAG,EAAE,MAAM,IAAIuC,MAAM,qEAAqE,IAAI,IAAIqB,EAAEzB,EAAE0B,EAAE,EAAEE,EAAE,EAAEK,EAAE,GAAGjC,EAAEwB,EAAE8C,OAAO1C,MAAM5B,IAAIyB,EAAEC,EAAE,EAAE,GAAGD,EAAEzB,EAAEA,EAAE0B,IAAI,GAAGO,GAAGmC,OAAOG,aAAa,IAAI9C,OAAOC,EAAE,IAAI,EAAE1B,EAAE,oEAAoEpC,QAAQoC,GAAG,OAAOiC,GAAGkC,KAAK,MAAMnE,EAAE,UAAU,MAAMwE,EAAc,WAAAnE,GAAcnD,KAAKuH,UAAU,GAAGvH,KAAKwH,UAAU,KAAKxH,KAAKyH,mBAAmB,EAAE,CAAC,SAAIC,GAAQ,OAAO1H,KAAKuH,SAAS,CAAC,UAAII,GAAS,OAAO3H,KAAKwH,SAAS,CAAC,SAAII,GAAQ,OAAO5H,KAAKwH,SAAS,CAAC,WAAIK,GAAU,OAAOf,EAAe9G,KAAK0H,MAAM,CAAC,eAAII,GAAc,IAAItK,EAAEiJ,EAAgBzG,KAAK0H,OAAO,MAAM,QAAQlK,EAAEE,OAAO,eAAesC,KAAK2H,QAAQI,iBAAiB/H,KAAK2H,QAAQI,gBAAgB,kBAAkBvK,EAAEwK,aAAa,CAAC,WAAIC,GAAU,OAAO5H,QAAQ6H,KAAK,sIAAsIlI,KAAK8H,WAAW,CAAC,gBAAIK,GAAe,OAAO9H,QAAQ6H,KAAK,4IAA4I,QAAQzB,EAAgBzG,KAAK0H,OAAOhK,OAAOsC,KAAK8H,WAAW,CAAC,IAAAM,CAAK5K,EAAE8G,GAAGtE,KAAKuH,UAAU/J,GAAG,GAAGwC,KAAKwH,UAAUlD,GAAG,KAAKtE,KAAKqI,eAAe,CAAC,KAAA9H,GAAQP,KAAKuH,UAAU,GAAGvH,KAAKwH,UAAU,KAAKxH,KAAKqI,eAAe,CAAC,cAAAC,CAAe9K,EAAE8G,EAAExB,GAAG,MAAMyB,EAAp1H,SAAqB/G,GAAK,MAAM+G,EAAE,GAAG,GAAG,iBAAiB/G,EAAE,OAAO+G,EAAE,MAAMzB,EAAEY,OAAOe,OAAO,CAAA,EAAM,IAAI8D,QAAQrC,EAAc,IAAI1B,EAAE,EAAE,KAAKA,EAAEhH,EAAEmD,QAAQ,CAAC,MAAM2D,EAAE9G,EAAEkD,QAAQ,IAAI8D,GAAG,IAAG,IAAKF,EAAE,MAAM,IAAII,EAAElH,EAAEkD,QAAQ,IAAI8D,GAAG,QAAQE,EAAEA,EAAElH,EAAEmD,YAAY,GAAG+D,EAAEJ,EAAE,CAACE,EAAEhH,EAAEgL,YAAY,IAAIlE,EAAE,GAAG,EAAE,QAAQ,CAAC,MAAMS,EAAEvH,EAAEoJ,MAAMpC,EAAEF,GAAGmE,OAAO,QAAG,IAASlE,EAAEQ,GAAG,CAAC,IAAIP,EAAEhH,EAAEoJ,MAAMtC,EAAE,EAAEI,GAAG+D,OAAO,KAAKjE,EAAEmC,WAAW,KAAKnC,EAAEA,EAAEoC,MAAM,OAAO,IAAIrC,EAAEQ,GAAGjC,EAAE0B,EAAE,CAAC,MAAMhH,GAAG+G,EAAEQ,GAAGP,CAAC,CAAC,CAACA,EAAEE,EAAE,CAAC,CAAC,OAAOH,CAAC,CAA65GmE,CAAYlL,GAAG,IAAI8G,IAAI,GAAG,IAAIE,EAAE,CAAA,EAAG,IAAIA,EAAExC,KAAKC,MAAMsC,IAAI,cAAcC,GAAG,iBAAiBA,GAAGmE,MAAMC,QAAQpE,MAAMA,EAAE,GAAG,CAAC,MAAMhH,GAAG,CAACwC,KAAKoI,KAAK5D,EAAEkD,OAAO,GAAGlD,EAAEmD,QAAQnD,EAAEoD,OAAO,KAAK,CAAC,cAAAiB,CAAerL,EAAE8G,EAAExB,GAAG,MAAMyB,EAAE,CAACuB,QAAO,EAAGG,UAAS,EAAGJ,UAAS,EAAGN,KAAK,KAAKf,EAAEiC,EAAgBzG,KAAK0H,OAAOnD,EAAEiB,QAAQhB,GAAGwC,IAAI,IAAIvF,KAAK,IAAI+C,EAAEwC,KAAK,IAAIvF,KAAK,cAAcjE,EAAEkG,OAAOe,OAAO,GAAGF,EAAE/G,GAAG,MAAMkH,EAAE,CAACgD,MAAM1H,KAAK0H,MAAMC,OAAO3H,KAAK2H,OAAO3F,KAAKC,MAAMD,KAAKW,UAAU3C,KAAK2H,SAAS,MAAM,IAAI5C,EAAEV,EAAgBC,EAAEtC,KAAKW,UAAU+B,GAAGlH,GAAG,MAAMwH,EAAE,oBAAoB8D,KAAK,IAAIA,KAAK,CAAC/D,IAAIgE,KAAKhE,EAAEpE,OAAO,GAAG+D,EAAEiD,QAAQ3C,EAAE,KAAK,CAACN,EAAEiD,OAAO,CAACqB,GAAGtE,EAAEiD,QAAQqB,GAAGC,MAAMvE,EAAEiD,QAAQsB,OAAO,MAAM1E,EAAE,CAAC,eAAe,iBAAiB,YAAY,IAAI,MAAM/G,KAAKwC,KAAK2H,OAAOpD,EAAEJ,SAAS3G,KAAKkH,EAAEiD,OAAOnK,GAAGwC,KAAK2H,OAAOnK,IAAIuH,EAAEV,EAAgBC,EAAEtC,KAAKW,UAAU+B,GAAGlH,EAAE,CAAC,OAAOuH,CAAC,CAAC,QAAAmE,CAAS1L,EAAE8G,GAAE,GAAI,OAAOtE,KAAKyH,mBAAmBvI,KAAK1B,GAAG8G,GAAG9G,EAAEwC,KAAK0H,MAAM1H,KAAK2H,QAAQ,KAAK,IAAI,IAAIrD,EAAEtE,KAAKyH,mBAAmB9G,OAAO,EAAE2D,GAAG,EAAEA,IAAI,GAAGtE,KAAKyH,mBAAmBnD,IAAI9G,EAAE,cAAcwC,KAAKyH,mBAAmBnD,QAAQtE,KAAKyH,mBAAmB9H,OAAO2E,EAAE,GAAG,CAAC,aAAA+D,GAAgB,IAAI,MAAM7K,KAAKwC,KAAKyH,mBAAmBjK,GAAGA,EAAEwC,KAAK0H,MAAM1H,KAAK2H,OAAO,EAAE,MAAMwB,UAAuB7B,EAAc,WAAAnE,CAAY3F,EAAE,mBAAmB4F,QAAQpD,KAAKoJ,gBAAgB,CAAA,EAAGpJ,KAAKqJ,WAAW7L,EAAEwC,KAAKsJ,mBAAmB,CAAC,SAAI5B,GAAQ,OAAO1H,KAAKuJ,YAAYvJ,KAAKqJ,aAAa,CAAA,GAAI3B,OAAO,EAAE,CAAC,UAAIC,GAAS,MAAMnK,EAAEwC,KAAKuJ,YAAYvJ,KAAKqJ,aAAa,GAAG,OAAO7L,EAAEmK,QAAQnK,EAAEoK,OAAO,IAAI,CAAC,SAAIA,GAAQ,OAAO5H,KAAK2H,MAAM,CAAC,IAAAS,CAAK5K,EAAE8G,GAAGtE,KAAKwJ,YAAYxJ,KAAKqJ,WAAW,CAAC3B,MAAMlK,EAAEmK,OAAOrD,IAAIlB,MAAMgF,KAAK5K,EAAE8G,EAAE,CAAC,KAAA/D,GAAQP,KAAKyJ,eAAezJ,KAAKqJ,YAAYjG,MAAM7C,OAAO,CAAC,WAAAgJ,CAAY/L,GAAG,GAAG,oBAAoB2D,QAAQA,QAAQE,aAAa,CAAC,MAAMiD,EAAEnD,OAAOE,aAAaU,QAAQvE,IAAI,GAAG,IAAI,OAAOwE,KAAKC,MAAMqC,EAAE,CAAC,MAAM9G,GAAG,OAAO8G,CAAC,CAAC,CAAC,OAAOtE,KAAKoJ,gBAAgB5L,EAAE,CAAC,WAAAgM,CAAYhM,EAAE8G,GAAG,GAAG,oBAAoBnD,QAAQA,QAAQE,aAAa,CAAC,IAAIkD,EAAED,EAAE,iBAAiBA,IAAIC,EAAEvC,KAAKW,UAAU2B,IAAInD,OAAOE,aAAaqB,QAAQlF,EAAE+G,EAAE,MAAMvE,KAAKoJ,gBAAgB5L,GAAG8G,CAAC,CAAC,cAAAmF,CAAejM,GAAG,oBAAoB2D,QAAQA,QAAQE,cAAcF,OAAOE,cAAcc,WAAW3E,UAAUwC,KAAKoJ,gBAAgB5L,EAAE,CAAC,iBAAA8L,GAAoB,oBAAoBnI,QAAQA,QAAQE,cAAcF,OAAOjD,kBAAkBiD,OAAOjD,iBAAiB,UAAWV,IAAI,GAAGA,EAAEoE,KAAK5B,KAAKqJ,WAAW,OAAO,MAAM/E,EAAEtE,KAAKuJ,YAAYvJ,KAAKqJ,aAAa,CAAA,EAAGjG,MAAMgF,KAAK9D,EAAEoD,OAAO,GAAGpD,EAAEqD,QAAQrD,EAAEsD,OAAO,KAAM,EAAE,EAAE,MAAM8B,EAAY,WAAAvG,CAAY3F,GAAGwC,KAAK2J,OAAOnM,CAAC,EAAE,MAAMoM,UAAwBF,EAAY,YAAMG,CAAOrM,GAAG,OAAOA,EAAEkG,OAAOe,OAAO,CAACqF,OAAO,OAAOtM,GAAGwC,KAAK2J,OAAOI,KAAK,gBAAgBvM,EAAE,CAAC,YAAMwM,CAAOxM,EAAE8G,GAAG,OAAOA,EAAEZ,OAAOe,OAAO,CAACqF,OAAO,QAAQG,KAAKzM,GAAG8G,GAAGtE,KAAK2J,OAAOI,KAAK,gBAAgBzF,EAAE,CAAC,YAAM4F,CAAO1M,EAAE,UAAU8G,GAAG,OAAOA,EAAEZ,OAAOe,OAAO,CAACqF,OAAO,OAAOG,KAAK,CAACE,WAAW3M,IAAI8G,GAAGtE,KAAK2J,OAAOI,KAAK,wBAAwBzF,GAAG8F,KAAI,KAAM,EAAI,CAAC,eAAMC,CAAU7M,EAAE8G,EAAEC,EAAEzB,GAAG,OAAOA,EAAEY,OAAOe,OAAO,CAACqF,OAAO,OAAOG,KAAK,CAAChB,MAAM3E,EAAEgG,SAAS/F,EAAErH,WAAWM,IAAIsF,GAAG9C,KAAK2J,OAAOI,KAAK,2BAA2BjH,GAAGsH,KAAI,KAAM,EAAI,CAAC,+BAAMG,CAA0B/M,EAAE8G,EAAEC,EAAEzB,EAAE0B,EAAEE,GAAG,OAAOA,EAAEhB,OAAOe,OAAO,CAACqF,OAAO,OAAOG,KAAK,CAACO,SAAShN,EAAEiN,OAAOnG,EAAEoG,MAAMnG,EAAEoG,WAAW7H,EAAE8H,SAASpG,IAAIE,GAAG1E,KAAK2J,OAAOI,KAAK,6CAA6CrF,EAAE,EAAE,MAAMF,EAAE,CAAC,aAAa,aAAa,cAAc,QAAQ,UAAU,OAAO,QAAQ,SAAS,QAAQ,cAAc,UAAU,YAAY,YAAY,SAAS,OAAO,WAAW,WAAW,iBAAiB,SAAS,UAAU,SAASqG,EAA4BrN,GAAG,GAAGA,EAAE,CAACA,EAAEsN,MAAMtN,EAAEsN,OAAO,CAAA,EAAG,IAAI,IAAIxG,KAAK9G,EAAEgH,EAAEL,SAASG,KAAK9G,EAAEsN,MAAMxG,GAAG9G,EAAE8G,UAAU9G,EAAE8G,GAAG,CAAC,CAAC,SAASyG,EAAqBvN,GAAG,MAAM8G,EAAE,GAAG,IAAI,MAAMC,KAAK/G,EAAE,CAAC,MAAMsF,EAAEsD,mBAAmB7B,GAAGC,EAAEmE,MAAMC,QAAQpL,EAAE+G,IAAI/G,EAAE+G,GAAG,CAAC/G,EAAE+G,IAAI,IAAI,IAAI/G,KAAKgH,EAAEhH,EAAEwN,EAAuBxN,GAAG,OAAOA,GAAG8G,EAAEpF,KAAK4D,EAAE,IAAItF,EAAE,CAAC,OAAO8G,EAAEuC,KAAK,IAAI,CAAC,SAASmE,EAAuBxN,GAAG,OAAO,MAAMA,EAAE,KAAKA,aAAaiE,KAAK2E,mBAAmB5I,EAAEyN,cAAc9D,QAAQ,IAAI,MAAM,iBAAiB3J,EAAE4I,mBAAmBpE,KAAKW,UAAUnF,IAAI4I,mBAAmB5I,EAAE,CAAC,MAAM0N,UAAwBxB,EAAY,WAAAvG,GAAcC,SAAS+H,WAAWnL,KAAKwK,SAAS,GAAGxK,KAAKoL,YAAY,KAAKpL,KAAKqL,cAAc,CAAA,EAAGrL,KAAKsL,sBAAsB,GAAGtL,KAAKuL,kBAAkB,KAAKvL,KAAKwL,kBAAkB,EAAExL,KAAKyL,qBAAqB,IAAIzL,KAAK0L,6BAA6B,CAAC,IAAI,IAAI,IAAI,IAAI,KAAK,KAAK,KAAK1L,KAAK2L,gBAAgB,EAAE,CAAC,eAAIC,GAAc,QAAQ5L,KAAKoL,eAAepL,KAAKwK,WAAWxK,KAAK2L,gBAAgBhL,MAAM,CAAC,eAAMkL,CAAUrO,EAAE8G,EAAEC,GAAG,IAAI/G,EAAE,MAAM,IAAI0F,MAAM,sBAAsB,IAAIJ,EAAEtF,EAAE,GAAG+G,EAAE,CAACsG,EAA4BtG,EAAEb,OAAOe,OAAO,GAAGF,IAAI,MAAM/G,EAAE,WAAW4I,mBAAmBpE,KAAKW,UAAU,CAACmI,MAAMvG,EAAEuG,MAAMgB,QAAQvH,EAAEuH,WAAWhJ,IAAIA,EAAEqB,SAAS,KAAK,IAAI,KAAK3G,CAAC,CAAC,MAAMuO,EAAS,SAASvO,GAAG,MAAM+G,EAAE/G,EAAE,IAAIsF,EAAE,IAAIA,EAAEd,KAAKC,MAAMsC,GAAGV,KAAK,CAAC,MAAM,CAACS,EAAExB,GAAG,CAAA,EAAG,EAAE,OAAO9C,KAAKqL,cAAcvI,KAAK9C,KAAKqL,cAAcvI,GAAG,IAAI9C,KAAKqL,cAAcvI,GAAG5D,KAAK6M,GAAU/L,KAAK4L,YAAY,IAAI5L,KAAKqL,cAAcvI,GAAGnC,aAAaX,KAAKgM,sBAAsBhM,KAAKoL,aAAalN,iBAAiB4E,EAAEiJ,SAAgB/L,KAAKiM,UAAUvN,SAASsB,KAAKkM,8BAA8B1O,EAAEuO,EAAS,CAAC,iBAAMI,CAAY3O,GAAG,IAAI8G,GAAE,EAAG,GAAG9G,EAAE,CAAC,MAAM+G,EAAEvE,KAAKoM,wBAAwB5O,GAAG,IAAI,IAAIA,KAAK+G,EAAE,GAAGvE,KAAKqM,yBAAyB7O,GAAG,CAAC,IAAI,IAAI8G,KAAKtE,KAAKqL,cAAc7N,GAAGwC,KAAKoL,aAAa5M,oBAAoBhB,EAAE8G,UAAUtE,KAAKqL,cAAc7N,GAAG8G,IAAIA,GAAE,EAAG,CAAC,MAAMtE,KAAKqL,cAAc,CAAA,EAAGrL,KAAKqM,2BAA2B/H,SAAStE,KAAKgM,sBAAsBhM,KAAKsM,YAAY,CAAC,yBAAMC,CAAoB/O,GAAG,IAAI8G,GAAE,EAAG,IAAI,IAAIC,KAAKvE,KAAKqL,cAAc,IAAI9G,EAAE,KAAKxB,WAAWvF,GAAG,CAAC8G,GAAE,EAAG,IAAI,IAAI9G,KAAKwC,KAAKqL,cAAc9G,GAAGvE,KAAKoL,aAAa5M,oBAAoB+F,EAAE/G,UAAUwC,KAAKqL,cAAc9G,EAAE,CAACD,IAAItE,KAAKqM,iCAAiCrM,KAAKgM,sBAAsBhM,KAAKsM,aAAa,CAAC,mCAAMJ,CAA8B1O,EAAE8G,GAAG,IAAIC,GAAE,EAAG,MAAMzB,EAAE9C,KAAKoM,wBAAwB5O,GAAG,IAAI,IAAIA,KAAKsF,EAAE,CAAC,IAAI6F,MAAMC,QAAQ5I,KAAKqL,cAAc7N,MAAMwC,KAAKqL,cAAc7N,GAAGmD,OAAO,SAAS,IAAImC,GAAE,EAAG,IAAI,IAAIyB,EAAEvE,KAAKqL,cAAc7N,GAAGmD,OAAO,EAAE4D,GAAG,EAAEA,IAAIvE,KAAKqL,cAAc7N,GAAG+G,KAAKD,IAAIxB,GAAE,SAAU9C,KAAKqL,cAAc7N,GAAG+G,GAAGvE,KAAKqL,cAAc7N,GAAGmC,OAAO4E,EAAE,GAAGvE,KAAKoL,aAAa5M,oBAAoBhB,EAAE8G,IAAIxB,IAAI9C,KAAKqL,cAAc7N,GAAGmD,eAAeX,KAAKqL,cAAc7N,GAAG+G,GAAGvE,KAAKqM,yBAAyB7O,KAAK+G,GAAE,GAAI,CAACvE,KAAKqM,2BAA2B9H,SAASvE,KAAKgM,sBAAsBhM,KAAKsM,YAAY,CAAC,wBAAAD,CAAyB7O,GAAG,GAAGwC,KAAKqL,cAAcrL,KAAKqL,eAAe,GAAG7N,EAAE,QAAQwC,KAAKqL,cAAc7N,IAAImD,OAAO,IAAI,IAAInD,KAAKwC,KAAKqL,cAAc,GAAGrL,KAAKqL,cAAc7N,IAAImD,OAAO,SAAS,QAAQ,CAAC,yBAAMqL,GAAsB,GAAGhM,KAAKwK,SAAS,OAAOxK,KAAKwM,8BAA8BxM,KAAKsL,sBAAsBtL,KAAKyM,8BAA8BzM,KAAK2J,OAAOI,KAAK,gBAAgB,CAACD,OAAO,OAAOG,KAAK,CAACO,SAASxK,KAAKwK,SAASa,cAAcrL,KAAKsL,uBAAuBoB,WAAW1M,KAAK2M,8BAA8BC,MAAOpP,IAAI,IAAIA,GAAGgG,QAAQ,MAAMhG,CAAE,EAAE,CAAC,yBAAAmP,GAA4B,MAAM,YAAY3M,KAAKwK,QAAQ,CAAC,uBAAA4B,CAAwB5O,GAAG,MAAM8G,EAAE,CAAA,EAAG9G,EAAEA,EAAE2G,SAAS,KAAK3G,EAAEA,EAAE,IAAI,IAAI,IAAI+G,KAAKvE,KAAKqL,eAAe9G,EAAE,KAAKxB,WAAWvF,KAAK8G,EAAEC,GAAGvE,KAAKqL,cAAc9G,IAAI,OAAOD,CAAC,CAAC,2BAAAmI,GAA8B,MAAMjP,EAAE,GAAG,IAAI,IAAI8G,KAAKtE,KAAKqL,cAAcrL,KAAKqL,cAAc/G,GAAG3D,QAAQnD,EAAE0B,KAAKoF,GAAG,OAAO9G,CAAC,CAAC,2BAAAgP,GAA8B,GAAGxM,KAAKoL,YAAY,CAACpL,KAAK6M,iCAAiC,IAAI,IAAIrP,KAAKwC,KAAKqL,cAAc,IAAI,IAAI/G,KAAKtE,KAAKqL,cAAc7N,GAAGwC,KAAKoL,YAAYlN,iBAAiBV,EAAE8G,EAAE,CAAC,CAAC,8BAAAuI,GAAiC,GAAG7M,KAAKoL,YAAY,IAAI,IAAI5N,KAAKwC,KAAKqL,cAAc,IAAI,IAAI/G,KAAKtE,KAAKqL,cAAc7N,GAAGwC,KAAKoL,YAAY5M,oBAAoBhB,EAAE8G,EAAE,CAAC,aAAM2H,GAAU,KAAKjM,KAAKwL,kBAAkB,GAAG,OAAO,IAAIsB,SAAUtP,EAAE8G,KAAKtE,KAAK2L,gBAAgBzM,KAAK,CAAC6N,QAAQvP,EAAEwP,OAAO1I,IAAItE,KAAK2L,gBAAgBhL,OAAO,GAAGX,KAAKiN,aAAc,EAAE,CAAC,WAAAA,GAAcjN,KAAKsM,YAAW,GAAIY,aAAalN,KAAKmN,kBAAkBnN,KAAKmN,iBAAiBC,gBAAiBpN,KAAKqN,oBAAoB,IAAInK,MAAM,sCAAuC,EAAElD,KAAKuL,mBAAmBvL,KAAKoL,YAAY,IAAIkC,YAAYtN,KAAK2J,OAAO4D,SAAS,kBAAkBvN,KAAKoL,YAAYoC,QAAQhQ,IAAIwC,KAAKqN,oBAAoB,IAAInK,MAAM,8CAA8ClD,KAAKoL,YAAYlN,iBAAiB,aAAcV,IAAI,MAAM8G,EAAE9G,EAAEwC,KAAKwK,SAASlG,GAAGmJ,YAAYzN,KAAKgM,sBAAsB5B,KAAI,UAAY,IAAI5M,EAAE,EAAE,KAAKwC,KAAK0N,0BAA0BlQ,EAAE,GAAGA,UAAUwC,KAAKgM,qBAAsB,GAAG5B,UAAW,IAAI,IAAI5M,KAAKwC,KAAK2L,gBAAgBnO,EAAEuP,UAAU/M,KAAK2L,gBAAgB,GAAG3L,KAAKwL,kBAAkB,EAAE0B,aAAalN,KAAK2N,oBAAoBT,aAAalN,KAAKmN,kBAAkB,MAAM7I,EAAEtE,KAAKoM,wBAAwB,cAAc,IAAI,IAAI7H,KAAKD,EAAE,IAAI,IAAIxB,KAAKwB,EAAEC,GAAGzB,EAAEtF,EAAG,GAAGoP,MAAOpP,IAAIwC,KAAKwK,SAAS,GAAGxK,KAAKqN,oBAAoB7P,EAAG,EAAG,EAAE,CAAC,sBAAAkQ,GAAyB,MAAMlQ,EAAEwC,KAAKyM,8BAA8B,GAAGjP,EAAEmD,QAAQX,KAAKsL,sBAAsB3K,OAAO,SAAS,IAAI,MAAM2D,KAAK9G,EAAE,IAAIwC,KAAKsL,sBAAsBnH,SAASG,GAAG,OAAM,EAAG,QAAQ,CAAC,mBAAA+I,CAAoB7P,GAAG,GAAG0P,aAAalN,KAAKmN,kBAAkBD,aAAalN,KAAK2N,qBAAqB3N,KAAKwK,WAAWxK,KAAKwL,mBAAmBxL,KAAKwL,kBAAkBxL,KAAKyL,qBAAqB,CAAC,IAAI,IAAInH,KAAKtE,KAAK2L,gBAAgBrH,EAAE0I,OAAO,IAAI/J,EAAoBzF,IAAI,OAAOwC,KAAK2L,gBAAgB,QAAQ3L,KAAKsM,YAAY,CAACtM,KAAKsM,YAAW,GAAI,MAAMhI,EAAEtE,KAAK0L,6BAA6B1L,KAAKwL,oBAAoBxL,KAAK0L,6BAA6B1L,KAAK0L,6BAA6B/K,OAAO,GAAGX,KAAKwL,oBAAoBxL,KAAK2N,mBAAmBP,gBAAiBpN,KAAKiN,aAAc,EAAE3I,EAAE,CAAC,UAAAgI,CAAW9O,GAAE,GAAI,GAAGwC,KAAKwK,UAAUxK,KAAK4N,cAAc5N,KAAK4N,aAAalK,OAAOqD,KAAK/G,KAAKqL,gBAAgB6B,aAAalN,KAAKmN,kBAAkBD,aAAalN,KAAK2N,oBAAoB3N,KAAK6M,iCAAiC7M,KAAK2J,OAAOkE,cAAc7N,KAAK2M,6BAA6B3M,KAAKoL,aAAa0C,QAAQ9N,KAAKoL,YAAY,KAAKpL,KAAKwK,SAAS,IAAIhN,EAAE,CAACwC,KAAKwL,kBAAkB,EAAE,IAAI,IAAIhO,KAAKwC,KAAK2L,gBAAgBnO,EAAEuP,UAAU/M,KAAK2L,gBAAgB,EAAE,CAAC,EAAE,MAAMoC,UAAoBrE,EAAY,MAAAnB,CAAO/K,GAAG,OAAOA,CAAC,CAAC,iBAAMwQ,CAAYxQ,EAAE8G,GAAG,GAAG,iBAAiB9G,EAAE,OAAOwC,KAAKiO,aAAazQ,EAAE8G,GAAG,IAAIC,EAAE,IAAI,OAAOD,EAAEZ,OAAOe,OAAO,GAAGjH,EAAE8G,IAAI4J,QAAQ3J,EAAED,EAAE4J,aAAa5J,EAAE4J,OAAOlO,KAAKiO,aAAa1J,EAAED,EAAE,CAAC,aAAM6J,CAAQ3Q,EAAE,EAAE8G,EAAE,GAAGC,GAAG,OAAOA,EAAEb,OAAOe,OAAO,CAACqF,OAAO,OAAOvF,IAAIuG,MAAMpH,OAAOe,OAAO,CAAC2J,KAAK5Q,EAAE6Q,QAAQ/J,GAAGC,EAAEuG,OAAO9K,KAAK2J,OAAOI,KAAK/J,KAAKsO,aAAa/J,GAAG6F,KAAM5M,IAAIA,EAAE+Q,MAAM/Q,EAAE+Q,OAAOzN,IAAKtD,GAAGwC,KAAKuI,OAAO/K,KAAM,GAAGA,GAAI,CAAC,sBAAMgR,CAAiBhR,EAAE8G,GAAG,OAAOA,EAAEZ,OAAOe,OAAO,CAACiI,WAAW,iBAAiB1M,KAAKsO,aAAa,IAAI9Q,GAAG8G,IAAIwG,MAAMpH,OAAOe,OAAO,CAAChE,OAAOjD,EAAEiR,UAAU,GAAGnK,EAAEwG,OAAO9K,KAAKmO,QAAQ,EAAE,EAAE7J,GAAG8F,KAAM5M,IAAI,IAAIA,GAAG+Q,OAAO5N,OAAO,MAAM,IAAIsC,EAAoB,CAACK,OAAO,IAAIC,SAAS,CAACS,KAAK,IAAIC,QAAQ,uCAAuCJ,KAAK,CAAA,KAAM,OAAOrG,EAAE+Q,MAAM,EAAG,EAAE,CAAC,YAAMG,CAAOlR,EAAE8G,GAAG,IAAI9G,EAAE,MAAM,IAAIyF,EAAoB,CAACI,IAAIrD,KAAK2J,OAAO4D,SAASvN,KAAKsO,aAAa,KAAKhL,OAAO,IAAIC,SAAS,CAACS,KAAK,IAAIC,QAAQ,8BAA8BJ,KAAK,MAAM,OAAOS,EAAEZ,OAAOe,OAAO,CAACqF,OAAO,OAAOxF,GAAGtE,KAAK2J,OAAOI,KAAK/J,KAAKsO,aAAa,IAAIlI,mBAAmB5I,GAAG8G,GAAG8F,KAAM5M,GAAGwC,KAAKuI,OAAO/K,GAAI,CAAC,YAAMmR,CAAOnR,EAAE8G,GAAG,OAAOA,EAAEZ,OAAOe,OAAO,CAACqF,OAAO,OAAOG,KAAKzM,GAAG8G,GAAGtE,KAAK2J,OAAOI,KAAK/J,KAAKsO,aAAahK,GAAG8F,KAAM5M,GAAGwC,KAAKuI,OAAO/K,GAAI,CAAC,YAAMwM,CAAOxM,EAAE8G,EAAEC,GAAG,OAAOA,EAAEb,OAAOe,OAAO,CAACqF,OAAO,QAAQG,KAAK3F,GAAGC,GAAGvE,KAAK2J,OAAOI,KAAK/J,KAAKsO,aAAa,IAAIlI,mBAAmB5I,GAAG+G,GAAG6F,KAAM5M,GAAGwC,KAAKuI,OAAO/K,GAAI,CAAC,YAAM,CAAOA,EAAE8G,GAAG,OAAOA,EAAEZ,OAAOe,OAAO,CAACqF,OAAO,UAAUxF,GAAGtE,KAAK2J,OAAOI,KAAK/J,KAAKsO,aAAa,IAAIlI,mBAAmB5I,GAAG8G,GAAG8F,KAAI,KAAM,EAAI,CAAC,YAAA6D,CAAazQ,EAAE,IAAI8G,IAAIA,EAAEA,GAAG,IAAIwG,MAAMpH,OAAOe,OAAO,CAACgK,UAAU,GAAGnK,EAAEwG,OAAO,IAAIvG,EAAE,GAAGqK,EAAQlQ,SAASsB,KAAKmO,QAAQrL,EAAEtF,GAAG,IAAI8G,GAAG8F,KAAM5M,IAAI,MAAM8G,EAAE9G,EAAE+Q,MAAM,OAAOhK,EAAEA,EAAEsK,OAAOvK,GAAGA,EAAE3D,QAAQnD,EAAE6Q,QAAQO,EAAQ9L,EAAE,GAAGyB,CAAE,GAAG,OAAOqK,EAAQ,EAAE,EAAE,SAASE,EAA2BtR,EAAE8G,EAAEC,EAAEzB,GAAG,MAAM0B,OAAE,IAAS1B,EAAE,OAAO0B,QAAG,IAASD,EAAEC,GAAGnE,QAAQ6H,KAAK1K,GAAG8G,EAAE2F,KAAKvG,OAAOe,OAAO,CAAA,EAAGH,EAAE2F,KAAK1F,GAAGD,EAAEwG,MAAMpH,OAAOe,OAAO,GAAGH,EAAEwG,MAAMhI,GAAGwB,GAAGZ,OAAOe,OAAOH,EAAEC,GAAGD,CAAC,CAAC,SAASyK,EAAiBvR,GAAGA,EAAEwR,qBAAqB,CAAC,MAAMC,UAAsBlB,EAAY,WAAA5K,CAAY3F,EAAE8G,GAAGlB,MAAM5F,GAAGwC,KAAKkP,mBAAmB5K,CAAC,CAAC,gBAAIgK,GAAe,OAAOtO,KAAKmP,mBAAmB,UAAU,CAAC,sBAAIA,GAAqB,MAAM,oBAAoB/I,mBAAmBpG,KAAKkP,mBAAmB,CAAC,gBAAIE,GAAe,MAAM,eAAepP,KAAKkP,oBAAoB,mBAAmBlP,KAAKkP,kBAAkB,CAAC,eAAMrD,CAAUrO,EAAE8G,EAAEC,GAAG,IAAI/G,EAAE,MAAM,IAAI0F,MAAM,kBAAkB,IAAIoB,EAAE,MAAM,IAAIpB,MAAM,kCAAkC,OAAOlD,KAAK2J,OAAO0F,SAASxD,UAAU7L,KAAKkP,mBAAmB,IAAI1R,EAAE8G,EAAEC,EAAE,CAAC,iBAAM4H,CAAY3O,GAAG,OAAOA,EAAEwC,KAAK2J,OAAO0F,SAASlD,YAAYnM,KAAKkP,mBAAmB,IAAI1R,GAAGwC,KAAK2J,OAAO0F,SAAS9C,oBAAoBvM,KAAKkP,mBAAmB,CAAC,iBAAMlB,CAAYxQ,EAAE8G,GAAG,GAAG,iBAAiB9G,EAAE,OAAO4F,MAAM4K,YAAYxQ,EAAE8G,GAAG,MAAMC,EAAEb,OAAOe,OAAO,CAAA,EAAGjH,EAAE8G,GAAG,OAAOlB,MAAM4K,YAAYzJ,EAAE,CAAC,aAAM4J,CAAQ3Q,EAAE,EAAE8G,EAAE,GAAGC,GAAG,OAAOnB,MAAM+K,QAAQ3Q,EAAE8G,EAAEC,EAAE,CAAC,sBAAMiK,CAAiBhR,EAAE8G,GAAG,OAAOlB,MAAMoL,iBAAiBhR,EAAE8G,EAAE,CAAC,YAAMoK,CAAOlR,EAAE8G,GAAG,OAAOlB,MAAMsL,OAAOlR,EAAE8G,EAAE,CAAC,YAAMqK,CAAOnR,EAAE8G,GAAG,OAAOlB,MAAMuL,OAAOnR,EAAE8G,EAAE,CAAC,YAAM0F,CAAOxM,EAAE8G,EAAEC,GAAG,OAAOnB,MAAM4G,OAAOxM,EAAE8G,EAAEC,GAAG6F,KAAM5M,IAAI,GAAGwC,KAAK2J,OAAO2F,UAAU3H,QAAQqB,KAAKxL,GAAGwL,KAAKhJ,KAAK2J,OAAO2F,UAAU3H,QAAQK,eAAehI,KAAKkP,oBAAoBlP,KAAK2J,OAAO2F,UAAU3H,QAAQI,iBAAiB/H,KAAKkP,oBAAoB,CAAC,IAAI5K,EAAEZ,OAAOe,OAAO,CAAA,EAAGzE,KAAK2J,OAAO2F,UAAU3H,OAAO4H,QAAQhL,EAAEb,OAAOe,OAAO,CAAA,EAAGzE,KAAK2J,OAAO2F,UAAU3H,OAAOnK,GAAG8G,IAAIC,EAAEgL,OAAO7L,OAAOe,OAAOH,EAAE9G,EAAE+R,SAASvP,KAAK2J,OAAO2F,UAAUlH,KAAKpI,KAAK2J,OAAO2F,UAAU5H,MAAMnD,EAAE,CAAC,OAAO/G,CAAE,EAAE,CAAC,YAAM,CAAOA,EAAE8G,GAAG,OAAOlB,MAAM3E,OAAOjB,EAAE8G,GAAG8F,KAAM9F,KAAKA,GAAGtE,KAAK2J,OAAO2F,UAAU3H,QAAQqB,KAAKxL,GAAGwC,KAAK2J,OAAO2F,UAAU3H,QAAQK,eAAehI,KAAKkP,oBAAoBlP,KAAK2J,OAAO2F,UAAU3H,QAAQI,iBAAiB/H,KAAKkP,oBAAoBlP,KAAK2J,OAAO2F,UAAU/O,QAAQ+D,GAAI,CAAC,YAAAkL,CAAahS,GAAG,MAAM8G,EAAEtE,KAAKuI,OAAO/K,GAAGmK,QAAQ,IAAI,OAAO3H,KAAK2J,OAAO2F,UAAUlH,KAAK5K,GAAGkK,MAAMpD,GAAGZ,OAAOe,OAAO,GAAGjH,EAAE,CAACkK,MAAMlK,GAAGkK,OAAO,GAAGC,OAAOrD,GAAG,CAAC,qBAAMmL,CAAgBjS,GAAG,OAAOA,EAAEkG,OAAOe,OAAO,CAACqF,OAAO,MAAM4F,OAAO,2BAA2BlS,GAAGwC,KAAK2J,OAAOI,KAAK/J,KAAKmP,mBAAmB,gBAAgB3R,EAAE,CAAC,sBAAMmS,CAAiBnS,EAAE8G,EAAEC,GAAG,IAAIzB,EAAEyB,EAAEb,OAAOe,OAAO,CAACqF,OAAO,OAAOG,KAAK,CAAC2F,SAASpS,EAAEqS,SAASvL,IAAIC,GAAGvE,KAAKoP,eAAetM,EAAEyB,EAAEuL,4BAA4BvL,EAAEuL,qBAAqBvL,EAAEwL,aAAahB,EAAiB/O,KAAK2J,SAAS,IAAInF,QAAQxE,KAAK2J,OAAOI,KAAK/J,KAAKmP,mBAAmB,sBAAsB5K,GAAG,OAAOC,EAAExE,KAAKwP,aAAahL,GAAG1B,GAAG9C,KAAKoP,cAAc,SAA6B5R,EAAE8G,EAAEC,EAAEzB,GAAGiM,EAAiBvR,GAAG,MAAMgH,EAAEhH,EAAEwS,WAAWtL,EAAElH,EAAE8R,UAAU3H,OAAO5C,EAAEvH,EAAE8R,UAAUpG,UAAW5E,EAAEC,OAAOD,GAAGC,GAAGyE,IAAItE,GAAGsE,KAAKzE,GAAGyD,cAActD,GAAGsD,eAAezD,GAAGyD,cAActD,GAAGsD,eAAe+G,EAAiBvR,EAAG,GAAGA,EAAEwR,kBAAkB,WAAWjK,IAAIvH,EAAEwS,WAAWxL,SAAShH,EAAEwR,iBAAiB,EAAExR,EAAEwS,WAAWtR,MAAMgG,EAAEK,KAAK,MAAMC,EAAExH,EAAE8R,UAAU5H,MAAM,GAAG3C,EAAE+F,OAAOiF,YAAY,OAAOvL,EAAEA,EAAEE,EAAEK,GAAG,CAAC1B,IAAIqB,EAAEuL,YAAYlL,GAAG,IAAImL,EAAE1S,EAAE8R,UAAUzH,QAAQ,GAAGqI,GAAGpJ,EAAetJ,EAAE8R,UAAU5H,MAAMpD,GAAG,UAAUC,GAAG,CAAC,MAAM/G,GAAG0S,GAAE,CAAE,CAACA,SAASpN,IAAI,MAAMxE,EAAEyG,EAAE+G,SAAS,GAAG,IAAI,IAAIxH,KAAKhG,EAAE,GAAG,iBAAiBgG,EAAE0B,eAAehB,GAAG1G,EAAEgG,IAAI9G,EAAE8R,UAAU5H,MAAM,CAACpJ,EAAEgG,GAAG9G,EAAE8R,UAAU5H,MAAM,KAAK,CAAC,OAAO3C,EAAE+G,QAAQxN,EAAEkG,EAAEA,EAAEE,EAAEK,GAAG,CAAC1B,IAAIqB,EAAEuL,YAAYlL,GAAG,CAAvtB,CAAytB/E,KAAK2J,OAAO7G,EAAC,IAAM9C,KAAKmQ,YAAY,CAACJ,aAAY,IAAI,IAAO/P,KAAK2P,iBAAiBnS,EAAE8G,EAAEZ,OAAOe,OAAO,CAACsL,aAAY,GAAIxL,KAAMC,CAAC,CAAC,wBAAM4L,CAAmB5S,EAAE8G,EAAEC,EAAEzB,EAAE0B,EAAEE,EAAEK,GAAG,IAAIC,EAAE,CAAC8E,OAAO,OAAOG,KAAK,CAACoG,SAAS7S,EAAEwG,KAAKM,EAAEgM,aAAa/L,EAAEgM,YAAYzN,EAAE0N,WAAWhM,IAAI,OAAOQ,EAAE8J,EAA2B,yOAAyO9J,EAAEN,EAAEK,GAAG/E,KAAK2J,OAAOI,KAAK/J,KAAKmP,mBAAmB,oBAAoBnK,GAAGoF,KAAM5M,GAAGwC,KAAKwP,aAAahS,GAAI,CAAC,cAAAiT,IAAkBjT,GAAG,GAAGA,EAAEmD,OAAO,GAAG,iBAAiBnD,IAAI,GAAG,OAAO6C,QAAQ6H,KAAK,4PAA4PlI,KAAKoQ,mBAAmB5S,IAAI,IAAI,GAAGA,IAAI,IAAI,GAAGA,IAAI,IAAI,GAAGA,IAAI,IAAI,GAAGA,IAAI,IAAI,GAAGA,IAAI,IAAI,CAAA,EAAGA,IAAI,IAAI,CAAA,GAAI,MAAM8G,EAAE9G,IAAI,IAAI,CAAA,EAAG,IAAI+G,EAAE,KAAKD,EAAEoM,cAAcnM,EAAEoM,OAAiB,IAAS,MAAM7N,EAAE,IAAIoI,EAAgBlL,KAAK2J,QAAQ,SAASiH,IAAUrM,GAAGuJ,QAAQhL,EAAEqJ,aAAa,CAAC,MAAM3H,EAAE,GAAGE,EAAEJ,EAAEoI,WAAW,OAAOhI,IAAIF,EAAEkI,WAAWhI,GAAG1E,KAAKyP,gBAAgBjL,GAAG4F,KAAM5M,IAAI,MAAMgH,EAAEhH,EAAEqT,OAAOC,UAAUC,KAAMvT,GAAGA,EAAEuG,OAAOO,EAAE+L,UAAW,IAAI7L,EAAE,MAAM,IAAIvB,EAAoB,IAAIC,MAAM,gCAAgCoB,EAAE+L,eAAe,MAAMtL,EAAE/E,KAAK2J,OAAO4D,SAAS,wBAAwBvI,EAAEN,EAAE1E,KAAK2J,OAAOqH,oBAAoBtM,QAAG,EAAO,OAAOM,IAAIA,EAAEiM,OAAOC,QAAQ,KAAKN,MAAY,IAAI9D,QAAO,MAAQtP,EAAEkH,KAAK,UAAU5B,EAAE+I,UAAU,gBAAWnN,IAAU,MAAMwR,EAAEpN,EAAE0H,SAAS,IAAI,IAAIjG,EAAEnC,OAAO8N,IAAI3L,EAAEnC,MAAM,MAAM,IAAIc,MAAM,iCAAiC,GAAGqB,EAAEjE,QAAQiE,EAAEP,KAAK,MAAM,IAAId,MAAM,0CAA0CqB,EAAEjE,OAAO,MAAMwC,EAAEY,OAAOe,OAAO,GAAGH,UAAUxB,EAAEuN,gBAAgBvN,EAAEqO,cAAcrO,EAAE0N,kBAAkB1N,EAAE4N,YAAY1L,GAAGiM,QAAQC,UAAUlM,EAAEiM,OAAOC,QAAQ,MAAM,MAAMxM,QAAQ1E,KAAKoQ,mBAAmB5L,EAAET,KAAKQ,EAAEP,KAAKQ,EAAE8L,aAAavL,EAAET,EAAEkM,WAAW1N,GAAGtF,EAAEkH,EAAE,CAAC,MAAMlH,GAAGkH,EAAE,IAAIzB,EAAoBzF,GAAG,CAACoT,GAAU,GAAG,MAAMV,EAAE,CAAC9N,MAAMU,EAAE0H,UAAUlG,EAAE6M,QAAQxQ,SAASuP,EAAEkB,MAAM9M,EAAE6M,OAAOtK,KAAK,MAAM,MAAMvI,EAAE0B,KAAKqR,oBAAoB7M,EAAE8M,QAAQvM,EAAEmL,GAAG,IAAIqB,EAAEjN,EAAEoM,aAAa,SAASlT,GAAG+G,EAAEA,EAAEiN,SAASC,KAAKjU,EAAE+G,EAAEoM,EAAiBnT,EAAE,QAAQ+T,EAAEjT,EAAE,CAAC,MAAMd,GAAGoT,IAAUlM,EAAE,IAAIzB,EAAoBzF,GAAG,CAAE,EAAG,GAAGoP,MAAOpP,IAAI,MAAMoT,IAAUpT,CAAE,EAAE,CAAC,iBAAM2S,CAAY3S,EAAE8G,GAAG,IAAIC,EAAE,CAACuF,OAAO,QAAQ,OAAOvF,EAAEuK,EAA2B,2GAA2GvK,EAAE/G,EAAE8G,GAAGtE,KAAK2J,OAAOI,KAAK/J,KAAKmP,mBAAmB,gBAAgB5K,GAAG6F,KAAM5M,GAAGwC,KAAKwP,aAAahS,GAAI,CAAC,0BAAMkU,CAAqBlU,EAAE8G,EAAEC,GAAG,IAAIzB,EAAE,CAACgH,OAAO,OAAOG,KAAK,CAAChB,MAAMzL,IAAI,OAAOsF,EAAEgM,EAA2B,2IAA2IhM,EAAEwB,EAAEC,GAAGvE,KAAK2J,OAAOI,KAAK/J,KAAKmP,mBAAmB,0BAA0BrM,GAAGsH,KAAI,KAAM,EAAI,CAAC,0BAAMuH,CAAqBnU,EAAE8G,EAAEC,EAAEzB,EAAE0B,GAAG,IAAIE,EAAE,CAACoF,OAAO,OAAOG,KAAK,CAACvC,MAAMlK,EAAEqS,SAASvL,EAAEsN,gBAAgBrN,IAAI,OAAOG,EAAEoK,EAA2B,iMAAiMpK,EAAE5B,EAAE0B,GAAGxE,KAAK2J,OAAOI,KAAK/J,KAAKmP,mBAAmB,0BAA0BzK,GAAG0F,KAAI,KAAM,EAAI,CAAC,yBAAMyH,CAAoBrU,EAAE8G,EAAEC,GAAG,IAAIzB,EAAE,CAACgH,OAAO,OAAOG,KAAK,CAAChB,MAAMzL,IAAI,OAAOsF,EAAEgM,EAA2B,yIAAyIhM,EAAEwB,EAAEC,GAAGvE,KAAK2J,OAAOI,KAAK/J,KAAKmP,mBAAmB,wBAAwBrM,GAAGsH,KAAI,KAAM,EAAI,CAAC,yBAAM0H,CAAoBtU,EAAE8G,EAAEC,GAAG,IAAIzB,EAAE,CAACgH,OAAO,OAAOG,KAAK,CAACvC,MAAMlK,IAAI,OAAOsF,EAAEgM,EAA2B,yIAAyIhM,EAAEwB,EAAEC,GAAGvE,KAAK2J,OAAOI,KAAK/J,KAAKmP,mBAAmB,wBAAwBrM,GAAGsH,UAAW,MAAM9F,EAAEmC,EAAgBjJ,GAAG+G,EAAEvE,KAAK2J,OAAO2F,UAAU3H,OAAO,OAAOpD,IAAIA,EAAEwN,UAAUxN,EAAEyE,KAAK1E,EAAE0E,IAAIzE,EAAEyD,eAAe1D,EAAE0D,eAAezD,EAAEwN,UAAS,EAAG/R,KAAK2J,OAAO2F,UAAUlH,KAAKpI,KAAK2J,OAAO2F,UAAU5H,MAAMnD,KAAI,CAAG,EAAE,CAAC,wBAAMyN,CAAmBxU,EAAE8G,EAAEC,GAAG,IAAIzB,EAAE,CAACgH,OAAO,OAAOG,KAAK,CAACgI,SAASzU,IAAI,OAAOsF,EAAEgM,EAA2B,6IAA6IhM,EAAEwB,EAAEC,GAAGvE,KAAK2J,OAAOI,KAAK/J,KAAKmP,mBAAmB,wBAAwBrM,GAAGsH,UAAU,EAAI,CAAC,wBAAM8H,CAAmB1U,EAAE8G,EAAEC,EAAEzB,GAAG,IAAI0B,EAAE,CAACsF,OAAO,OAAOG,KAAK,CAACvC,MAAMlK,EAAEqS,SAASvL,IAAI,OAAOE,EAAEsK,EAA2B,2JAA2JtK,EAAED,EAAEzB,GAAG9C,KAAK2J,OAAOI,KAAK/J,KAAKmP,mBAAmB,wBAAwB3K,GAAG4F,KAAI,KAAO,MAAM9F,EAAEmC,EAAgBjJ,GAAG+G,EAAEvE,KAAK2J,OAAO2F,UAAU3H,OAAO,OAAOpD,GAAGA,EAAEyE,KAAK1E,EAAE0E,IAAIzE,EAAEyD,eAAe1D,EAAE0D,cAAchI,KAAK2J,OAAO2F,UAAU/O,SAAQ,CAAG,EAAE,CAAC,uBAAM4R,CAAkB3U,EAAE8G,GAAG,OAAOtE,KAAK2J,OAAOzM,WAAW,kBAAkB8Q,YAAYtK,OAAOe,OAAO,CAAA,EAAGH,EAAE,CAAC7D,OAAOT,KAAK2J,OAAOlJ,OAAO,oBAAoB,CAACuI,GAAGxL,MAAM,CAAC,wBAAM4U,CAAmB5U,EAAE8G,EAAEC,GAAG,MAAMzB,QAAQ9C,KAAK2J,OAAOzM,WAAW,kBAAkBsR,iBAAiBxO,KAAK2J,OAAOlJ,OAAO,oDAAoD,CAAC4R,SAAS7U,EAAE6S,SAAS/L,KAAK,OAAOtE,KAAK2J,OAAOzM,WAAW,kBAAkBuB,OAAOqE,EAAEkG,GAAGzE,GAAG6F,UAAU,EAAI,CAAC,gBAAMkI,CAAW9U,EAAE8G,GAAG,OAAOA,EAAEZ,OAAOe,OAAO,CAACqF,OAAO,OAAOG,KAAK,CAAChB,MAAMzL,IAAI8G,GAAGtE,KAAK2J,OAAOI,KAAK/J,KAAKmP,mBAAmB,eAAe7K,EAAE,CAAC,iBAAMiO,CAAY/U,EAAE8G,EAAEC,GAAG,OAAOA,EAAEb,OAAOe,OAAO,CAACqF,OAAO,OAAOG,KAAK,CAACuI,MAAMhV,EAAEqS,SAASvL,IAAIC,GAAGvE,KAAK2J,OAAOI,KAAK/J,KAAKmP,mBAAmB,iBAAiB5K,GAAG6F,KAAM5M,GAAGwC,KAAKwP,aAAahS,GAAI,CAAC,iBAAMiV,CAAYjV,EAAE8G,EAAEC,IAAIA,EAAEb,OAAOe,OAAO,CAACqF,OAAO,OAAOG,KAAK,CAACW,SAAStG,IAAIC,IAAIuH,QAAQvH,EAAEuH,SAAS,CAAA,EAAGvH,EAAEuH,QAAQ4G,gBAAgBnO,EAAEuH,QAAQ4G,cAAc1S,KAAK2J,OAAO2F,UAAU5H,OAAO,MAAM5E,EAAE,IAAI6P,GAAO3S,KAAK2J,OAAOiJ,QAAQ,IAAItL,EAActH,KAAK2J,OAAOkJ,MAAMrO,QAAQ1B,EAAEiH,KAAK/J,KAAKmP,mBAAmB,gBAAgB/I,mBAAmB5I,GAAG+G,GAAG,OAAOzB,EAAEwM,UAAUlH,KAAK5D,GAAGkD,MAAM1H,KAAKuI,OAAO/D,GAAGmD,QAAQ,CAAA,IAAK7E,CAAC,CAAC,mBAAAuO,CAAoB7T,EAAE8G,EAAE,CAAA,GAAI,IAAIC,EAAE/G,EAAEsF,EAAE,GAAGtF,EAAEkD,QAAQ,MAAM,IAAI6D,EAAE/G,EAAEsV,UAAU,EAAEtV,EAAEkD,QAAQ,MAAMoC,EAAEtF,EAAEsV,UAAUtV,EAAEkD,QAAQ,KAAK,IAAI,MAAM8D,EAAE,CAAA,EAAGE,EAAE5B,EAAE4D,MAAM,KAAK,IAAI,MAAMlJ,KAAKkH,EAAE,CAAC,GAAG,IAAIlH,EAAE,SAAS,MAAM8G,EAAE9G,EAAEkJ,MAAM,KAAKlC,EAAE2B,mBAAmB7B,EAAE,GAAG6C,QAAQ,MAAM,OAAOhB,oBAAoB7B,EAAE,IAAI,IAAI6C,QAAQ,MAAM,KAAK,CAAC,IAAI,IAAI3J,KAAK8G,EAAEA,EAAEyO,eAAevV,KAAK,MAAM8G,EAAE9G,UAAUgH,EAAEhH,GAAGgH,EAAEhH,GAAG8G,EAAE9G,IAAIsF,EAAE,GAAG,IAAI,IAAItF,KAAKgH,EAAEA,EAAEuO,eAAevV,KAAK,IAAIsF,IAAIA,GAAG,KAAKA,GAAGsD,mBAAmB5I,EAAE2J,QAAQ,OAAO,MAAM,IAAIf,mBAAmB5B,EAAEhH,GAAG2J,QAAQ,OAAO,OAAO,MAAM,IAAIrE,EAAEyB,EAAE,IAAIzB,EAAEyB,CAAC,EAAE,SAASoM,EAAiBnT,GAAG,GAAG,oBAAoB2D,SAASA,QAAQ6R,KAAK,MAAM,IAAI/P,EAAoB,IAAIC,MAAM,0EAA0E,IAAIoB,EAAE,KAAKC,EAAE,IAAIzB,EAAE3B,OAAO8R,WAAWzO,EAAErD,OAAO+R,YAAY5O,EAAEA,EAAExB,EAAEA,EAAEwB,EAAEC,EAAEA,EAAEC,EAAEA,EAAED,EAAE,IAAIG,EAAE5B,EAAE,EAAEwB,EAAE,EAAES,EAAEP,EAAE,EAAED,EAAE,EAAE,OAAOpD,OAAO6R,KAAKxV,EAAE,eAAe,SAAS8G,EAAE,WAAWC,EAAE,QAAQQ,EAAE,SAASL,EAAE,wBAAwB,CAAC,MAAMyO,UAA0BpF,EAAY,gBAAIO,GAAe,MAAM,kBAAkB,CAAC,YAAM8E,CAAO5V,EAAE8G,GAAE,EAAGC,GAAG,OAAOA,EAAEb,OAAOe,OAAO,CAACqF,OAAO,MAAMG,KAAK,CAACoJ,YAAY7V,EAAE8V,cAAchP,IAAIC,GAAGvE,KAAK2J,OAAOI,KAAK/J,KAAKsO,aAAa,UAAU/J,GAAG6F,UAAU,EAAI,CAAC,kBAAMmJ,CAAa/V,GAAG,OAAOA,EAAEkG,OAAOe,OAAO,CAACqF,OAAO,OAAOtM,GAAGwC,KAAK2J,OAAOI,KAAK/J,KAAKsO,aAAa,kBAAkB9Q,EAAE,CAAC,cAAMgW,CAAShW,EAAE8G,GAAG,OAAOA,EAAEZ,OAAOe,OAAO,CAACqF,OAAO,UAAUxF,GAAGtE,KAAK2J,OAAOI,KAAK/J,KAAKsO,aAAa,IAAIlI,mBAAmB5I,GAAG,YAAY8G,GAAG8F,KAAI,KAAM,EAAI,EAAE,MAAMqJ,UAAmB/J,EAAY,aAAMyE,CAAQ3Q,EAAE,EAAE8G,EAAE,GAAGC,GAAG,OAAOA,EAAEb,OAAOe,OAAO,CAACqF,OAAO,OAAOvF,IAAIuG,MAAMpH,OAAOe,OAAO,CAAC2J,KAAK5Q,EAAE6Q,QAAQ/J,GAAGC,EAAEuG,OAAO9K,KAAK2J,OAAOI,KAAK,YAAYxF,EAAE,CAAC,YAAMmK,CAAOlR,EAAE8G,GAAG,IAAI9G,EAAE,MAAM,IAAIyF,EAAoB,CAACI,IAAIrD,KAAK2J,OAAO4D,SAAS,cAAcjK,OAAO,IAAIC,SAAS,CAACS,KAAK,IAAIC,QAAQ,2BAA2BJ,KAAK,CAAA,KAAM,OAAOS,EAAEZ,OAAOe,OAAO,CAACqF,OAAO,OAAOxF,GAAGtE,KAAK2J,OAAOI,KAAK,aAAa3D,mBAAmB5I,GAAG8G,EAAE,CAAC,cAAMoP,CAASlW,GAAG,OAAOA,EAAEkG,OAAOe,OAAO,CAACqF,OAAO,OAAOtM,GAAGwC,KAAK2J,OAAOI,KAAK,kBAAkBvM,EAAE,EAAE,MAAMmW,UAAsBjK,EAAY,WAAMkK,CAAMpW,GAAG,OAAOA,EAAEkG,OAAOe,OAAO,CAACqF,OAAO,OAAOtM,GAAGwC,KAAK2J,OAAOI,KAAK,cAAcvM,EAAE,EAAE,MAAMqW,UAAoBnK,EAAY,MAAAoK,CAAOtW,EAAE8G,EAAEC,EAAE,CAAA,GAAI,OAAOlE,QAAQ6H,KAAK,2DAA2DlI,KAAK+T,OAAOvW,EAAE8G,EAAEC,EAAE,CAAC,MAAAwP,CAAOvW,EAAE8G,EAAEC,EAAE,CAAA,GAAI,IAAID,IAAI9G,GAAGwL,KAAKxL,GAAGwK,eAAexK,GAAGuK,eAAe,MAAM,GAAG,MAAMjF,EAAE,GAAGA,EAAE5D,KAAK,OAAO4D,EAAE5D,KAAK,SAAS4D,EAAE5D,KAAKkH,mBAAmB5I,EAAEwK,cAAcxK,EAAEuK,iBAAiBjF,EAAE5D,KAAKkH,mBAAmB5I,EAAEwL,KAAKlG,EAAE5D,KAAKkH,mBAAmB9B,IAAI,IAAIE,EAAExE,KAAK2J,OAAO4D,SAASzK,EAAE+D,KAAK,MAAM,GAAGnD,OAAOqD,KAAKxC,GAAG5D,OAAO,MAAM4D,EAAEyP,iBAAiBzP,EAAEyP,SAAS,MAAMxW,EAAE,IAAIyW,gBAAgB1P,GAAGC,IAAIA,EAAEL,SAAS,KAAK,IAAI,KAAK3G,CAAC,CAAC,OAAOgH,CAAC,CAAC,cAAM0P,CAAS1W,GAAG,OAAOA,EAAEkG,OAAOe,OAAO,CAACqF,OAAO,QAAQtM,GAAGwC,KAAK2J,OAAOI,KAAK,mBAAmBvM,GAAG4M,KAAM5M,GAAGA,GAAGkK,OAAO,GAAI,EAAE,MAAMyM,UAAsBzK,EAAY,iBAAMsE,CAAYxQ,GAAG,OAAOA,EAAEkG,OAAOe,OAAO,CAACqF,OAAO,OAAOtM,GAAGwC,KAAK2J,OAAOI,KAAK,eAAevM,EAAE,CAAC,YAAMmR,CAAOnR,EAAE8G,GAAG,OAAOA,EAAEZ,OAAOe,OAAO,CAACqF,OAAO,OAAOG,KAAK,CAAClG,KAAKvG,IAAI8G,GAAGtE,KAAK2J,OAAOI,KAAK,eAAezF,GAAG8F,KAAI,KAAM,EAAI,CAAC,YAAMgK,CAAO5W,EAAE8G,GAAG,OAAOA,EAAEZ,OAAOe,OAAO,CAACqF,OAAO,OAAOG,KAAKzM,GAAG8G,GAAGtE,KAAK2J,OAAOI,KAAK,sBAAsBzF,GAAG8F,KAAI,KAAM,EAAI,CAAC,YAAM,CAAO5M,EAAE8G,GAAG,OAAOA,EAAEZ,OAAOe,OAAO,CAACqF,OAAO,UAAUxF,GAAGtE,KAAK2J,OAAOI,KAAK,gBAAgB3D,mBAAmB5I,KAAK8G,GAAG8F,KAAI,KAAM,EAAI,CAAC,aAAMiK,CAAQ7W,EAAE8G,GAAG,OAAOA,EAAEZ,OAAOe,OAAO,CAACqF,OAAO,QAAQxF,GAAGtE,KAAK2J,OAAOI,KAAK,gBAAgB3D,mBAAmB5I,aAAa8G,GAAG8F,KAAI,KAAM,EAAI,CAAC,cAAAkK,CAAe9W,EAAE8G,GAAG,OAAOjE,QAAQ6H,KAAK,+EAA+ElI,KAAKuU,eAAe/W,EAAE8G,EAAE,CAAC,cAAAiQ,CAAe/W,EAAE8G,GAAG,OAAOtE,KAAK2J,OAAO4D,SAAS,gBAAgBnH,mBAAmB9B,YAAY8B,mBAAmB5I,KAAK,EAAE,MAAMgX,UAAoB9K,EAAY,iBAAMsE,CAAYxQ,GAAG,OAAOA,EAAEkG,OAAOe,OAAO,CAACqF,OAAO,OAAOtM,GAAGwC,KAAK2J,OAAOI,KAAK,aAAavM,EAAE,CAAC,SAAMiX,CAAIjX,EAAE8G,GAAG,OAAOA,EAAEZ,OAAOe,OAAO,CAACqF,OAAO,QAAQxF,GAAGtE,KAAK2J,OAAOI,KAAK,cAAc3D,mBAAmB5I,KAAK8G,GAAG8F,KAAI,KAAM,EAAI,EAAE,SAASsK,EAAOlX,GAAG,MAAM,oBAAoBsL,MAAMtL,aAAasL,MAAM,oBAAoB6L,MAAMnX,aAAamX,MAAM,OAAOnX,GAAG,iBAAiBA,GAAGA,EAAEoX,MAAM,oBAAoBvO,WAAW,gBAAgBA,UAAUC,SAAS,oBAAoBC,QAAQA,OAAOC,eAAe,CAAC,SAASqO,EAAWrX,GAAG,OAAOA,IAAI,aAAaA,EAAE2F,aAAaY,MAAM,oBAAoB+Q,UAAUtX,aAAasX,SAAS,CAAC,SAASC,EAAavX,GAAG,IAAI,MAAM8G,KAAK9G,EAAE,CAAC,MAAM+G,EAAEoE,MAAMC,QAAQpL,EAAE8G,IAAI9G,EAAE8G,GAAG,CAAC9G,EAAE8G,IAAI,IAAI,MAAM9G,KAAK+G,EAAE,GAAGmQ,EAAOlX,GAAG,OAAM,CAAE,CAAC,OAAM,CAAE,CAAC,MAAMkH,EAAE,cAAc,SAASsQ,EAAmBxX,GAAG,GAAG,iBAAiBA,EAAE,OAAOA,EAAE,GAAG,QAAQA,EAAE,OAAM,EAAG,GAAG,SAASA,EAAE,SAAS,IAAI,MAAMA,EAAE,IAAIA,EAAE,IAAI,KAAKA,EAAE,IAAI,MAAMkH,EAAEG,KAAKrH,GAAG,CAAC,IAAI8G,GAAG9G,EAAE,GAAG,GAAG8G,IAAI9G,EAAE,OAAO8G,CAAC,CAAC,OAAO9G,CAAC,CAAC,MAAMyX,UAAqBvL,EAAY,WAAAvG,GAAcC,SAAS+H,WAAWnL,KAAKkV,SAAS,GAAGlV,KAAKmV,KAAK,CAAA,CAAE,CAAC,UAAAjY,CAAWM,GAAG,OAAOwC,KAAKmV,KAAK3X,KAAKwC,KAAKmV,KAAK3X,GAAG,IAAI4X,GAAgBpV,KAAKkV,SAAS1X,IAAIwC,KAAKmV,KAAK3X,EAAE,CAAC,UAAMuM,CAAKvM,GAAG,MAAM8G,EAAE,IAAIwQ,SAASvQ,EAAE,GAAG,IAAI,IAAI/G,EAAE,EAAEA,EAAEwC,KAAKkV,SAASvU,OAAOnD,IAAI,CAAC,MAAMsF,EAAE9C,KAAKkV,SAAS1X,GAAG,GAAG+G,EAAErF,KAAK,CAAC4K,OAAOhH,EAAEgH,OAAOzG,IAAIP,EAAEO,IAAIyI,QAAQhJ,EAAEgJ,QAAQ7B,KAAKnH,EAAEuS,OAAOvS,EAAEwS,MAAM,IAAI,IAAI/Q,KAAKzB,EAAEwS,MAAM,CAAC,MAAM9Q,EAAE1B,EAAEwS,MAAM/Q,IAAI,GAAG,IAAI,IAAIzB,KAAK0B,EAAEF,EAAEiR,OAAO,YAAY/X,EAAE,IAAI+G,EAAEzB,EAAE,CAAC,CAAC,OAAOwB,EAAEiR,OAAO,eAAevT,KAAKW,UAAU,CAACuS,SAAS3Q,KAAK/G,EAAEkG,OAAOe,OAAO,CAACqF,OAAO,OAAOG,KAAK3F,GAAG9G,GAAGwC,KAAK2J,OAAOI,KAAK,aAAavM,EAAE,EAAE,MAAM4X,GAAgB,WAAAjS,CAAY3F,EAAE8G,GAAGtE,KAAKkV,SAAS,GAAGlV,KAAKkV,SAAS1X,EAAEwC,KAAKkP,mBAAmB5K,CAAC,CAAC,MAAAkR,CAAOhY,EAAE8G,GAAGA,EAAEZ,OAAOe,OAAO,CAACwF,KAAKzM,GAAG,CAAA,GAAI8G,GAAG,MAAMC,EAAE,CAACuF,OAAO,MAAMzG,IAAI,oBAAoB+C,mBAAmBpG,KAAKkP,oBAAoB,YAAYlP,KAAKyV,eAAelR,EAAED,GAAGtE,KAAKkV,SAAShW,KAAKqF,EAAE,CAAC,MAAAoK,CAAOnR,EAAE8G,GAAGA,EAAEZ,OAAOe,OAAO,CAACwF,KAAKzM,GAAG,IAAI8G,GAAG,MAAMC,EAAE,CAACuF,OAAO,OAAOzG,IAAI,oBAAoB+C,mBAAmBpG,KAAKkP,oBAAoB,YAAYlP,KAAKyV,eAAelR,EAAED,GAAGtE,KAAKkV,SAAShW,KAAKqF,EAAE,CAAC,MAAAyF,CAAOxM,EAAE8G,EAAEC,GAAGA,EAAEb,OAAOe,OAAO,CAACwF,KAAK3F,GAAG,IAAIC,GAAG,MAAMzB,EAAE,CAACgH,OAAO,QAAQzG,IAAI,oBAAoB+C,mBAAmBpG,KAAKkP,oBAAoB,YAAY9I,mBAAmB5I,IAAIwC,KAAKyV,eAAe3S,EAAEyB,GAAGvE,KAAKkV,SAAShW,KAAK4D,EAAE,CAAC,OAAOtF,EAAE8G,GAAGA,EAAEZ,OAAOe,OAAO,CAAA,EAAGH,GAAG,MAAMC,EAAE,CAACuF,OAAO,SAASzG,IAAI,oBAAoB+C,mBAAmBpG,KAAKkP,oBAAoB,YAAY9I,mBAAmB5I,IAAIwC,KAAKyV,eAAelR,EAAED,GAAGtE,KAAKkV,SAAShW,KAAKqF,EAAE,CAAC,cAAAkR,CAAejY,EAAE8G,GAAG,GAAGuG,EAA4BvG,GAAG9G,EAAEsO,QAAQxH,EAAEwH,QAAQtO,EAAE6X,KAAK,CAAA,EAAG7X,EAAE8X,MAAM,CAAA,OAAG,IAAShR,EAAEwG,MAAM,CAAC,MAAMvG,EAAEwG,EAAqBzG,EAAEwG,OAAOvG,IAAI/G,EAAE6F,MAAM7F,EAAE6F,IAAIc,SAAS,KAAK,IAAI,KAAKI,EAAE,CAAC,IAAIA,EAAED,EAAE2F,KAAK4K,EAAWtQ,KAAKA,EAAE,SAAiC/G,GAAG,IAAI8G,EAAE,GAAG,OAAO9G,EAAE4C,QAAO,CAAG5C,EAAE+G,KAAK,GAAG,iBAAiBA,GAAG,iBAAiB/G,EAAE,IAAI,IAAI+G,EAAEvC,KAAKC,MAAMzE,GAAGkG,OAAOe,OAAOH,EAAEC,EAAE,CAAC,MAAM/G,GAAG6C,QAAQ6H,KAAK,sBAAsB1K,EAAE,WAAM,IAAS8G,EAAEC,IAAIoE,MAAMC,QAAQtE,EAAEC,MAAMD,EAAEC,GAAG,CAACD,EAAEC,KAAKD,EAAEC,GAAGrF,KAAK8V,EAAmBxX,KAAK8G,EAAEC,GAAGyQ,EAAmBxX,EAAG,GAAG8G,CAAC,CAAnU,CAAqUC,IAAI,IAAI,MAAMD,KAAKC,EAAE,CAAC,MAAMzB,EAAEyB,EAAED,GAAG,GAAGoQ,EAAO5R,GAAGtF,EAAE8X,MAAMhR,GAAG9G,EAAE8X,MAAMhR,IAAI,GAAG9G,EAAE8X,MAAMhR,GAAGpF,KAAK4D,QAAQ,GAAG6F,MAAMC,QAAQ9F,GAAG,CAAC,MAAMyB,EAAE,GAAGC,EAAE,GAAG,IAAI,MAAMhH,KAAKsF,EAAE4R,EAAOlX,GAAG+G,EAAErF,KAAK1B,GAAGgH,EAAEtF,KAAK1B,GAAG,GAAG+G,EAAE5D,OAAO,GAAG4D,EAAE5D,QAAQmC,EAAEnC,OAAO,CAACnD,EAAE8X,MAAMhR,GAAG9G,EAAE8X,MAAMhR,IAAI,GAAG,IAAI,IAAIxB,KAAKyB,EAAE/G,EAAE8X,MAAMhR,GAAGpF,KAAK4D,EAAE,MAAM,GAAGtF,EAAE6X,KAAK/Q,GAAGE,EAAED,EAAE5D,OAAO,EAAE,CAAC,IAAImC,EAAEwB,EAAEA,EAAEvB,WAAW,MAAMuB,EAAEoR,SAAS,OAAO5S,GAAG,KAAKtF,EAAE8X,MAAMxS,GAAGtF,EAAE8X,MAAMxS,IAAI,GAAG,IAAI,IAAIwB,KAAKC,EAAE/G,EAAE8X,MAAMxS,GAAG5D,KAAKoF,EAAE,CAAC,MAAM9G,EAAE6X,KAAK/Q,GAAGxB,CAAC,CAAC,EAAE,MAAM6P,GAAO,WAAIgD,GAAU,OAAO3V,KAAK4S,OAAO,CAAC,WAAI+C,CAAQnY,GAAGwC,KAAK4S,QAAQpV,CAAC,CAAC,WAAA2F,CAAY3F,EAAE,IAAI8G,EAAEC,EAAE,SAASvE,KAAKgR,kBAAkB,CAAA,EAAGhR,KAAK4V,eAAe,CAAA,EAAG5V,KAAK6V,wBAAuB,EAAG7V,KAAK4S,QAAQpV,EAAEwC,KAAK6S,KAAKtO,EAAED,EAAEtE,KAAKsP,UAAUhL,EAAE,oBAAoBnD,QAAQA,OAAO2U,KAAK9V,KAAKsP,UAAU,IAAIhI,EAActH,KAAKsP,UAAU,IAAInG,EAAenJ,KAAKqT,YAAY,IAAIF,EAAkBnT,MAAMA,KAAKsV,MAAM,IAAIzB,EAAY7T,MAAMA,KAAK+V,KAAK,IAAItC,EAAWzT,MAAMA,KAAKgW,SAAS,IAAIpM,EAAgB5J,MAAMA,KAAKqP,SAAS,IAAInE,EAAgBlL,MAAMA,KAAKiW,OAAO,IAAItC,EAAc3T,MAAMA,KAAKkW,QAAQ,IAAI/B,EAAcnU,MAAMA,KAAKmW,MAAM,IAAI3B,EAAYxU,KAAK,CAAC,UAAIoW,GAAS,OAAOpW,KAAK9C,WAAW,cAAc,CAAC,WAAAmZ,GAAc,OAAO,IAAIpB,EAAajV,KAAK,CAAC,UAAA9C,CAAWM,GAAG,OAAOwC,KAAK4V,eAAepY,KAAKwC,KAAK4V,eAAepY,GAAG,IAAIyR,EAAcjP,KAAKxC,IAAIwC,KAAK4V,eAAepY,EAAE,CAAC,gBAAA8Y,CAAiB9Y,GAAG,OAAOwC,KAAK6V,yBAAyBrY,EAAEwC,IAAI,CAAC,aAAA6N,CAAcrQ,GAAG,OAAOwC,KAAKgR,kBAAkBxT,KAAKwC,KAAKgR,kBAAkBxT,GAAG+Y,eAAevW,KAAKgR,kBAAkBxT,IAAIwC,IAAI,CAAC,iBAAAwW,GAAoB,IAAI,IAAIhZ,KAAKwC,KAAKgR,kBAAkBhR,KAAKgR,kBAAkBxT,GAAG+Y,QAAQ,OAAOvW,KAAKgR,kBAAkB,CAAA,EAAGhR,IAAI,CAAC,MAAAS,CAAOjD,EAAE8G,GAAG,IAAIA,EAAE,OAAO9G,EAAE,IAAI,IAAI+G,KAAKD,EAAE,CAAC,IAAIxB,EAAEwB,EAAEC,GAAG,cAAczB,GAAG,IAAI,UAAU,IAAI,SAASA,EAAE,GAAGA,EAAE,MAAM,IAAI,SAASA,EAAE,IAAIA,EAAEqE,QAAQ,KAAK,OAAO,IAAI,MAAM,QAAQrE,EAAE,OAAOA,EAAE,OAAOA,aAAarB,KAAK,IAAIqB,EAAEmI,cAAc9D,QAAQ,IAAI,KAAK,IAAI,IAAInF,KAAKW,UAAUG,GAAGqE,QAAQ,KAAK,OAAO,IAAI3J,EAAEA,EAAEiZ,WAAW,KAAKlS,EAAE,IAAIzB,EAAE,CAAC,OAAOtF,CAAC,CAAC,UAAAkZ,CAAWlZ,EAAE8G,EAAEC,EAAE,CAAA,GAAI,OAAOlE,QAAQ6H,KAAK,yDAAyDlI,KAAKsV,MAAMvB,OAAOvW,EAAE8G,EAAEC,EAAE,CAAC,QAAAoS,CAASnZ,GAAG,OAAO6C,QAAQ6H,KAAK,mDAAmDlI,KAAKuN,SAAS/P,EAAE,CAAC,QAAA+P,CAAS/P,GAAG,IAAI8G,EAAEtE,KAAK4S,QAAQ,MAAM,oBAAoBzR,SAASA,OAAOqQ,UAAUlN,EAAEvB,WAAW,aAAauB,EAAEvB,WAAW,aAAauB,EAAEnD,OAAOqQ,SAASoF,QAAQlB,SAAS,KAAKvU,OAAOqQ,SAASoF,OAAO9D,UAAU,EAAE3R,OAAOqQ,SAASoF,OAAOjW,OAAO,GAAGQ,OAAOqQ,SAASoF,QAAQ,GAAG5W,KAAK4S,QAAQ7P,WAAW,OAAOuB,GAAGnD,OAAOqQ,SAASqF,UAAU,IAAIvS,GAAGA,EAAEoR,SAAS,KAAK,GAAG,KAAKpR,GAAGtE,KAAK4S,SAASpV,IAAI8G,GAAGA,EAAEoR,SAAS,KAAK,GAAG,IAAIpR,GAAG9G,EAAEuF,WAAW,KAAKvF,EAAEsV,UAAU,GAAGtV,GAAG8G,CAAC,CAAC,UAAMyF,CAAKvM,EAAE8G,GAAGA,EAAEtE,KAAK8W,gBAAgBtZ,EAAE8G,GAAG,IAAIC,EAAEvE,KAAKuN,SAAS/P,GAAG,GAAGwC,KAAKgQ,WAAW,CAAC,MAAMxS,EAAEkG,OAAOe,OAAO,CAAA,QAASzE,KAAKgQ,WAAWzL,EAAED,SAAI,IAAS9G,EAAE6F,UAAK,IAAS7F,EAAE+E,SAASgC,EAAE/G,EAAE6F,KAAKkB,EAAED,EAAE9G,EAAE+E,SAAS+B,GAAGZ,OAAOqD,KAAKvJ,GAAGmD,SAAS2D,EAAE9G,EAAE6C,SAAS6H,MAAM7H,QAAQ6H,KAAK,8GAA8G,CAAC,QAAG,IAAS5D,EAAEwG,MAAM,CAAC,MAAMtN,EAAEuN,EAAqBzG,EAAEwG,OAAOtN,IAAI+G,IAAIA,EAAEJ,SAAS,KAAK,IAAI,KAAK3G,UAAU8G,EAAEwG,KAAK,CAAgI,MAA/H,oBAAoB9K,KAAK+W,UAAUzS,EAAEwH,QAAQ,iBAAiBxH,EAAE2F,MAAM,iBAAiB3F,EAAE2F,OAAO3F,EAAE2F,KAAKjI,KAAKW,UAAU2B,EAAE2F,QAAc3F,EAAE0S,OAAOA,OAAOzS,EAAED,GAAG8F,KAAI,MAAE1L,IAAU,IAAI6F,EAAE,GAAG,IAAIA,QAAQ/G,EAAE6X,MAAM,CAAC,MAAM7X,GAAG,GAAG8G,EAAE2M,QAAQgG,SAAS,oBAAoBnT,cAActG,aAAasG,eAAe,cAActG,EAAEuG,MAAM,IAAIvG,EAAEwG,MAAM,MAAMxG,CAAC,CAAC,GAAGwC,KAAKkX,YAAY3S,QAAQvE,KAAKkX,UAAU1Z,EAAE+G,EAAED,IAAI9G,EAAE8F,QAAQ,IAAI,MAAM,IAAIL,EAAoB,CAACI,IAAI7F,EAAE6F,IAAIC,OAAO9F,EAAE8F,OAAOO,KAAKU,IAAI,OAAOA,CAAE,GAAGqI,MAAOpP,IAAI,MAAM,IAAIyF,EAAoBzF,EAAG,EAAE,CAAC,eAAAsZ,CAAgBtZ,EAAE8G,GAAG,IAAIA,EAAEZ,OAAOe,OAAO,CAACqF,OAAO,OAAOxF,IAAI2F,KAAK,SAAmCzM,GAAG,GAAG,oBAAoBsX,eAAU,IAAStX,GAAG,iBAAiBA,GAAG,OAAOA,GAAGqX,EAAWrX,KAAKuX,EAAavX,GAAG,OAAOA,EAAE,MAAM8G,EAAE,IAAIwQ,SAAS,IAAI,MAAMvQ,KAAK/G,EAAE,CAAC,MAAMsF,EAAEtF,EAAE+G,GAAG,QAAG,IAASzB,EAAE,GAAG,iBAAiBA,GAAGiS,EAAa,CAAClR,KAAKf,IAAI,CAAC,MAAMtF,EAAEmL,MAAMC,QAAQ9F,GAAGA,EAAE,CAACA,GAAG,IAAI,IAAIA,KAAKtF,EAAE8G,EAAEiR,OAAOhR,EAAEzB,EAAE,KAAK,CAAC,IAAItF,EAAE,CAAA,EAAGA,EAAE+G,GAAGzB,EAAEwB,EAAEiR,OAAO,eAAevT,KAAKW,UAAUnF,GAAG,CAAC,CAAC,OAAO8G,CAAC,CAAhZ,CAAkZA,EAAE2F,MAAMY,EAA4BvG,GAAGA,EAAEwG,MAAMpH,OAAOe,OAAO,CAAA,EAAGH,EAAE6S,OAAO7S,EAAEwG,YAAO,IAASxG,EAAEoI,cAAa,IAAKpI,EAAE8S,cAAa,IAAK9S,EAAEwG,MAAMsM,YAAY9S,EAAEoI,WAAW,MAAMpI,EAAE+S,YAAY/S,EAAEwG,MAAMuM,cAAc/S,EAAEoI,WAAWpI,EAAE+S,YAAY/S,EAAEwG,MAAMuM,oBAAoB/S,EAAE8S,mBAAmB9S,EAAEwG,MAAMsM,mBAAmB9S,EAAE+S,kBAAkB/S,EAAEwG,MAAMuM,WAAW,OAAOrX,KAAK+W,UAAUzS,EAAEwH,QAAQ,iBAAiB+I,EAAWvQ,EAAE2F,QAAQ3F,EAAEwH,QAAQpI,OAAOe,OAAO,GAAGH,EAAEwH,QAAQ,CAAC,eAAe,sBAAsB,OAAO9L,KAAK+W,UAAUzS,EAAEwH,QAAQ,qBAAqBxH,EAAEwH,QAAQpI,OAAOe,OAAO,GAAGH,EAAEwH,QAAQ,CAAC,kBAAkB9L,KAAK6S,QAAQ7S,KAAKsP,UAAU5H,OAAO,OAAO1H,KAAK+W,UAAUzS,EAAEwH,QAAQ,mBAAmBxH,EAAEwH,QAAQpI,OAAOe,OAAO,GAAGH,EAAEwH,QAAQ,CAAC4G,cAAc1S,KAAKsP,UAAU5H,SAAS1H,KAAK6V,wBAAwB,OAAOvR,EAAEoI,WAAW,CAAC,MAAMnI,EAAED,EAAEoI,aAAapI,EAAEwF,QAAQ,OAAOtM,SAAS8G,EAAEoI,WAAW1M,KAAK6N,cAActJ,GAAG,MAAMzB,EAAE,IAAIwU,gBAAgBtX,KAAKgR,kBAAkBzM,GAAGzB,EAAEwB,EAAE2M,OAAOnO,EAAEmO,MAAM,CAAC,OAAO3M,CAAC,CAAC,SAAAyS,CAAUvZ,EAAE8G,GAAG9G,EAAEA,GAAG,CAAA,EAAG8G,EAAEA,EAAE0B,cAAc,IAAI,IAAIzB,KAAK/G,EAAE,GAAG+G,EAAEyB,eAAe1B,EAAE,OAAO9G,EAAE+G,GAAG,OAAO,IAAI,EC8Bn4rC,IAAIgT,GAAwB,KACxBC,GAAkC,oBAAXrW,OAAyBA,OAAOqQ,SAASoF,OAAS,GACzEa,IAA8B,EAClC,MAAMC,GAAwB,IAAI/a,IAKlC,SAASgb,KAmBP,OAlBKJ,KACHA,GAAK,IAAIK,GAAWJ,IAGpBD,GAAGjB,iBAAiBmB,IAGpBF,GAAGjI,UAAUpG,SAAS,MAiB1B,WACE,IAAKqO,GAAI,OAET,GAAIA,GAAGjI,UAAUzH,QAAS,CACxB,MAAMgQ,EAAON,GAAGjI,UAAU3H,OAC1BvF,EAAMjE,IAAI,cAAeoZ,GAAGjI,UAAU5H,MAAO,CAAExG,QAAS,UACxDkB,EAAMjE,IAAI,aAAc0Z,EAAM,CAAE3W,QAAS,SAC3C,MACEkB,EAAM3D,OAAO,eACb2D,EAAM3D,OAAO,aAEjB,CA3BMqZ,GACAhZ,EAAOoB,KAAK,cAAe,CACzB2X,KAAMN,IAAIjI,UAAU3H,OACpBoQ,gBAAiBR,IAAIjI,UAAUzH,UAAW,MA6BlD,WACE,IAAK0P,GAAI,OAET,MAAM7P,EAAQtF,EAAM7D,IAAY,eAC1BsZ,EAAOzV,EAAM7D,IAAY,cAE3BmJ,GAASmQ,GACXN,GAAGjI,UAAUlH,KAAKV,EAAOmQ,EAE7B,CAjCIG,IAEKT,EACT,EH3BM,SAAsBU,GAC1Bnb,EAAWmb,CACb,CGmFAC,CAAY,CAAErZ,eAvBdH,eAA8BxB,GAC5B,GAAIwa,GAAsBpa,IAAIJ,GAAa,OAE3C,MAAMyM,EAASgO,KACTxL,QAAoBxC,EAAOzM,WAAWA,GAAY2O,UAAU,IAAMrO,IACtEsB,EAAOoB,KAAK,MAAMhD,KAAcM,EAAEL,SAAU,CAAEwK,OAAQnK,EAAEmK,WAG1D+P,GAAsBvZ,IAAIjB,EAAYiP,EACxC,EAc8BvM,gBAT9BlB,eAA+BxB,GAC7B,MAAMiP,EAAcuL,GAAsBnZ,IAAIrB,GAC1CiP,IACFA,IACAuL,GAAsBjZ,OAAOvB,GAEjC,IAKO,MAAM+a,GAAK,CAKhB,OAAI5U,GACF,OAAOmU,EACT,EAEA,OAAInU,CAAIf,GACNkV,GAAQlV,EAEJiV,KACFA,GAAK,KAET,EAMA,oBAAIjB,GACF,OAAOmB,EACT,EAEA,oBAAInB,CAAiBhU,GACnBmV,GAAqBnV,EAEjBiV,IACFA,GAAGjB,iBAAiBhU,EAExB,EAKAqH,OAAM,IACGgO,KAMTI,gBAAe,IACNJ,KAAYrI,UAAUzH,QAM/BsQ,QAAO,IACGR,KAAYrI,UAAU3H,QAAgB,KAQhD,YAAMyQ,CAAOnP,EAAe4G,EAAkBhM,EAAgC,CAAA,GAC5E,MAAM8F,EAASgO,KACTE,QAAalO,EAAOzM,WAAW,SAASyR,OAAe,CAC3D1F,QACA4G,WACA+B,gBAAiB/B,KACdhM,IAGL,OADA/E,EAAOoB,KAAK,cAAe,CAAE2X,SACtBA,CACT,EAKA,WAAMQ,CAAMpP,EAAe4G,GACzB,MAAMlG,EAASgO,KACTW,QAAa3O,EAAOzM,WAAW,SAASyS,iBAAyB1G,EAAO4G,GAE9E,OADA/Q,EAAOoB,KAAK,aAAc,CAAE2X,KAAMS,EAAK3Q,SAChC2Q,EAAK3Q,MACd,EAKA,oBAAM4Q,CAAelI,GACnB,MAAM1G,EAASgO,KACTW,QAAa3O,EAAOzM,WAAW,SAASuT,eAAuB,CAAEJ,aAEvE,OADAvR,EAAOoB,KAAK,aAAc,CAAE2X,KAAMS,EAAK3Q,SAChC2Q,EAAK3Q,MACd,EAKA,MAAA6Q,GACE,MAAMX,EAAO7X,KAAKmY,UACHR,KACRrI,UAAU/O,QACjB6B,EAAM3D,OAAO,eACb2D,EAAM3D,OAAO,cACbK,EAAOoB,KAAK,cAAe,CAAE2X,QAC/B,EAKA,iBAAMY,GACJ,MAAM9O,EAASgO,KACTW,QAAa3O,EAAOzM,WAAW,SAASiT,cAE9C,OADArR,EAAOoB,KAAK,eAAgB,CAAE2X,KAAMS,EAAK3Q,SAClC2Q,EAAK3Q,MACd,EAKA,mBAAM+Q,CAAczP,GAClB,MAAMU,EAASgO,WACThO,EAAOzM,WAAW,SAASwU,qBAAqBzI,GACtDnK,EAAOoB,KAAK,qBAAsB,CAAE+I,SACtC,EAKA,0BAAM0P,CAAqBjR,EAAemI,GACxC,MAAMlG,EAASgO,WACThO,EAAOzM,WAAW,SAASyU,qBAAqBjK,EAAOmI,EAAUA,GACvE/Q,EAAOoB,KAAK,qBAAsB,GACpC,EAKA,yBAAM2R,CAAoB5I,GACxB,MAAMU,EAASgO,WACThO,EAAOzM,WAAW,SAAS2U,oBAAoB5I,GACrDnK,EAAOoB,KAAK,sBAAuB,CAAE+I,SACvC,EAKA,yBAAM6I,CAAoBpK,GACxB,MAAMiC,EAASgO,WACThO,EAAOzM,WAAW,SAAS4U,oBAAoBpK,GACrD5I,EAAOoB,KAAK,sBAAuB,GACrC,EAOAxB,IAAS,MACPxB,EACA8L,EACAzG,EAAqE,CAAA,IAEtDoV,KACDza,WAAWA,GAAYwR,OAAU1F,EAAIzG,GAMrD,UAAM1B,CACJ3D,EACAqF,EAAuB,IAEvB,MAAMoH,EAASgO,MACTvJ,KAAEA,EAAO,EAACC,QAAEA,EAAU,MAAOuK,GAASrW,EAC5C,OAAOoH,EAAOzM,WAAWA,GAAYiR,QAAWC,EAAMC,EAASuK,EACjE,EAKAla,OAAY,MACVxB,EACAqF,EAAiD,KAElCoV,KACDza,WAAWA,GAAY8Q,YAAezL,GAMtD,cAAMsW,CACJ3b,EACAuD,EACA8B,EAA4D,CAAA,GAE5D,MAAMoH,EAASgO,KACf,IACE,aAAahO,EAAOzM,WAAWA,GAAYsR,iBAAoB/N,EAAQ8B,EACzE,CAAE,MACA,OAAO,IACT,CACF,EAMA,YAAMoM,CACJzR,EACA2G,EACAtB,EAAqE,CAAA,GAErE,MAAMoH,EAASgO,KACThQ,QAAegC,EAAOzM,WAAWA,GAAYyR,OAAU9K,EAAMtB,GAEnE,OADAzD,EAAOoB,KAAK,MAAMhD,WAAqB,CAAEyK,WAClCA,CACT,EAMA,YAAMqC,CACJ9M,EACA8L,EACAnF,EACAtB,EAAqE,CAAA,GAErE,MAAMoH,EAASgO,KACThQ,QAAegC,EAAOzM,WAAWA,GAAY8M,OAAUhB,EAAInF,EAAMtB,GAEvE,OADAzD,EAAOoB,KAAK,MAAMhD,WAAqB,CAAEyK,WAClCA,CACT,EAKA,YAAM,CAAOzK,EAAoB8L,GAC/B,MAAMW,EAASgO,WACThO,EAAOzM,WAAWA,GAAYuB,OAAOuK,GAC3ClK,EAAOoB,KAAK,MAAMhD,WAAqB,CAAE8L,MAC3C,EAOA0N,WAAU,CACR/O,EACAmR,EACAvW,EAA8B,CAAA,IAEfoV,KACDrC,MAAMvB,OAAOpM,EAAQmR,EAAUvW,ICzWpCwW,GAAS,CACpB3W,QACAtD,SACAmZ,OAIoB,oBAAX9W,SACRA,OAAiC4X,GAAKA","x_google_ignoreList":[2]}