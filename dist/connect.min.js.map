{"version":3,"file":"connect.min.js","sources":["../src/events.ts","../src/state.ts","../node_modules/pocketbase/dist/pocketbase.es.mjs","../src/db.ts","../src/index.ts"],"sourcesContent":["// Types\r\nexport type EventCallback<T = unknown> = (payload: T) => void;\r\n\r\ninterface ListenerEntry {\r\n  event: string;\r\n  callback: EventCallback;\r\n  originalCallback?: EventCallback; // For once() wrappers\r\n}\r\n\r\n// Central listener registry\r\nconst listeners: ListenerEntry[] = [];\r\nconst customHandlers = new Map<string, Set<EventCallback>>();\r\n\r\n// Track realtime subscriptions (collection -> listener count)\r\nconst realtimeCollections = new Map<string, number>();\r\n\r\n// Track record-specific subscriptions (collection:id -> listener count)\r\nconst realtimeRecords = new Map<string, number>();\r\n\r\n// Reference to db module (set via setDbModule to avoid circular imports)\r\nlet dbModule: {\r\n  enableRealtime: (collection: string) => Promise<void>;\r\n  disableRealtime: (collection: string) => Promise<void>;\r\n  enableRealtimeRecord: (collection: string, id: string) => Promise<void>;\r\n  disableRealtimeRecord: (collection: string, id: string) => Promise<void>;\r\n} | null = null;\r\n\r\n/**\r\n * Set the db module reference (called from db.ts to avoid circular imports)\r\n */\r\nexport function setDbModule(db: typeof dbModule): void {\r\n  dbModule = db;\r\n}\r\n\r\n/**\r\n * Parse a db event name to extract collection, action, and optional record ID\r\n * Returns null if not a db event\r\n * Format: db:{collection}:{action} or db:{collection}:{action}:{id}\r\n */\r\nfunction parseDbEvent(eventName: string): { collection: string; action: string; id?: string } | null {\r\n  const match = eventName.match(/^db:([^:]+):(create|update|delete)(?::(.+))?$/);\r\n  if (match) {\r\n    return {\r\n      collection: match[1],\r\n      action: match[2],\r\n      id: match[3] // undefined if not present\r\n    };\r\n  }\r\n  return null;\r\n}\r\n\r\n/**\r\n * Handle realtime subscription when db:* listener added\r\n */\r\nasync function handleRealtimeAdd(collection: string, id?: string): Promise<void> {\r\n  // Record-specific subscription (only for update/delete, not create)\r\n  if (id) {\r\n    const key = `${collection}:${id}`;\r\n    const count = (realtimeRecords.get(key) || 0) + 1;\r\n    realtimeRecords.set(key, count);\r\n\r\n    // First listener for this record - enable realtime\r\n    if (count === 1 && dbModule) {\r\n      await dbModule.enableRealtimeRecord(collection, id);\r\n    }\r\n    return;\r\n  }\r\n\r\n  // Collection-wide subscription\r\n  const count = (realtimeCollections.get(collection) || 0) + 1;\r\n  realtimeCollections.set(collection, count);\r\n\r\n  // First listener for this collection - enable realtime\r\n  if (count === 1 && dbModule) {\r\n    await dbModule.enableRealtime(collection);\r\n  }\r\n}\r\n\r\n/**\r\n * Handle realtime unsubscription when db:* listener removed\r\n */\r\nasync function handleRealtimeRemove(collection: string, id?: string): Promise<void> {\r\n  // Record-specific subscription\r\n  if (id) {\r\n    const key = `${collection}:${id}`;\r\n    const count = (realtimeRecords.get(key) || 1) - 1;\r\n\r\n    if (count <= 0) {\r\n      realtimeRecords.delete(key);\r\n      // Last listener removed - disable realtime for this record\r\n      if (dbModule) {\r\n        await dbModule.disableRealtimeRecord(collection, id);\r\n      }\r\n    } else {\r\n      realtimeRecords.set(key, count);\r\n    }\r\n    return;\r\n  }\r\n\r\n  // Collection-wide subscription\r\n  const count = (realtimeCollections.get(collection) || 1) - 1;\r\n\r\n  if (count <= 0) {\r\n    realtimeCollections.delete(collection);\r\n    // Last listener removed - disable realtime\r\n    if (dbModule) {\r\n      await dbModule.disableRealtime(collection);\r\n    }\r\n  } else {\r\n    realtimeCollections.set(collection, count);\r\n  }\r\n}\r\n\r\nexport const events = {\r\n  /**\r\n   * Subscribe to an event\r\n   */\r\n  on(event: string, callback: EventCallback): void {\r\n    const entry: ListenerEntry = { event, callback };\r\n    listeners.push(entry);\r\n\r\n    if (!customHandlers.has(event)) {\r\n      customHandlers.set(event, new Set());\r\n    }\r\n    customHandlers.get(event)!.add(callback);\r\n\r\n    // Check for db:* events to enable realtime\r\n    const dbEvent = parseDbEvent(event);\r\n    if (dbEvent) {\r\n      // Only allow record ID for update/delete (can't subscribe to non-existent record for create)\r\n      const id = dbEvent.action !== 'create' ? dbEvent.id : undefined;\r\n      handleRealtimeAdd(dbEvent.collection, id);\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Unsubscribe from an event\r\n   */\r\n  off(event: string, callback: EventCallback): void {\r\n    const index = listeners.findIndex(\r\n      l => l.event === event &&\r\n      (l.callback === callback || l.originalCallback === callback)\r\n    );\r\n    if (index !== -1) {\r\n      const entry = listeners[index];\r\n      listeners.splice(index, 1);\r\n      customHandlers.get(event)?.delete(entry.callback);\r\n      if (entry.originalCallback) {\r\n        customHandlers.get(event)?.delete(entry.originalCallback);\r\n      }\r\n\r\n      // Check for db:* events to disable realtime\r\n      const dbEvent = parseDbEvent(event);\r\n      if (dbEvent) {\r\n        const id = dbEvent.action !== 'create' ? dbEvent.id : undefined;\r\n        handleRealtimeRemove(dbEvent.collection, id);\r\n      }\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Subscribe to an event once (auto-unsubscribes after first call)\r\n   */\r\n  once(event: string, callback: EventCallback): void {\r\n    const wrapper: EventCallback = (payload) => {\r\n      this.off(event, wrapper);\r\n      callback(payload);\r\n    };\r\n    const entry: ListenerEntry = {\r\n      event,\r\n      callback: wrapper,\r\n      originalCallback: callback\r\n    };\r\n    listeners.push(entry);\r\n\r\n    if (!customHandlers.has(event)) {\r\n      customHandlers.set(event, new Set());\r\n    }\r\n    customHandlers.get(event)!.add(wrapper);\r\n\r\n    const dbEvent = parseDbEvent(event);\r\n    if (dbEvent) {\r\n      const id = dbEvent.action !== 'create' ? dbEvent.id : undefined;\r\n      handleRealtimeAdd(dbEvent.collection, id);\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Emit a custom event\r\n   */\r\n  emit<T = unknown>(event: string, payload?: T): void {\r\n    const handlers = customHandlers.get(event);\r\n    if (!handlers) return;\r\n\r\n    handlers.forEach(handler => {\r\n      try {\r\n        handler(payload);\r\n      } catch (e) {\r\n        console.error(`Error in event handler for \"${event}\":`, e);\r\n      }\r\n    });\r\n  },\r\n\r\n  /**\r\n   * Clear all handlers for an event, or all events if no name provided\r\n   */\r\n  clear(event?: string): void {\r\n    if (event) {\r\n      // Clear specific event\r\n      const toRemove = listeners.filter(l => l.event === event);\r\n      toRemove.forEach(entry => {\r\n        const index = listeners.indexOf(entry);\r\n        if (index !== -1) listeners.splice(index, 1);\r\n      });\r\n      customHandlers.delete(event);\r\n\r\n      const dbEvent = parseDbEvent(event);\r\n      if (dbEvent) {\r\n        const id = dbEvent.action !== 'create' ? dbEvent.id : undefined;\r\n        if (id) {\r\n          const key = `${dbEvent.collection}:${id}`;\r\n          if (realtimeRecords.has(key)) {\r\n            realtimeRecords.delete(key);\r\n            dbModule?.disableRealtimeRecord(dbEvent.collection, id);\r\n          }\r\n        } else if (realtimeCollections.has(dbEvent.collection)) {\r\n          realtimeCollections.delete(dbEvent.collection);\r\n          dbModule?.disableRealtime(dbEvent.collection);\r\n        }\r\n      }\r\n    } else {\r\n      // Clear all\r\n      listeners.length = 0;\r\n      customHandlers.clear();\r\n\r\n      // Disable all collection-wide realtime\r\n      realtimeCollections.forEach((_, collection) => {\r\n        dbModule?.disableRealtime(collection);\r\n      });\r\n      realtimeCollections.clear();\r\n\r\n      // Disable all record-specific realtime\r\n      realtimeRecords.forEach((_, key) => {\r\n        const [collection, id] = key.split(':');\r\n        dbModule?.disableRealtimeRecord(collection, id);\r\n      });\r\n      realtimeRecords.clear();\r\n    }\r\n  },\r\n\r\n  /**\r\n   * List all active listeners (for debugging)\r\n   */\r\n  list(): { event: string }[] {\r\n    return listeners.map(l => ({\r\n      event: l.event\r\n    }));\r\n  }\r\n};\r\n","import { events } from './events';\r\n\r\n// Types\r\nexport interface StateOptions {\r\n  persist?: 'session' | 'local';\r\n  ttl?: number; // Time to live in milliseconds\r\n}\r\n\r\ninterface StoredValue {\r\n  value: unknown;\r\n  expiry?: number;\r\n}\r\n\r\n// Constants\r\nconst STORAGE_PREFIX = 'cc:';\r\n\r\n// In-memory store for non-persisted values\r\nconst memoryStore = new Map<string, StoredValue>();\r\n\r\n/**\r\n * Get the appropriate storage backend\r\n */\r\nfunction getStorage(persist?: 'session' | 'local'): Storage | null {\r\n  if (typeof window === 'undefined') return null;\r\n\r\n  switch (persist) {\r\n    case 'session':\r\n      return sessionStorage;\r\n    case 'local':\r\n      return localStorage;\r\n    default:\r\n      return null;\r\n  }\r\n}\r\n\r\n/**\r\n * Check if a stored value has expired\r\n */\r\nfunction isExpired(stored: StoredValue): boolean {\r\n  return stored.expiry !== undefined && Date.now() > stored.expiry;\r\n}\r\n\r\n/**\r\n * Get a value from storage\r\n */\r\nfunction getFromStorage(key: string, storage: Storage): StoredValue | null {\r\n  try {\r\n    const raw = storage.getItem(`${STORAGE_PREFIX}${key}`);\r\n    if (!raw) return null;\r\n    return JSON.parse(raw) as StoredValue;\r\n  } catch {\r\n    return null;\r\n  }\r\n}\r\n\r\n/**\r\n * Save a value to storage\r\n */\r\nfunction saveToStorage(key: string, stored: StoredValue, storage: Storage): void {\r\n  try {\r\n    storage.setItem(`${STORAGE_PREFIX}${key}`, JSON.stringify(stored));\r\n  } catch (e) {\r\n    console.error(`Failed to save to storage: ${key}`, e);\r\n  }\r\n}\r\n\r\n/**\r\n * Remove a value from storage\r\n */\r\nfunction removeFromStorage(key: string, storage: Storage): void {\r\n  storage.removeItem(`${STORAGE_PREFIX}${key}`);\r\n}\r\n\r\nexport const state = {\r\n  /**\r\n   * Get a value from state\r\n   * Checks memory first, then session storage, then local storage\r\n   */\r\n  get<T = unknown>(key: string): T | undefined {\r\n    // Check memory first\r\n    const mem = memoryStore.get(key);\r\n    if (mem) {\r\n      if (isExpired(mem)) {\r\n        this.remove(key);\r\n        return undefined;\r\n      }\r\n      return mem.value as T;\r\n    }\r\n\r\n    // Check persistent stores\r\n    for (const persist of ['session', 'local'] as const) {\r\n      const storage = getStorage(persist);\r\n      if (!storage) continue;\r\n\r\n      const stored = getFromStorage(key, storage);\r\n      if (stored) {\r\n        if (isExpired(stored)) {\r\n          removeFromStorage(key, storage);\r\n          continue;\r\n        }\r\n        return stored.value as T;\r\n      }\r\n    }\r\n\r\n    return undefined;\r\n  },\r\n\r\n  /**\r\n   * Set a value in state\r\n   * Emits 'state:{key}' event with { value, oldValue }\r\n   */\r\n  set(key: string, value: unknown, options: StateOptions = {}): void {\r\n    const { persist, ttl } = options;\r\n    const oldValue = this.get(key);\r\n\r\n    const stored: StoredValue = {\r\n      value,\r\n      expiry: ttl ? Date.now() + ttl : undefined\r\n    };\r\n\r\n    const storage = getStorage(persist);\r\n    if (storage) {\r\n      saveToStorage(key, stored, storage);\r\n      // Also remove from memory if it was there\r\n      memoryStore.delete(key);\r\n    } else {\r\n      memoryStore.set(key, stored);\r\n    }\r\n\r\n    // Emit state change event\r\n    events.emit(`state:${key}`, { value, oldValue });\r\n  },\r\n\r\n  /**\r\n   * Check if a key exists in state\r\n   */\r\n  has(key: string): boolean {\r\n    return this.get(key) !== undefined;\r\n  },\r\n\r\n  /**\r\n   * Remove a key from state\r\n   * Emits 'state:{key}' event with { value: undefined, oldValue }\r\n   */\r\n  remove(key: string): void {\r\n    const oldValue = this.get(key);\r\n    if (oldValue === undefined) return;\r\n\r\n    // Remove from memory\r\n    memoryStore.delete(key);\r\n\r\n    // Remove from all persistent stores\r\n    for (const persist of ['session', 'local'] as const) {\r\n      const storage = getStorage(persist);\r\n      if (storage) {\r\n        removeFromStorage(key, storage);\r\n      }\r\n    }\r\n\r\n    // Emit state change event\r\n    events.emit(`state:${key}`, { value: undefined, oldValue });\r\n  },\r\n\r\n  /**\r\n   * List all state keys and their storage locations\r\n   * Useful for debugging\r\n   */\r\n  list(): Array<{ key: string; storage: 'memory' | 'session' | 'local' }> {\r\n    const result: Array<{ key: string; storage: 'memory' | 'session' | 'local' }> = [];\r\n\r\n    // List memory keys\r\n    for (const [key, stored] of memoryStore) {\r\n      if (!isExpired(stored)) {\r\n        result.push({ key, storage: 'memory' });\r\n      }\r\n    }\r\n\r\n    // List persistent storage keys\r\n    for (const persist of ['session', 'local'] as const) {\r\n      const storage = getStorage(persist);\r\n      if (!storage) continue;\r\n\r\n      for (let i = 0; i < storage.length; i++) {\r\n        const rawKey = storage.key(i);\r\n        if (rawKey?.startsWith(STORAGE_PREFIX)) {\r\n          const key = rawKey.slice(STORAGE_PREFIX.length);\r\n          const stored = getFromStorage(key, storage);\r\n          if (stored && !isExpired(stored)) {\r\n            result.push({ key, storage: persist });\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return result;\r\n  },\r\n\r\n  /**\r\n   * Clear all state\r\n   * Does NOT emit events for each key\r\n   */\r\n  clear(): void {\r\n    // Clear memory\r\n    memoryStore.clear();\r\n\r\n    // Clear persistent storage with our prefix\r\n    for (const persist of ['session', 'local'] as const) {\r\n      const storage = getStorage(persist);\r\n      if (!storage) continue;\r\n\r\n      const keysToRemove: string[] = [];\r\n      for (let i = 0; i < storage.length; i++) {\r\n        const key = storage.key(i);\r\n        if (key?.startsWith(STORAGE_PREFIX)) {\r\n          keysToRemove.push(key);\r\n        }\r\n      }\r\n      keysToRemove.forEach(k => storage.removeItem(k));\r\n    }\r\n  }\r\n};\r\n","class ClientResponseError extends Error{constructor(e){super(\"ClientResponseError\"),this.url=\"\",this.status=0,this.response={},this.isAbort=!1,this.originalError=null,Object.setPrototypeOf(this,ClientResponseError.prototype),null!==e&&\"object\"==typeof e&&(this.url=\"string\"==typeof e.url?e.url:\"\",this.status=\"number\"==typeof e.status?e.status:0,this.isAbort=!!e.isAbort,this.originalError=e.originalError,null!==e.response&&\"object\"==typeof e.response?this.response=e.response:null!==e.data&&\"object\"==typeof e.data?this.response=e.data:this.response={}),this.originalError||e instanceof ClientResponseError||(this.originalError=e),\"undefined\"!=typeof DOMException&&e instanceof DOMException&&(\"AbortError\"==e.name||20==e.code)&&(this.isAbort=!0),this.name=\"ClientResponseError \"+this.status,this.message=this.response?.message,this.message||(this.isAbort?this.message=\"The request was autocancelled. You can find more info in https://github.com/pocketbase/js-sdk#auto-cancellation.\":this.originalError?.cause?.message?.includes(\"ECONNREFUSED ::1\")?this.message=\"Failed to connect to the PocketBase server. Try changing the SDK URL from localhost to 127.0.0.1 (https://github.com/pocketbase/js-sdk/issues/21).\":this.message=\"Something went wrong.\"),this.cause=this.originalError}get data(){return this.response}toJSON(){return{...this}}}const e=/^[\\u0009\\u0020-\\u007e\\u0080-\\u00ff]+$/;function cookieParse(e,t){const s={};if(\"string\"!=typeof e)return s;const i=Object.assign({},t||{}).decode||defaultDecode;let n=0;for(;n<e.length;){const t=e.indexOf(\"=\",n);if(-1===t)break;let r=e.indexOf(\";\",n);if(-1===r)r=e.length;else if(r<t){n=e.lastIndexOf(\";\",t-1)+1;continue}const o=e.slice(n,t).trim();if(void 0===s[o]){let n=e.slice(t+1,r).trim();34===n.charCodeAt(0)&&(n=n.slice(1,-1));try{s[o]=i(n)}catch(e){s[o]=n}}n=r+1}return s}function cookieSerialize(t,s,i){const n=Object.assign({},i||{}),r=n.encode||defaultEncode;if(!e.test(t))throw new TypeError(\"argument name is invalid\");const o=r(s);if(o&&!e.test(o))throw new TypeError(\"argument val is invalid\");let a=t+\"=\"+o;if(null!=n.maxAge){const e=n.maxAge-0;if(isNaN(e)||!isFinite(e))throw new TypeError(\"option maxAge is invalid\");a+=\"; Max-Age=\"+Math.floor(e)}if(n.domain){if(!e.test(n.domain))throw new TypeError(\"option domain is invalid\");a+=\"; Domain=\"+n.domain}if(n.path){if(!e.test(n.path))throw new TypeError(\"option path is invalid\");a+=\"; Path=\"+n.path}if(n.expires){if(!function isDate(e){return\"[object Date]\"===Object.prototype.toString.call(e)||e instanceof Date}(n.expires)||isNaN(n.expires.valueOf()))throw new TypeError(\"option expires is invalid\");a+=\"; Expires=\"+n.expires.toUTCString()}if(n.httpOnly&&(a+=\"; HttpOnly\"),n.secure&&(a+=\"; Secure\"),n.priority){switch(\"string\"==typeof n.priority?n.priority.toLowerCase():n.priority){case\"low\":a+=\"; Priority=Low\";break;case\"medium\":a+=\"; Priority=Medium\";break;case\"high\":a+=\"; Priority=High\";break;default:throw new TypeError(\"option priority is invalid\")}}if(n.sameSite){switch(\"string\"==typeof n.sameSite?n.sameSite.toLowerCase():n.sameSite){case!0:a+=\"; SameSite=Strict\";break;case\"lax\":a+=\"; SameSite=Lax\";break;case\"strict\":a+=\"; SameSite=Strict\";break;case\"none\":a+=\"; SameSite=None\";break;default:throw new TypeError(\"option sameSite is invalid\")}}return a}function defaultDecode(e){return-1!==e.indexOf(\"%\")?decodeURIComponent(e):e}function defaultEncode(e){return encodeURIComponent(e)}const t=\"undefined\"!=typeof navigator&&\"ReactNative\"===navigator.product||\"undefined\"!=typeof global&&global.HermesInternal;let s;function getTokenPayload(e){if(e)try{const t=decodeURIComponent(s(e.split(\".\")[1]).split(\"\").map((function(e){return\"%\"+(\"00\"+e.charCodeAt(0).toString(16)).slice(-2)})).join(\"\"));return JSON.parse(t)||{}}catch(e){}return{}}function isTokenExpired(e,t=0){let s=getTokenPayload(e);return!(Object.keys(s).length>0&&(!s.exp||s.exp-t>Date.now()/1e3))}s=\"function\"!=typeof atob||t?e=>{let t=String(e).replace(/=+$/,\"\");if(t.length%4==1)throw new Error(\"'atob' failed: The string to be decoded is not correctly encoded.\");for(var s,i,n=0,r=0,o=\"\";i=t.charAt(r++);~i&&(s=n%4?64*s+i:i,n++%4)?o+=String.fromCharCode(255&s>>(-2*n&6)):0)i=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\".indexOf(i);return o}:atob;const i=\"pb_auth\";class BaseAuthStore{constructor(){this.baseToken=\"\",this.baseModel=null,this._onChangeCallbacks=[]}get token(){return this.baseToken}get record(){return this.baseModel}get model(){return this.baseModel}get isValid(){return!isTokenExpired(this.token)}get isSuperuser(){let e=getTokenPayload(this.token);return\"auth\"==e.type&&(\"_superusers\"==this.record?.collectionName||!this.record?.collectionName&&\"pbc_3142635823\"==e.collectionId)}get isAdmin(){return console.warn(\"Please replace pb.authStore.isAdmin with pb.authStore.isSuperuser OR simply check the value of pb.authStore.record?.collectionName\"),this.isSuperuser}get isAuthRecord(){return console.warn(\"Please replace pb.authStore.isAuthRecord with !pb.authStore.isSuperuser OR simply check the value of pb.authStore.record?.collectionName\"),\"auth\"==getTokenPayload(this.token).type&&!this.isSuperuser}save(e,t){this.baseToken=e||\"\",this.baseModel=t||null,this.triggerChange()}clear(){this.baseToken=\"\",this.baseModel=null,this.triggerChange()}loadFromCookie(e,t=i){const s=cookieParse(e||\"\")[t]||\"\";let n={};try{n=JSON.parse(s),(null===typeof n||\"object\"!=typeof n||Array.isArray(n))&&(n={})}catch(e){}this.save(n.token||\"\",n.record||n.model||null)}exportToCookie(e,t=i){const s={secure:!0,sameSite:!0,httpOnly:!0,path:\"/\"},n=getTokenPayload(this.token);s.expires=n?.exp?new Date(1e3*n.exp):new Date(\"1970-01-01\"),e=Object.assign({},s,e);const r={token:this.token,record:this.record?JSON.parse(JSON.stringify(this.record)):null};let o=cookieSerialize(t,JSON.stringify(r),e);const a=\"undefined\"!=typeof Blob?new Blob([o]).size:o.length;if(r.record&&a>4096){r.record={id:r.record?.id,email:r.record?.email};const s=[\"collectionId\",\"collectionName\",\"verified\"];for(const e in this.record)s.includes(e)&&(r.record[e]=this.record[e]);o=cookieSerialize(t,JSON.stringify(r),e)}return o}onChange(e,t=!1){return this._onChangeCallbacks.push(e),t&&e(this.token,this.record),()=>{for(let t=this._onChangeCallbacks.length-1;t>=0;t--)if(this._onChangeCallbacks[t]==e)return delete this._onChangeCallbacks[t],void this._onChangeCallbacks.splice(t,1)}}triggerChange(){for(const e of this._onChangeCallbacks)e&&e(this.token,this.record)}}class LocalAuthStore extends BaseAuthStore{constructor(e=\"pocketbase_auth\"){super(),this.storageFallback={},this.storageKey=e,this._bindStorageEvent()}get token(){return(this._storageGet(this.storageKey)||{}).token||\"\"}get record(){const e=this._storageGet(this.storageKey)||{};return e.record||e.model||null}get model(){return this.record}save(e,t){this._storageSet(this.storageKey,{token:e,record:t}),super.save(e,t)}clear(){this._storageRemove(this.storageKey),super.clear()}_storageGet(e){if(\"undefined\"!=typeof window&&window?.localStorage){const t=window.localStorage.getItem(e)||\"\";try{return JSON.parse(t)}catch(e){return t}}return this.storageFallback[e]}_storageSet(e,t){if(\"undefined\"!=typeof window&&window?.localStorage){let s=t;\"string\"!=typeof t&&(s=JSON.stringify(t)),window.localStorage.setItem(e,s)}else this.storageFallback[e]=t}_storageRemove(e){\"undefined\"!=typeof window&&window?.localStorage&&window.localStorage?.removeItem(e),delete this.storageFallback[e]}_bindStorageEvent(){\"undefined\"!=typeof window&&window?.localStorage&&window.addEventListener&&window.addEventListener(\"storage\",(e=>{if(e.key!=this.storageKey)return;const t=this._storageGet(this.storageKey)||{};super.save(t.token||\"\",t.record||t.model||null)}))}}class BaseService{constructor(e){this.client=e}}class SettingsService extends BaseService{async getAll(e){return e=Object.assign({method:\"GET\"},e),this.client.send(\"/api/settings\",e)}async update(e,t){return t=Object.assign({method:\"PATCH\",body:e},t),this.client.send(\"/api/settings\",t)}async testS3(e=\"storage\",t){return t=Object.assign({method:\"POST\",body:{filesystem:e}},t),this.client.send(\"/api/settings/test/s3\",t).then((()=>!0))}async testEmail(e,t,s,i){return i=Object.assign({method:\"POST\",body:{email:t,template:s,collection:e}},i),this.client.send(\"/api/settings/test/email\",i).then((()=>!0))}async generateAppleClientSecret(e,t,s,i,n,r){return r=Object.assign({method:\"POST\",body:{clientId:e,teamId:t,keyId:s,privateKey:i,duration:n}},r),this.client.send(\"/api/settings/apple/generate-client-secret\",r)}}const n=[\"requestKey\",\"$cancelKey\",\"$autoCancel\",\"fetch\",\"headers\",\"body\",\"query\",\"params\",\"cache\",\"credentials\",\"headers\",\"integrity\",\"keepalive\",\"method\",\"mode\",\"redirect\",\"referrer\",\"referrerPolicy\",\"signal\",\"window\"];function normalizeUnknownQueryParams(e){if(e){e.query=e.query||{};for(let t in e)n.includes(t)||(e.query[t]=e[t],delete e[t])}}function serializeQueryParams(e){const t=[];for(const s in e){const i=encodeURIComponent(s),n=Array.isArray(e[s])?e[s]:[e[s]];for(let e of n)e=prepareQueryParamValue(e),null!==e&&t.push(i+\"=\"+e)}return t.join(\"&\")}function prepareQueryParamValue(e){return null==e?null:e instanceof Date?encodeURIComponent(e.toISOString().replace(\"T\",\" \")):\"object\"==typeof e?encodeURIComponent(JSON.stringify(e)):encodeURIComponent(e)}class RealtimeService extends BaseService{constructor(){super(...arguments),this.clientId=\"\",this.eventSource=null,this.subscriptions={},this.lastSentSubscriptions=[],this.maxConnectTimeout=15e3,this.reconnectAttempts=0,this.maxReconnectAttempts=1/0,this.predefinedReconnectIntervals=[200,300,500,1e3,1200,1500,2e3],this.pendingConnects=[]}get isConnected(){return!!this.eventSource&&!!this.clientId&&!this.pendingConnects.length}async subscribe(e,t,s){if(!e)throw new Error(\"topic must be set.\");let i=e;if(s){normalizeUnknownQueryParams(s=Object.assign({},s));const e=\"options=\"+encodeURIComponent(JSON.stringify({query:s.query,headers:s.headers}));i+=(i.includes(\"?\")?\"&\":\"?\")+e}const listener=function(e){const s=e;let i;try{i=JSON.parse(s?.data)}catch{}t(i||{})};return this.subscriptions[i]||(this.subscriptions[i]=[]),this.subscriptions[i].push(listener),this.isConnected?1===this.subscriptions[i].length?await this.submitSubscriptions():this.eventSource?.addEventListener(i,listener):await this.connect(),async()=>this.unsubscribeByTopicAndListener(e,listener)}async unsubscribe(e){let t=!1;if(e){const s=this.getSubscriptionsByTopic(e);for(let e in s)if(this.hasSubscriptionListeners(e)){for(let t of this.subscriptions[e])this.eventSource?.removeEventListener(e,t);delete this.subscriptions[e],t||(t=!0)}}else this.subscriptions={};this.hasSubscriptionListeners()?t&&await this.submitSubscriptions():this.disconnect()}async unsubscribeByPrefix(e){let t=!1;for(let s in this.subscriptions)if((s+\"?\").startsWith(e)){t=!0;for(let e of this.subscriptions[s])this.eventSource?.removeEventListener(s,e);delete this.subscriptions[s]}t&&(this.hasSubscriptionListeners()?await this.submitSubscriptions():this.disconnect())}async unsubscribeByTopicAndListener(e,t){let s=!1;const i=this.getSubscriptionsByTopic(e);for(let e in i){if(!Array.isArray(this.subscriptions[e])||!this.subscriptions[e].length)continue;let i=!1;for(let s=this.subscriptions[e].length-1;s>=0;s--)this.subscriptions[e][s]===t&&(i=!0,delete this.subscriptions[e][s],this.subscriptions[e].splice(s,1),this.eventSource?.removeEventListener(e,t));i&&(this.subscriptions[e].length||delete this.subscriptions[e],s||this.hasSubscriptionListeners(e)||(s=!0))}this.hasSubscriptionListeners()?s&&await this.submitSubscriptions():this.disconnect()}hasSubscriptionListeners(e){if(this.subscriptions=this.subscriptions||{},e)return!!this.subscriptions[e]?.length;for(let e in this.subscriptions)if(this.subscriptions[e]?.length)return!0;return!1}async submitSubscriptions(){if(this.clientId)return this.addAllSubscriptionListeners(),this.lastSentSubscriptions=this.getNonEmptySubscriptionKeys(),this.client.send(\"/api/realtime\",{method:\"POST\",body:{clientId:this.clientId,subscriptions:this.lastSentSubscriptions},requestKey:this.getSubscriptionsCancelKey()}).catch((e=>{if(!e?.isAbort)throw e}))}getSubscriptionsCancelKey(){return\"realtime_\"+this.clientId}getSubscriptionsByTopic(e){const t={};e=e.includes(\"?\")?e:e+\"?\";for(let s in this.subscriptions)(s+\"?\").startsWith(e)&&(t[s]=this.subscriptions[s]);return t}getNonEmptySubscriptionKeys(){const e=[];for(let t in this.subscriptions)this.subscriptions[t].length&&e.push(t);return e}addAllSubscriptionListeners(){if(this.eventSource){this.removeAllSubscriptionListeners();for(let e in this.subscriptions)for(let t of this.subscriptions[e])this.eventSource.addEventListener(e,t)}}removeAllSubscriptionListeners(){if(this.eventSource)for(let e in this.subscriptions)for(let t of this.subscriptions[e])this.eventSource.removeEventListener(e,t)}async connect(){if(!(this.reconnectAttempts>0))return new Promise(((e,t)=>{this.pendingConnects.push({resolve:e,reject:t}),this.pendingConnects.length>1||this.initConnect()}))}initConnect(){this.disconnect(!0),clearTimeout(this.connectTimeoutId),this.connectTimeoutId=setTimeout((()=>{this.connectErrorHandler(new Error(\"EventSource connect took too long.\"))}),this.maxConnectTimeout),this.eventSource=new EventSource(this.client.buildURL(\"/api/realtime\")),this.eventSource.onerror=e=>{this.connectErrorHandler(new Error(\"Failed to establish realtime connection.\"))},this.eventSource.addEventListener(\"PB_CONNECT\",(e=>{const t=e;this.clientId=t?.lastEventId,this.submitSubscriptions().then((async()=>{let e=3;for(;this.hasUnsentSubscriptions()&&e>0;)e--,await this.submitSubscriptions()})).then((()=>{for(let e of this.pendingConnects)e.resolve();this.pendingConnects=[],this.reconnectAttempts=0,clearTimeout(this.reconnectTimeoutId),clearTimeout(this.connectTimeoutId);const t=this.getSubscriptionsByTopic(\"PB_CONNECT\");for(let s in t)for(let i of t[s])i(e)})).catch((e=>{this.clientId=\"\",this.connectErrorHandler(e)}))}))}hasUnsentSubscriptions(){const e=this.getNonEmptySubscriptionKeys();if(e.length!=this.lastSentSubscriptions.length)return!0;for(const t of e)if(!this.lastSentSubscriptions.includes(t))return!0;return!1}connectErrorHandler(e){if(clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),!this.clientId&&!this.reconnectAttempts||this.reconnectAttempts>this.maxReconnectAttempts){for(let t of this.pendingConnects)t.reject(new ClientResponseError(e));return this.pendingConnects=[],void this.disconnect()}this.disconnect(!0);const t=this.predefinedReconnectIntervals[this.reconnectAttempts]||this.predefinedReconnectIntervals[this.predefinedReconnectIntervals.length-1];this.reconnectAttempts++,this.reconnectTimeoutId=setTimeout((()=>{this.initConnect()}),t)}disconnect(e=!1){if(this.clientId&&this.onDisconnect&&this.onDisconnect(Object.keys(this.subscriptions)),clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),this.removeAllSubscriptionListeners(),this.client.cancelRequest(this.getSubscriptionsCancelKey()),this.eventSource?.close(),this.eventSource=null,this.clientId=\"\",!e){this.reconnectAttempts=0;for(let e of this.pendingConnects)e.resolve();this.pendingConnects=[]}}}class CrudService extends BaseService{decode(e){return e}async getFullList(e,t){if(\"number\"==typeof e)return this._getFullList(e,t);let s=500;return(t=Object.assign({},e,t)).batch&&(s=t.batch,delete t.batch),this._getFullList(s,t)}async getList(e=1,t=30,s){return(s=Object.assign({method:\"GET\"},s)).query=Object.assign({page:e,perPage:t},s.query),this.client.send(this.baseCrudPath,s).then((e=>(e.items=e.items?.map((e=>this.decode(e)))||[],e)))}async getFirstListItem(e,t){return(t=Object.assign({requestKey:\"one_by_filter_\"+this.baseCrudPath+\"_\"+e},t)).query=Object.assign({filter:e,skipTotal:1},t.query),this.getList(1,1,t).then((e=>{if(!e?.items?.length)throw new ClientResponseError({status:404,response:{code:404,message:\"The requested resource wasn't found.\",data:{}}});return e.items[0]}))}async getOne(e,t){if(!e)throw new ClientResponseError({url:this.client.buildURL(this.baseCrudPath+\"/\"),status:404,response:{code:404,message:\"Missing required record id.\",data:{}}});return t=Object.assign({method:\"GET\"},t),this.client.send(this.baseCrudPath+\"/\"+encodeURIComponent(e),t).then((e=>this.decode(e)))}async create(e,t){return t=Object.assign({method:\"POST\",body:e},t),this.client.send(this.baseCrudPath,t).then((e=>this.decode(e)))}async update(e,t,s){return s=Object.assign({method:\"PATCH\",body:t},s),this.client.send(this.baseCrudPath+\"/\"+encodeURIComponent(e),s).then((e=>this.decode(e)))}async delete(e,t){return t=Object.assign({method:\"DELETE\"},t),this.client.send(this.baseCrudPath+\"/\"+encodeURIComponent(e),t).then((()=>!0))}_getFullList(e=500,t){(t=t||{}).query=Object.assign({skipTotal:1},t.query);let s=[],request=async i=>this.getList(i,e||500,t).then((e=>{const t=e.items;return s=s.concat(t),t.length==e.perPage?request(i+1):s}));return request(1)}}function normalizeLegacyOptionsArgs(e,t,s,i){const n=void 0!==i;return n||void 0!==s?n?(console.warn(e),t.body=Object.assign({},t.body,s),t.query=Object.assign({},t.query,i),t):Object.assign(t,s):t}function resetAutoRefresh(e){e._resetAutoRefresh?.()}class RecordService extends CrudService{constructor(e,t){super(e),this.collectionIdOrName=t}get baseCrudPath(){return this.baseCollectionPath+\"/records\"}get baseCollectionPath(){return\"/api/collections/\"+encodeURIComponent(this.collectionIdOrName)}get isSuperusers(){return\"_superusers\"==this.collectionIdOrName||\"_pbc_2773867675\"==this.collectionIdOrName}async subscribe(e,t,s){if(!e)throw new Error(\"Missing topic.\");if(!t)throw new Error(\"Missing subscription callback.\");return this.client.realtime.subscribe(this.collectionIdOrName+\"/\"+e,t,s)}async unsubscribe(e){return e?this.client.realtime.unsubscribe(this.collectionIdOrName+\"/\"+e):this.client.realtime.unsubscribeByPrefix(this.collectionIdOrName)}async getFullList(e,t){if(\"number\"==typeof e)return super.getFullList(e,t);const s=Object.assign({},e,t);return super.getFullList(s)}async getList(e=1,t=30,s){return super.getList(e,t,s)}async getFirstListItem(e,t){return super.getFirstListItem(e,t)}async getOne(e,t){return super.getOne(e,t)}async create(e,t){return super.create(e,t)}async update(e,t,s){return super.update(e,t,s).then((e=>{if(this.client.authStore.record?.id===e?.id&&(this.client.authStore.record?.collectionId===this.collectionIdOrName||this.client.authStore.record?.collectionName===this.collectionIdOrName)){let t=Object.assign({},this.client.authStore.record.expand),s=Object.assign({},this.client.authStore.record,e);t&&(s.expand=Object.assign(t,e.expand)),this.client.authStore.save(this.client.authStore.token,s)}return e}))}async delete(e,t){return super.delete(e,t).then((t=>(!t||this.client.authStore.record?.id!==e||this.client.authStore.record?.collectionId!==this.collectionIdOrName&&this.client.authStore.record?.collectionName!==this.collectionIdOrName||this.client.authStore.clear(),t)))}authResponse(e){const t=this.decode(e?.record||{});return this.client.authStore.save(e?.token,t),Object.assign({},e,{token:e?.token||\"\",record:t})}async listAuthMethods(e){return e=Object.assign({method:\"GET\",fields:\"mfa,otp,password,oauth2\"},e),this.client.send(this.baseCollectionPath+\"/auth-methods\",e)}async authWithPassword(e,t,s){let i;s=Object.assign({method:\"POST\",body:{identity:e,password:t}},s),this.isSuperusers&&(i=s.autoRefreshThreshold,delete s.autoRefreshThreshold,s.autoRefresh||resetAutoRefresh(this.client));let n=await this.client.send(this.baseCollectionPath+\"/auth-with-password\",s);return n=this.authResponse(n),i&&this.isSuperusers&&function registerAutoRefresh(e,t,s,i){resetAutoRefresh(e);const n=e.beforeSend,r=e.authStore.record,o=e.authStore.onChange(((t,s)=>{(!t||s?.id!=r?.id||(s?.collectionId||r?.collectionId)&&s?.collectionId!=r?.collectionId)&&resetAutoRefresh(e)}));e._resetAutoRefresh=function(){o(),e.beforeSend=n,delete e._resetAutoRefresh},e.beforeSend=async(r,o)=>{const a=e.authStore.token;if(o.query?.autoRefresh)return n?n(r,o):{url:r,sendOptions:o};let c=e.authStore.isValid;if(c&&isTokenExpired(e.authStore.token,t))try{await s()}catch(e){c=!1}c||await i();const l=o.headers||{};for(let t in l)if(\"authorization\"==t.toLowerCase()&&a==l[t]&&e.authStore.token){l[t]=e.authStore.token;break}return o.headers=l,n?n(r,o):{url:r,sendOptions:o}}}(this.client,i,(()=>this.authRefresh({autoRefresh:!0})),(()=>this.authWithPassword(e,t,Object.assign({autoRefresh:!0},s)))),n}async authWithOAuth2Code(e,t,s,i,n,r,o){let a={method:\"POST\",body:{provider:e,code:t,codeVerifier:s,redirectURL:i,createData:n}};return a=normalizeLegacyOptionsArgs(\"This form of authWithOAuth2Code(provider, code, codeVerifier, redirectURL, createData?, body?, query?) is deprecated. Consider replacing it with authWithOAuth2Code(provider, code, codeVerifier, redirectURL, createData?, options?).\",a,r,o),this.client.send(this.baseCollectionPath+\"/auth-with-oauth2\",a).then((e=>this.authResponse(e)))}authWithOAuth2(...e){if(e.length>1||\"string\"==typeof e?.[0])return console.warn(\"PocketBase: This form of authWithOAuth2() is deprecated and may get removed in the future. Please replace with authWithOAuth2Code() OR use the authWithOAuth2() realtime form as shown in https://pocketbase.io/docs/authentication/#oauth2-integration.\"),this.authWithOAuth2Code(e?.[0]||\"\",e?.[1]||\"\",e?.[2]||\"\",e?.[3]||\"\",e?.[4]||{},e?.[5]||{},e?.[6]||{});const t=e?.[0]||{};let s=null;t.urlCallback||(s=openBrowserPopup(void 0));const i=new RealtimeService(this.client);function cleanup(){s?.close(),i.unsubscribe()}const n={},r=t.requestKey;return r&&(n.requestKey=r),this.listAuthMethods(n).then((e=>{const n=e.oauth2.providers.find((e=>e.name===t.provider));if(!n)throw new ClientResponseError(new Error(`Missing or invalid provider \"${t.provider}\".`));const o=this.client.buildURL(\"/api/oauth2-redirect\"),a=r?this.client.cancelControllers?.[r]:void 0;return a&&(a.signal.onabort=()=>{cleanup()}),new Promise((async(e,r)=>{try{await i.subscribe(\"@oauth2\",(async s=>{const c=i.clientId;try{if(!s.state||c!==s.state)throw new Error(\"State parameters don't match.\");if(s.error||!s.code)throw new Error(\"OAuth2 redirect error or missing code: \"+s.error);const i=Object.assign({},t);delete i.provider,delete i.scopes,delete i.createData,delete i.urlCallback,a?.signal?.onabort&&(a.signal.onabort=null);const r=await this.authWithOAuth2Code(n.name,s.code,n.codeVerifier,o,t.createData,i);e(r)}catch(e){r(new ClientResponseError(e))}cleanup()}));const c={state:i.clientId};t.scopes?.length&&(c.scope=t.scopes.join(\" \"));const l=this._replaceQueryParams(n.authURL+o,c);let h=t.urlCallback||function(e){s?s.location.href=e:s=openBrowserPopup(e)};await h(l)}catch(e){cleanup(),r(new ClientResponseError(e))}}))})).catch((e=>{throw cleanup(),e}))}async authRefresh(e,t){let s={method:\"POST\"};return s=normalizeLegacyOptionsArgs(\"This form of authRefresh(body?, query?) is deprecated. Consider replacing it with authRefresh(options?).\",s,e,t),this.client.send(this.baseCollectionPath+\"/auth-refresh\",s).then((e=>this.authResponse(e)))}async requestPasswordReset(e,t,s){let i={method:\"POST\",body:{email:e}};return i=normalizeLegacyOptionsArgs(\"This form of requestPasswordReset(email, body?, query?) is deprecated. Consider replacing it with requestPasswordReset(email, options?).\",i,t,s),this.client.send(this.baseCollectionPath+\"/request-password-reset\",i).then((()=>!0))}async confirmPasswordReset(e,t,s,i,n){let r={method:\"POST\",body:{token:e,password:t,passwordConfirm:s}};return r=normalizeLegacyOptionsArgs(\"This form of confirmPasswordReset(token, password, passwordConfirm, body?, query?) is deprecated. Consider replacing it with confirmPasswordReset(token, password, passwordConfirm, options?).\",r,i,n),this.client.send(this.baseCollectionPath+\"/confirm-password-reset\",r).then((()=>!0))}async requestVerification(e,t,s){let i={method:\"POST\",body:{email:e}};return i=normalizeLegacyOptionsArgs(\"This form of requestVerification(email, body?, query?) is deprecated. Consider replacing it with requestVerification(email, options?).\",i,t,s),this.client.send(this.baseCollectionPath+\"/request-verification\",i).then((()=>!0))}async confirmVerification(e,t,s){let i={method:\"POST\",body:{token:e}};return i=normalizeLegacyOptionsArgs(\"This form of confirmVerification(token, body?, query?) is deprecated. Consider replacing it with confirmVerification(token, options?).\",i,t,s),this.client.send(this.baseCollectionPath+\"/confirm-verification\",i).then((()=>{const t=getTokenPayload(e),s=this.client.authStore.record;return s&&!s.verified&&s.id===t.id&&s.collectionId===t.collectionId&&(s.verified=!0,this.client.authStore.save(this.client.authStore.token,s)),!0}))}async requestEmailChange(e,t,s){let i={method:\"POST\",body:{newEmail:e}};return i=normalizeLegacyOptionsArgs(\"This form of requestEmailChange(newEmail, body?, query?) is deprecated. Consider replacing it with requestEmailChange(newEmail, options?).\",i,t,s),this.client.send(this.baseCollectionPath+\"/request-email-change\",i).then((()=>!0))}async confirmEmailChange(e,t,s,i){let n={method:\"POST\",body:{token:e,password:t}};return n=normalizeLegacyOptionsArgs(\"This form of confirmEmailChange(token, password, body?, query?) is deprecated. Consider replacing it with confirmEmailChange(token, password, options?).\",n,s,i),this.client.send(this.baseCollectionPath+\"/confirm-email-change\",n).then((()=>{const t=getTokenPayload(e),s=this.client.authStore.record;return s&&s.id===t.id&&s.collectionId===t.collectionId&&this.client.authStore.clear(),!0}))}async listExternalAuths(e,t){return this.client.collection(\"_externalAuths\").getFullList(Object.assign({},t,{filter:this.client.filter(\"recordRef = {:id}\",{id:e})}))}async unlinkExternalAuth(e,t,s){const i=await this.client.collection(\"_externalAuths\").getFirstListItem(this.client.filter(\"recordRef = {:recordId} && provider = {:provider}\",{recordId:e,provider:t}));return this.client.collection(\"_externalAuths\").delete(i.id,s).then((()=>!0))}async requestOTP(e,t){return t=Object.assign({method:\"POST\",body:{email:e}},t),this.client.send(this.baseCollectionPath+\"/request-otp\",t)}async authWithOTP(e,t,s){return s=Object.assign({method:\"POST\",body:{otpId:e,password:t}},s),this.client.send(this.baseCollectionPath+\"/auth-with-otp\",s).then((e=>this.authResponse(e)))}async impersonate(e,t,s){(s=Object.assign({method:\"POST\",body:{duration:t}},s)).headers=s.headers||{},s.headers.Authorization||(s.headers.Authorization=this.client.authStore.token);const i=new Client(this.client.baseURL,new BaseAuthStore,this.client.lang),n=await i.send(this.baseCollectionPath+\"/impersonate/\"+encodeURIComponent(e),s);return i.authStore.save(n?.token,this.decode(n?.record||{})),i}_replaceQueryParams(e,t={}){let s=e,i=\"\";e.indexOf(\"?\")>=0&&(s=e.substring(0,e.indexOf(\"?\")),i=e.substring(e.indexOf(\"?\")+1));const n={},r=i.split(\"&\");for(const e of r){if(\"\"==e)continue;const t=e.split(\"=\");n[decodeURIComponent(t[0].replace(/\\+/g,\" \"))]=decodeURIComponent((t[1]||\"\").replace(/\\+/g,\" \"))}for(let e in t)t.hasOwnProperty(e)&&(null==t[e]?delete n[e]:n[e]=t[e]);i=\"\";for(let e in n)n.hasOwnProperty(e)&&(\"\"!=i&&(i+=\"&\"),i+=encodeURIComponent(e.replace(/%20/g,\"+\"))+\"=\"+encodeURIComponent(n[e].replace(/%20/g,\"+\")));return\"\"!=i?s+\"?\"+i:s}}function openBrowserPopup(e){if(\"undefined\"==typeof window||!window?.open)throw new ClientResponseError(new Error(\"Not in a browser context - please pass a custom urlCallback function.\"));let t=1024,s=768,i=window.innerWidth,n=window.innerHeight;t=t>i?i:t,s=s>n?n:s;let r=i/2-t/2,o=n/2-s/2;return window.open(e,\"popup_window\",\"width=\"+t+\",height=\"+s+\",top=\"+o+\",left=\"+r+\",resizable,menubar=no\")}class CollectionService extends CrudService{get baseCrudPath(){return\"/api/collections\"}async import(e,t=!1,s){return s=Object.assign({method:\"PUT\",body:{collections:e,deleteMissing:t}},s),this.client.send(this.baseCrudPath+\"/import\",s).then((()=>!0))}async getScaffolds(e){return e=Object.assign({method:\"GET\"},e),this.client.send(this.baseCrudPath+\"/meta/scaffolds\",e)}async truncate(e,t){return t=Object.assign({method:\"DELETE\"},t),this.client.send(this.baseCrudPath+\"/\"+encodeURIComponent(e)+\"/truncate\",t).then((()=>!0))}}class LogService extends BaseService{async getList(e=1,t=30,s){return(s=Object.assign({method:\"GET\"},s)).query=Object.assign({page:e,perPage:t},s.query),this.client.send(\"/api/logs\",s)}async getOne(e,t){if(!e)throw new ClientResponseError({url:this.client.buildURL(\"/api/logs/\"),status:404,response:{code:404,message:\"Missing required log id.\",data:{}}});return t=Object.assign({method:\"GET\"},t),this.client.send(\"/api/logs/\"+encodeURIComponent(e),t)}async getStats(e){return e=Object.assign({method:\"GET\"},e),this.client.send(\"/api/logs/stats\",e)}}class HealthService extends BaseService{async check(e){return e=Object.assign({method:\"GET\"},e),this.client.send(\"/api/health\",e)}}class FileService extends BaseService{getUrl(e,t,s={}){return console.warn(\"Please replace pb.files.getUrl() with pb.files.getURL()\"),this.getURL(e,t,s)}getURL(e,t,s={}){if(!t||!e?.id||!e?.collectionId&&!e?.collectionName)return\"\";const i=[];i.push(\"api\"),i.push(\"files\"),i.push(encodeURIComponent(e.collectionId||e.collectionName)),i.push(encodeURIComponent(e.id)),i.push(encodeURIComponent(t));let n=this.client.buildURL(i.join(\"/\"));if(Object.keys(s).length){!1===s.download&&delete s.download;const e=new URLSearchParams(s);n+=(n.includes(\"?\")?\"&\":\"?\")+e}return n}async getToken(e){return e=Object.assign({method:\"POST\"},e),this.client.send(\"/api/files/token\",e).then((e=>e?.token||\"\"))}}class BackupService extends BaseService{async getFullList(e){return e=Object.assign({method:\"GET\"},e),this.client.send(\"/api/backups\",e)}async create(e,t){return t=Object.assign({method:\"POST\",body:{name:e}},t),this.client.send(\"/api/backups\",t).then((()=>!0))}async upload(e,t){return t=Object.assign({method:\"POST\",body:e},t),this.client.send(\"/api/backups/upload\",t).then((()=>!0))}async delete(e,t){return t=Object.assign({method:\"DELETE\"},t),this.client.send(`/api/backups/${encodeURIComponent(e)}`,t).then((()=>!0))}async restore(e,t){return t=Object.assign({method:\"POST\"},t),this.client.send(`/api/backups/${encodeURIComponent(e)}/restore`,t).then((()=>!0))}getDownloadUrl(e,t){return console.warn(\"Please replace pb.backups.getDownloadUrl() with pb.backups.getDownloadURL()\"),this.getDownloadURL(e,t)}getDownloadURL(e,t){return this.client.buildURL(`/api/backups/${encodeURIComponent(t)}?token=${encodeURIComponent(e)}`)}}class CronService extends BaseService{async getFullList(e){return e=Object.assign({method:\"GET\"},e),this.client.send(\"/api/crons\",e)}async run(e,t){return t=Object.assign({method:\"POST\"},t),this.client.send(`/api/crons/${encodeURIComponent(e)}`,t).then((()=>!0))}}function isFile(e){return\"undefined\"!=typeof Blob&&e instanceof Blob||\"undefined\"!=typeof File&&e instanceof File||null!==e&&\"object\"==typeof e&&e.uri&&(\"undefined\"!=typeof navigator&&\"ReactNative\"===navigator.product||\"undefined\"!=typeof global&&global.HermesInternal)}function isFormData(e){return e&&(\"FormData\"===e.constructor?.name||\"undefined\"!=typeof FormData&&e instanceof FormData)}function hasFileField(e){for(const t in e){const s=Array.isArray(e[t])?e[t]:[e[t]];for(const e of s)if(isFile(e))return!0}return!1}const r=/^[\\-\\.\\d]+$/;function inferFormDataValue(e){if(\"string\"!=typeof e)return e;if(\"true\"==e)return!0;if(\"false\"==e)return!1;if((\"-\"===e[0]||e[0]>=\"0\"&&e[0]<=\"9\")&&r.test(e)){let t=+e;if(\"\"+t===e)return t}return e}class BatchService extends BaseService{constructor(){super(...arguments),this.requests=[],this.subs={}}collection(e){return this.subs[e]||(this.subs[e]=new SubBatchService(this.requests,e)),this.subs[e]}async send(e){const t=new FormData,s=[];for(let e=0;e<this.requests.length;e++){const i=this.requests[e];if(s.push({method:i.method,url:i.url,headers:i.headers,body:i.json}),i.files)for(let s in i.files){const n=i.files[s]||[];for(let i of n)t.append(\"requests.\"+e+\".\"+s,i)}}return t.append(\"@jsonPayload\",JSON.stringify({requests:s})),e=Object.assign({method:\"POST\",body:t},e),this.client.send(\"/api/batch\",e)}}class SubBatchService{constructor(e,t){this.requests=[],this.requests=e,this.collectionIdOrName=t}upsert(e,t){t=Object.assign({body:e||{}},t);const s={method:\"PUT\",url:\"/api/collections/\"+encodeURIComponent(this.collectionIdOrName)+\"/records\"};this.prepareRequest(s,t),this.requests.push(s)}create(e,t){t=Object.assign({body:e||{}},t);const s={method:\"POST\",url:\"/api/collections/\"+encodeURIComponent(this.collectionIdOrName)+\"/records\"};this.prepareRequest(s,t),this.requests.push(s)}update(e,t,s){s=Object.assign({body:t||{}},s);const i={method:\"PATCH\",url:\"/api/collections/\"+encodeURIComponent(this.collectionIdOrName)+\"/records/\"+encodeURIComponent(e)};this.prepareRequest(i,s),this.requests.push(i)}delete(e,t){t=Object.assign({},t);const s={method:\"DELETE\",url:\"/api/collections/\"+encodeURIComponent(this.collectionIdOrName)+\"/records/\"+encodeURIComponent(e)};this.prepareRequest(s,t),this.requests.push(s)}prepareRequest(e,t){if(normalizeUnknownQueryParams(t),e.headers=t.headers,e.json={},e.files={},void 0!==t.query){const s=serializeQueryParams(t.query);s&&(e.url+=(e.url.includes(\"?\")?\"&\":\"?\")+s)}let s=t.body;isFormData(s)&&(s=function convertFormDataToObject(e){let t={};return e.forEach(((e,s)=>{if(\"@jsonPayload\"===s&&\"string\"==typeof e)try{let s=JSON.parse(e);Object.assign(t,s)}catch(e){console.warn(\"@jsonPayload error:\",e)}else void 0!==t[s]?(Array.isArray(t[s])||(t[s]=[t[s]]),t[s].push(inferFormDataValue(e))):t[s]=inferFormDataValue(e)})),t}(s));for(const t in s){const i=s[t];if(isFile(i))e.files[t]=e.files[t]||[],e.files[t].push(i);else if(Array.isArray(i)){const s=[],n=[];for(const e of i)isFile(e)?s.push(e):n.push(e);if(s.length>0&&s.length==i.length){e.files[t]=e.files[t]||[];for(let i of s)e.files[t].push(i)}else if(e.json[t]=n,s.length>0){let i=t;t.startsWith(\"+\")||t.endsWith(\"+\")||(i+=\"+\"),e.files[i]=e.files[i]||[];for(let t of s)e.files[i].push(t)}}else e.json[t]=i}}}class Client{get baseUrl(){return this.baseURL}set baseUrl(e){this.baseURL=e}constructor(e=\"/\",t,s=\"en-US\"){this.cancelControllers={},this.recordServices={},this.enableAutoCancellation=!0,this.baseURL=e,this.lang=s,t?this.authStore=t:\"undefined\"!=typeof window&&window.Deno?this.authStore=new BaseAuthStore:this.authStore=new LocalAuthStore,this.collections=new CollectionService(this),this.files=new FileService(this),this.logs=new LogService(this),this.settings=new SettingsService(this),this.realtime=new RealtimeService(this),this.health=new HealthService(this),this.backups=new BackupService(this),this.crons=new CronService(this)}get admins(){return this.collection(\"_superusers\")}createBatch(){return new BatchService(this)}collection(e){return this.recordServices[e]||(this.recordServices[e]=new RecordService(this,e)),this.recordServices[e]}autoCancellation(e){return this.enableAutoCancellation=!!e,this}cancelRequest(e){return this.cancelControllers[e]&&(this.cancelControllers[e].abort(),delete this.cancelControllers[e]),this}cancelAllRequests(){for(let e in this.cancelControllers)this.cancelControllers[e].abort();return this.cancelControllers={},this}filter(e,t){if(!t)return e;for(let s in t){let i=t[s];switch(typeof i){case\"boolean\":case\"number\":i=\"\"+i;break;case\"string\":i=\"'\"+i.replace(/'/g,\"\\\\'\")+\"'\";break;default:i=null===i?\"null\":i instanceof Date?\"'\"+i.toISOString().replace(\"T\",\" \")+\"'\":\"'\"+JSON.stringify(i).replace(/'/g,\"\\\\'\")+\"'\"}e=e.replaceAll(\"{:\"+s+\"}\",i)}return e}getFileUrl(e,t,s={}){return console.warn(\"Please replace pb.getFileUrl() with pb.files.getURL()\"),this.files.getURL(e,t,s)}buildUrl(e){return console.warn(\"Please replace pb.buildUrl() with pb.buildURL()\"),this.buildURL(e)}buildURL(e){let t=this.baseURL;return\"undefined\"==typeof window||!window.location||t.startsWith(\"https://\")||t.startsWith(\"http://\")||(t=window.location.origin?.endsWith(\"/\")?window.location.origin.substring(0,window.location.origin.length-1):window.location.origin||\"\",this.baseURL.startsWith(\"/\")||(t+=window.location.pathname||\"/\",t+=t.endsWith(\"/\")?\"\":\"/\"),t+=this.baseURL),e&&(t+=t.endsWith(\"/\")?\"\":\"/\",t+=e.startsWith(\"/\")?e.substring(1):e),t}async send(e,t){t=this.initSendOptions(e,t);let s=this.buildURL(e);if(this.beforeSend){const e=Object.assign({},await this.beforeSend(s,t));void 0!==e.url||void 0!==e.options?(s=e.url||s,t=e.options||t):Object.keys(e).length&&(t=e,console?.warn&&console.warn(\"Deprecated format of beforeSend return: please use `return { url, options }`, instead of `return options`.\"))}if(void 0!==t.query){const e=serializeQueryParams(t.query);e&&(s+=(s.includes(\"?\")?\"&\":\"?\")+e),delete t.query}\"application/json\"==this.getHeader(t.headers,\"Content-Type\")&&t.body&&\"string\"!=typeof t.body&&(t.body=JSON.stringify(t.body));return(t.fetch||fetch)(s,t).then((async e=>{let s={};try{s=await e.json()}catch(e){if(t.signal?.aborted||\"undefined\"!=typeof DOMException&&e instanceof DOMException&&(\"AbortError\"==e.name||20==e.code))throw e}if(this.afterSend&&(s=await this.afterSend(e,s,t)),e.status>=400)throw new ClientResponseError({url:e.url,status:e.status,data:s});return s})).catch((e=>{throw new ClientResponseError(e)}))}initSendOptions(e,t){if((t=Object.assign({method:\"GET\"},t)).body=function convertToFormDataIfNeeded(e){if(\"undefined\"==typeof FormData||void 0===e||\"object\"!=typeof e||null===e||isFormData(e)||!hasFileField(e))return e;const t=new FormData;for(const s in e){const i=e[s];if(void 0!==i)if(\"object\"!=typeof i||hasFileField({data:i})){const e=Array.isArray(i)?i:[i];for(let i of e)t.append(s,i)}else{let e={};e[s]=i,t.append(\"@jsonPayload\",JSON.stringify(e))}}return t}(t.body),normalizeUnknownQueryParams(t),t.query=Object.assign({},t.params,t.query),void 0===t.requestKey&&(!1===t.$autoCancel||!1===t.query.$autoCancel?t.requestKey=null:(t.$cancelKey||t.query.$cancelKey)&&(t.requestKey=t.$cancelKey||t.query.$cancelKey)),delete t.$autoCancel,delete t.query.$autoCancel,delete t.$cancelKey,delete t.query.$cancelKey,null!==this.getHeader(t.headers,\"Content-Type\")||isFormData(t.body)||(t.headers=Object.assign({},t.headers,{\"Content-Type\":\"application/json\"})),null===this.getHeader(t.headers,\"Accept-Language\")&&(t.headers=Object.assign({},t.headers,{\"Accept-Language\":this.lang})),this.authStore.token&&null===this.getHeader(t.headers,\"Authorization\")&&(t.headers=Object.assign({},t.headers,{Authorization:this.authStore.token})),this.enableAutoCancellation&&null!==t.requestKey){const s=t.requestKey||(t.method||\"GET\")+e;delete t.requestKey,this.cancelRequest(s);const i=new AbortController;this.cancelControllers[s]=i,t.signal=i.signal}return t}getHeader(e,t){e=e||{},t=t.toLowerCase();for(let s in e)if(s.toLowerCase()==t)return e[s];return null}}class AsyncAuthStore extends BaseAuthStore{constructor(e){super(),this.queue=[],this.saveFunc=e.save,this.clearFunc=e.clear,this._enqueue((()=>this._loadInitial(e.initial)))}save(e,t){super.save(e,t);let s=\"\";try{s=JSON.stringify({token:e,record:t})}catch(e){console.warn(\"AsyncAuthStore: failed to stringify the new state\")}this._enqueue((()=>this.saveFunc(s)))}clear(){super.clear(),this.clearFunc?this._enqueue((()=>this.clearFunc())):this._enqueue((()=>this.saveFunc(\"\")))}async _loadInitial(e){try{if(e=await e){let t;\"string\"==typeof e?t=JSON.parse(e)||{}:\"object\"==typeof e&&(t=e),this.save(t.token||\"\",t.record||t.model||null)}}catch(e){}}_enqueue(e){this.queue.push(e),1==this.queue.length&&this._dequeue()}_dequeue(){this.queue.length&&this.queue[0]().finally((()=>{this.queue.shift(),this.queue.length&&this._dequeue()}))}}export{AsyncAuthStore,BaseAuthStore,BatchService,ClientResponseError,CollectionService,CrudService,HealthService,LocalAuthStore,LogService,RealtimeService,RecordService,SubBatchService,cookieParse,cookieSerialize,Client as default,getTokenPayload,isTokenExpired,normalizeUnknownQueryParams,serializeQueryParams};\n//# sourceMappingURL=pocketbase.es.mjs.map\n","import PocketBase, { RecordModel, RecordSubscription } from 'pocketbase';\r\nimport { events, setDbModule } from './events';\r\nimport { state } from './state';\r\n\r\n// Types\r\nexport interface DbUser extends RecordModel {\r\n  email: string;\r\n  username?: string;\r\n  name?: string;\r\n  avatar?: string;\r\n}\r\n\r\nexport interface ListOptions {\r\n  page?: number;\r\n  perPage?: number;\r\n  filter?: string;\r\n  sort?: string;\r\n  expand?: string;\r\n  fields?: string;\r\n}\r\n\r\nexport interface ListResult<T> {\r\n  page: number;\r\n  perPage: number;\r\n  totalItems: number;\r\n  totalPages: number;\r\n  items: T[];\r\n}\r\n\r\n// Internal state\r\nlet pb: PocketBase | null = null;\r\nlet dbUrl: string = typeof window !== 'undefined' ? window.location.origin : '';\r\nlet dbAutoCancellation: boolean = false;\r\nconst realtimeUnsubscribers = new Map<string, () => void>();\r\nconst realtimeRecordUnsubscribers = new Map<string, () => void>(); // Key: \"collection:id\"\r\n\r\n/**\r\n * Get or create the PocketBase instance\r\n */\r\nfunction getClient(): PocketBase {\r\n  if (!pb) {\r\n    pb = new PocketBase(dbUrl);\r\n\r\n    // Disable auto-cancellation by default (can be overridden via db.autoCancellation)\r\n    pb.autoCancellation(dbAutoCancellation);\r\n\r\n    // Listen for auth changes\r\n    pb.authStore.onChange(() => {\r\n      saveAuthState();\r\n      events.emit('auth:change', {\r\n        user: pb?.authStore.record as DbUser | null,\r\n        isAuthenticated: pb?.authStore.isValid ?? false\r\n      });\r\n    });\r\n\r\n    // Restore auth from previous session\r\n    restoreAuthState();\r\n  }\r\n  return pb;\r\n}\r\n\r\n/**\r\n * Save auth state to local storage\r\n */\r\nfunction saveAuthState(): void {\r\n  if (!pb) return;\r\n\r\n  if (pb.authStore.isValid) {\r\n    const user = pb.authStore.record as DbUser | null;\r\n    state.set('_auth:token', pb.authStore.token, { persist: 'local' });\r\n    state.set('_auth:user', user, { persist: 'local' });\r\n  } else {\r\n    state.remove('_auth:token');\r\n    state.remove('_auth:user');\r\n  }\r\n}\r\n\r\n/**\r\n * Restore auth state from local storage\r\n */\r\nfunction restoreAuthState(): void {\r\n  if (!pb) return;\r\n\r\n  const token = state.get<string>('_auth:token');\r\n  const user = state.get<DbUser>('_auth:user');\r\n\r\n  if (token && user) {\r\n    pb.authStore.save(token, user);\r\n  }\r\n}\r\n\r\n/**\r\n * Enable realtime for a collection (called by events module)\r\n */\r\nasync function enableRealtime(collection: string): Promise<void> {\r\n  if (realtimeUnsubscribers.has(collection)) return;\r\n\r\n  const client = getClient();\r\n  const unsubscribe = await client.collection(collection).subscribe('*', (e: RecordSubscription<RecordModel>) => {\r\n    events.emit(`db:${collection}:${e.action}`, { record: e.record });\r\n  });\r\n\r\n  realtimeUnsubscribers.set(collection, unsubscribe);\r\n}\r\n\r\n/**\r\n * Disable realtime for a collection (called by events module)\r\n */\r\nasync function disableRealtime(collection: string): Promise<void> {\r\n  const unsubscribe = realtimeUnsubscribers.get(collection);\r\n  if (unsubscribe) {\r\n    unsubscribe();\r\n    realtimeUnsubscribers.delete(collection);\r\n  }\r\n}\r\n\r\n/**\r\n * Enable realtime for a specific record (called by events module)\r\n */\r\nasync function enableRealtimeRecord(collection: string, id: string): Promise<void> {\r\n  const key = `${collection}:${id}`;\r\n  if (realtimeRecordUnsubscribers.has(key)) return;\r\n\r\n  const client = getClient();\r\n  const unsubscribe = await client.collection(collection).subscribe(id, (e: RecordSubscription<RecordModel>) => {\r\n    events.emit(`db:${collection}:${e.action}:${id}`, { record: e.record });\r\n  });\r\n\r\n  realtimeRecordUnsubscribers.set(key, unsubscribe);\r\n}\r\n\r\n/**\r\n * Disable realtime for a specific record (called by events module)\r\n */\r\nasync function disableRealtimeRecord(collection: string, id: string): Promise<void> {\r\n  const key = `${collection}:${id}`;\r\n  const unsubscribe = realtimeRecordUnsubscribers.get(key);\r\n  if (unsubscribe) {\r\n    unsubscribe();\r\n    realtimeRecordUnsubscribers.delete(key);\r\n  }\r\n}\r\n\r\n// Register with events module\r\nsetDbModule({ enableRealtime, disableRealtime, enableRealtimeRecord, disableRealtimeRecord });\r\n\r\nexport const db = {\r\n  /**\r\n   * Get or set the PocketBase URL\r\n   * Defaults to window.location.origin\r\n   */\r\n  get url(): string {\r\n    return dbUrl;\r\n  },\r\n\r\n  set url(value: string) {\r\n    dbUrl = value;\r\n    // Reset client so it reconnects with new URL\r\n    if (pb) {\r\n      pb = null;\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Get or set auto-cancellation behavior\r\n   * Defaults to false (disabled)\r\n   */\r\n  get autoCancellation(): boolean {\r\n    return dbAutoCancellation;\r\n  },\r\n\r\n  set autoCancellation(value: boolean) {\r\n    dbAutoCancellation = value;\r\n    // Apply to existing client if any\r\n    if (pb) {\r\n      pb.autoCancellation(value);\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Get the underlying PocketBase instance for advanced usage\r\n   */\r\n  client(): PocketBase {\r\n    return getClient();\r\n  },\r\n\r\n  /**\r\n   * Check if user is authenticated\r\n   */\r\n  isAuthenticated(): boolean {\r\n    return getClient().authStore.isValid;\r\n  },\r\n\r\n  /**\r\n   * Get current authenticated user\r\n   */\r\n  getUser<T extends DbUser = DbUser>(): T | null {\r\n    return (getClient().authStore.record as T) ?? null;\r\n  },\r\n\r\n  // ==================== AUTH ====================\r\n\r\n  /**\r\n   * Sign up a new user\r\n   */\r\n  async signup(email: string, password: string, data: Record<string, unknown> = {}): Promise<DbUser> {\r\n    const client = getClient();\r\n    const user = await client.collection('users').create<DbUser>({\r\n      email,\r\n      password,\r\n      passwordConfirm: password,\r\n      ...data\r\n    });\r\n    events.emit('auth:signup', { user });\r\n    return user;\r\n  },\r\n\r\n  /**\r\n   * Log in with email and password\r\n   */\r\n  async login(email: string, password: string): Promise<DbUser> {\r\n    const client = getClient();\r\n    const auth = await client.collection('users').authWithPassword<DbUser>(email, password);\r\n    events.emit('auth:login', { user: auth.record });\r\n    return auth.record;\r\n  },\r\n\r\n  /**\r\n   * Log in with OAuth2 provider\r\n   */\r\n  async loginWithOAuth(provider: string): Promise<DbUser> {\r\n    const client = getClient();\r\n    const auth = await client.collection('users').authWithOAuth2<DbUser>({ provider });\r\n    events.emit('auth:login', { user: auth.record });\r\n    return auth.record;\r\n  },\r\n\r\n  /**\r\n   * Log out the current user\r\n   */\r\n  logout(): void {\r\n    const user = this.getUser();\r\n    const client = getClient();\r\n    client.authStore.clear();\r\n    state.remove('_auth:token');\r\n    state.remove('_auth:user');\r\n    events.emit('auth:logout', { user });\r\n  },\r\n\r\n  /**\r\n   * Refresh the auth token\r\n   */\r\n  async refreshAuth(): Promise<DbUser> {\r\n    const client = getClient();\r\n    const auth = await client.collection('users').authRefresh<DbUser>();\r\n    events.emit('auth:refresh', { user: auth.record });\r\n    return auth.record;\r\n  },\r\n\r\n  /**\r\n   * Request a password reset email\r\n   */\r\n  async resetPassword(email: string): Promise<void> {\r\n    const client = getClient();\r\n    await client.collection('users').requestPasswordReset(email);\r\n    events.emit('auth:reset-request', { email });\r\n  },\r\n\r\n  /**\r\n   * Confirm a password reset\r\n   */\r\n  async confirmResetPassword(token: string, password: string): Promise<void> {\r\n    const client = getClient();\r\n    await client.collection('users').confirmPasswordReset(token, password, password);\r\n    events.emit('auth:reset-confirm', {});\r\n  },\r\n\r\n  /**\r\n   * Request email verification\r\n   */\r\n  async requestVerification(email: string): Promise<void> {\r\n    const client = getClient();\r\n    await client.collection('users').requestVerification(email);\r\n    events.emit('auth:verify-request', { email });\r\n  },\r\n\r\n  /**\r\n   * Confirm email verification\r\n   */\r\n  async confirmVerification(token: string): Promise<void> {\r\n    const client = getClient();\r\n    await client.collection('users').confirmVerification(token);\r\n    events.emit('auth:verify-confirm', {});\r\n  },\r\n\r\n  // ==================== CRUD ====================\r\n\r\n  /**\r\n   * Get a single record by ID\r\n   */\r\n  async get<T extends RecordModel = RecordModel>(\r\n    collection: string,\r\n    id: string,\r\n    options: Omit<ListOptions, 'page' | 'perPage' | 'filter' | 'sort'> = {}\r\n  ): Promise<T> {\r\n    const client = getClient();\r\n    return client.collection(collection).getOne<T>(id, options);\r\n  },\r\n\r\n  /**\r\n   * List records with pagination\r\n   */\r\n  async list<T extends RecordModel = RecordModel>(\r\n    collection: string,\r\n    options: ListOptions = {}\r\n  ): Promise<ListResult<T>> {\r\n    const client = getClient();\r\n    const { page = 1, perPage = 20, ...rest } = options;\r\n    return client.collection(collection).getList<T>(page, perPage, rest);\r\n  },\r\n\r\n  /**\r\n   * Get all records (auto-paginated)\r\n   */\r\n  async getAll<T extends RecordModel = RecordModel>(\r\n    collection: string,\r\n    options: Omit<ListOptions, 'page' | 'perPage'> = {}\r\n  ): Promise<T[]> {\r\n    const client = getClient();\r\n    return client.collection(collection).getFullList<T>(options);\r\n  },\r\n\r\n  /**\r\n   * Get the first record matching a filter\r\n   */\r\n  async getFirst<T extends RecordModel = RecordModel>(\r\n    collection: string,\r\n    filter: string,\r\n    options: Omit<ListOptions, 'page' | 'perPage' | 'filter'> = {}\r\n  ): Promise<T | null> {\r\n    const client = getClient();\r\n    try {\r\n      return await client.collection(collection).getFirstListItem<T>(filter, options);\r\n    } catch {\r\n      return null;\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Create a new record\r\n   * Data can be a plain object or FormData (for file uploads)\r\n   */\r\n  async create<T extends RecordModel = RecordModel>(\r\n    collection: string,\r\n    data: Record<string, unknown> | FormData,\r\n    options: Omit<ListOptions, 'page' | 'perPage' | 'filter' | 'sort'> = {}\r\n  ): Promise<T> {\r\n    const client = getClient();\r\n    const record = await client.collection(collection).create<T>(data, options);\r\n    events.emit(`db:${collection}:create`, { record });\r\n    return record;\r\n  },\r\n\r\n  /**\r\n   * Update an existing record\r\n   * Data can be a plain object or FormData (for file uploads)\r\n   */\r\n  async update<T extends RecordModel = RecordModel>(\r\n    collection: string,\r\n    id: string,\r\n    data: Record<string, unknown> | FormData,\r\n    options: Omit<ListOptions, 'page' | 'perPage' | 'filter' | 'sort'> = {}\r\n  ): Promise<T> {\r\n    const client = getClient();\r\n    const record = await client.collection(collection).update<T>(id, data, options);\r\n    events.emit(`db:${collection}:update`, { record });\r\n    return record;\r\n  },\r\n\r\n  /**\r\n   * Delete a record\r\n   */\r\n  async delete(collection: string, id: string): Promise<void> {\r\n    const client = getClient();\r\n    await client.collection(collection).delete(id);\r\n    events.emit(`db:${collection}:delete`, { id });\r\n  },\r\n\r\n  // ==================== FILES ====================\r\n\r\n  /**\r\n   * Get a file URL from a record\r\n   */\r\n  getFileUrl(\r\n    record: RecordModel,\r\n    filename: string,\r\n    options: { thumb?: string } = {}\r\n  ): string {\r\n    const client = getClient();\r\n    return client.files.getURL(record, filename, options);\r\n  }\r\n};\r\n","import { state, StateOptions } from './state';\r\nimport { events, EventCallback } from './events';\r\nimport { db, DbUser, ListOptions, ListResult } from './db';\r\n\r\nexport interface CC {\r\n  state: typeof state;\r\n  events: typeof events;\r\n  db: typeof db;\r\n}\r\n\r\nexport const cc: CC = {\r\n  state,\r\n  events,\r\n  db\r\n};\r\n\r\n// Auto-attach to window in browser environments\r\nif (typeof window !== 'undefined') {\r\n  (window as unknown as { cc: CC }).cc = cc;\r\n}\r\n\r\n// Named exports for ESM usage\r\nexport { state, events, db };\r\nexport type { StateOptions, EventCallback, DbUser, ListOptions, ListResult };\r\n\r\n// Default export\r\nexport default cc;\r\n"],"names":["listeners","customHandlers","Map","realtimeCollections","realtimeRecords","dbModule","parseDbEvent","eventName","match","collection","action","id","async","handleRealtimeAdd","key","count","get","set","enableRealtimeRecord","enableRealtime","events","on","event","callback","entry","push","has","Set","add","dbEvent","undefined","off","index","findIndex","l","originalCallback","splice","delete","disableRealtimeRecord","disableRealtime","handleRealtimeRemove","once","wrapper","payload","this","emit","handlers","forEach","handler","e","console","error","clear","filter","indexOf","length","_","split","list","map","STORAGE_PREFIX","memoryStore","getStorage","persist","window","sessionStorage","localStorage","isExpired","stored","expiry","Date","now","getFromStorage","storage","raw","getItem","JSON","parse","removeFromStorage","removeItem","state","mem","remove","value","options","ttl","oldValue","setItem","stringify","saveToStorage","result","i","rawKey","startsWith","slice","keysToRemove","k","ClientResponseError","Error","constructor","super","url","status","response","isAbort","originalError","Object","setPrototypeOf","prototype","data","DOMException","name","code","message","cause","includes","toJSON","cookieSerialize","t","s","n","assign","r","encode","defaultEncode","test","TypeError","o","a","maxAge","isNaN","isFinite","Math","floor","domain","path","expires","toString","call","valueOf","toUTCString","httpOnly","secure","priority","toLowerCase","sameSite","defaultDecode","decodeURIComponent","encodeURIComponent","navigator","product","global","HermesInternal","getTokenPayload","charCodeAt","join","isTokenExpired","keys","exp","atob","String","replace","charAt","fromCharCode","BaseAuthStore","baseToken","baseModel","_onChangeCallbacks","token","record","model","isValid","isSuperuser","type","collectionName","collectionId","isAdmin","warn","isAuthRecord","save","triggerChange","loadFromCookie","decode","lastIndexOf","trim","cookieParse","Array","isArray","exportToCookie","Blob","size","email","onChange","LocalAuthStore","storageFallback","storageKey","_bindStorageEvent","_storageGet","_storageSet","_storageRemove","addEventListener","BaseService","client","SettingsService","getAll","method","send","update","body","testS3","filesystem","then","testEmail","template","generateAppleClientSecret","clientId","teamId","keyId","privateKey","duration","normalizeUnknownQueryParams","query","serializeQueryParams","prepareQueryParamValue","toISOString","RealtimeService","arguments","eventSource","subscriptions","lastSentSubscriptions","maxConnectTimeout","reconnectAttempts","maxReconnectAttempts","predefinedReconnectIntervals","pendingConnects","isConnected","subscribe","headers","listener","submitSubscriptions","connect","unsubscribeByTopicAndListener","unsubscribe","getSubscriptionsByTopic","hasSubscriptionListeners","removeEventListener","disconnect","unsubscribeByPrefix","addAllSubscriptionListeners","getNonEmptySubscriptionKeys","requestKey","getSubscriptionsCancelKey","catch","removeAllSubscriptionListeners","Promise","resolve","reject","initConnect","clearTimeout","connectTimeoutId","setTimeout","connectErrorHandler","EventSource","buildURL","onerror","lastEventId","hasUnsentSubscriptions","reconnectTimeoutId","onDisconnect","cancelRequest","close","CrudService","getFullList","_getFullList","batch","getList","page","perPage","baseCrudPath","items","getFirstListItem","skipTotal","getOne","create","request","concat","normalizeLegacyOptionsArgs","resetAutoRefresh","_resetAutoRefresh","RecordService","collectionIdOrName","baseCollectionPath","isSuperusers","realtime","authStore","expand","authResponse","listAuthMethods","fields","authWithPassword","identity","password","autoRefreshThreshold","autoRefresh","beforeSend","sendOptions","c","authRefresh","authWithOAuth2Code","provider","codeVerifier","redirectURL","createData","authWithOAuth2","urlCallback","openBrowserPopup","cleanup","oauth2","providers","find","cancelControllers","signal","onabort","scopes","scope","_replaceQueryParams","authURL","h","location","href","requestPasswordReset","confirmPasswordReset","passwordConfirm","requestVerification","confirmVerification","verified","requestEmailChange","newEmail","confirmEmailChange","listExternalAuths","unlinkExternalAuth","recordId","requestOTP","authWithOTP","otpId","impersonate","Authorization","Client","baseURL","lang","substring","hasOwnProperty","open","innerWidth","innerHeight","CollectionService","import","collections","deleteMissing","getScaffolds","truncate","LogService","getStats","HealthService","check","FileService","getUrl","getURL","download","URLSearchParams","getToken","BackupService","upload","restore","getDownloadUrl","getDownloadURL","CronService","run","isFile","File","uri","isFormData","FormData","hasFileField","inferFormDataValue","BatchService","requests","subs","SubBatchService","json","files","append","upsert","prepareRequest","endsWith","baseUrl","recordServices","enableAutoCancellation","Deno","logs","settings","health","backups","crons","admins","createBatch","autoCancellation","abort","cancelAllRequests","replaceAll","getFileUrl","buildUrl","origin","pathname","initSendOptions","getHeader","fetch","aborted","afterSend","params","$autoCancel","$cancelKey","AbortController","pb","dbUrl","dbAutoCancellation","realtimeUnsubscribers","realtimeRecordUnsubscribers","getClient","PocketBase","user","saveAuthState","isAuthenticated","restoreAuthState","db","setDbModule","getUser","signup","login","auth","loginWithOAuth","logout","refreshAuth","resetPassword","confirmResetPassword","rest","getFirst","filename","cc"],"mappings":"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","x_google_ignoreList":[2]}